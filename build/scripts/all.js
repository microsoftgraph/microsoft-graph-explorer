/*! hellojs v1.14.0 | (c) 2012-2016 Andrew Dodson | MIT https://adodson.com/hello.js/LICENSE */
Object.create||(Object.create=function(){function e(){}return function(t){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Object.keys||(Object.keys=function(e,t,n){n=[];for(t in e)n.hasOwnProperty.call(e,t)&&n.push(t);return n}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e){if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var o=arguments.length>=2?arguments[1]:void 0,i=0;n>i;i++)i in t&&e.call(o,t[i],i,t);return this}),Array.prototype.filter||(Array.prototype.filter=function(e,t){var n=[];return this.forEach(function(o,i,r){e.call(t||void 0,o,i,r)&&n.push(o)}),n}),Array.prototype.map||(Array.prototype.map=function(e,t){var n=[];return this.forEach(function(o,i,r){n.push(e.call(t||void 0,o,i,r))}),n}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),"object"!=typeof window||"object"!=typeof window.location||window.location.assign||(window.location.assign=function(e){window.location=e}),Function.prototype.bind||(Function.prototype.bind=function(e){function t(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var n=[].slice,o=n.call(arguments,1),i=this,r=function(){return i.apply(this instanceof t?this:e||window,o.concat(n.call(arguments)))};return t.prototype=this.prototype,r.prototype=new t,r});var hello=function(e){return hello.use(e)};hello.utils={extend:function(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(Array.isArray(e)&&Array.isArray(t))Array.prototype.push.apply(e,t);else if(e instanceof Object&&t instanceof Object&&e!==t)for(var n in t)e[n]=hello.utils.extend(e[n],t[n]);else Array.isArray(t)&&(t=t.slice(0)),e=t}),e}},hello.utils.extend(hello,{settings:{redirect_uri:window.location.href.split("#")[0],response_type:"token",display:"popup",state:"",oauth_proxy:"https://auth-server.herokuapp.com/proxy",timeout:2e4,popup:{resizable:1,scrollbars:1,width:500,height:550},scope:["basic"],scope_map:{basic:""},default_service:null,force:null,page_uri:window.location.href},services:{},use:function(e){var t=Object.create(this);return t.settings=Object.create(this.settings),e&&(t.settings.default_service=e),t.utils.Event.call(t),t},init:function(e,t){var n=this.utils;if(!e)return this.services;for(var o in e)e.hasOwnProperty(o)&&"object"!=typeof e[o]&&(e[o]={id:e[o]});return n.extend(this.services,e),t&&(n.extend(this.settings,t),"redirect_uri"in t&&(this.settings.redirect_uri=n.url(t.redirect_uri).href)),this},login:function(){function e(e,t){hello.emit(e,t)}function t(e){return e}function n(e){return!!e}var o,i=this,r=i.utils,a=r.error,s=r.Promise(),l=r.args({network:"s",options:"o",callback:"f"},arguments),u=r.diffKey(l.options,i.settings),c=l.options=r.merge(i.settings,l.options||{});if(c.popup=r.merge(i.settings.popup,l.options.popup||{}),l.network=l.network||i.settings.default_service,s.proxy.then(l.callback,l.callback),s.proxy.then(e.bind(this,"auth.login auth"),e.bind(this,"auth.failed auth")),"string"!=typeof l.network||!(l.network in i.services))return s.reject(a("invalid_network","The provided network was not recognized"));var d=i.services[l.network],f=r.globalEvent(function(e){var t;t=e?JSON.parse(e):a("cancelled","The authentication was not completed"),t.error?s.reject(t):(r.store(t.network,t),s.fulfill({network:t.network,authResponse:t}))}),p=r.url(c.redirect_uri).href,m=d.oauth.response_type||c.response_type;/\bcode\b/.test(m)&&!d.oauth.grant&&(m=m.replace(/\bcode\b/,"token")),l.qs=r.merge(u,{client_id:encodeURIComponent(d.id),response_type:encodeURIComponent(m),redirect_uri:encodeURIComponent(p),state:{client_id:d.id,network:l.network,display:c.display,callback:f,state:c.state,redirect_uri:p}});var h=r.store(l.network),g=/[,\s]+/,v=i.settings.scope?[i.settings.scope.toString()]:[],y=r.merge(i.settings.scope_map,d.scope||{});if(c.scope&&v.push(c.scope.toString()),h&&"scope"in h&&h.scope instanceof String&&v.push(h.scope),v=v.join(",").split(g),v=r.unique(v).filter(n),l.qs.state.scope=v.join(","),v=v.map(function(e){return e in y?y[e]:e}),v=v.join(",").split(g),v=r.unique(v).filter(n),l.qs.scope=v.join(d.scope_delim||","),c.force===!1&&h&&"access_token"in h&&h.access_token&&"expires"in h&&h.expires>(new Date).getTime()/1e3){var w=r.diff((h.scope||"").split(g),(l.qs.state.scope||"").split(g));if(0===w.length)return s.fulfill({unchanged:!0,network:l.network,authResponse:h}),s}if("page"===c.display&&c.page_uri&&(l.qs.state.page_uri=r.url(c.page_uri).href),"login"in d&&"function"==typeof d.login&&d.login(l),(!/\btoken\b/.test(m)||parseInt(d.oauth.version,10)<2||"none"===c.display&&d.oauth.grant&&h&&h.refresh_token)&&(l.qs.state.oauth=d.oauth,l.qs.state.oauth_proxy=c.oauth_proxy),l.qs.state=encodeURIComponent(JSON.stringify(l.qs.state)),1===parseInt(d.oauth.version,10)?o=r.qs(c.oauth_proxy,l.qs,t):"none"===c.display&&d.oauth.grant&&h&&h.refresh_token?(l.qs.refresh_token=h.refresh_token,o=r.qs(c.oauth_proxy,l.qs,t)):o=r.qs(d.oauth.auth,l.qs,t),e("auth.init",l),"none"===c.display)r.iframe(o,p);else if("popup"===c.display)var _=r.popup(o,p,c.popup),b=setInterval(function(){if((!_||_.closed)&&(clearInterval(b),!s.state)){var e=a("cancelled","Login has been cancelled");_||(e=a("blocked","Popup was blocked")),e.network=l.network,s.reject(e)}},100);else window.location=o;return s.proxy},logout:function(){function e(e,t){hello.emit(e,t)}var t=this,n=t.utils,o=n.error,i=n.Promise(),r=n.args({name:"s",options:"o",callback:"f"},arguments);if(r.options=r.options||{},i.proxy.then(r.callback,r.callback),i.proxy.then(e.bind(this,"auth.logout auth"),e.bind(this,"error")),r.name=r.name||this.settings.default_service,r.authResponse=n.store(r.name),!r.name||r.name in t.services)if(r.name&&r.authResponse){var a=function(e){n.store(r.name,null),i.fulfill(hello.utils.merge({network:r.name},e||{}))},s={};if(r.options.force){var l=t.services[r.name].logout;if(l)if("function"==typeof l&&(l=l(a,r)),"string"==typeof l)n.iframe(l),s.force=null,s.message="Logout success on providers site was indeterminate";else if(void 0===l)return i.proxy}a(s)}else i.reject(o("invalid_session","There was no session to remove"));else i.reject(o("invalid_network","The network was unrecognized"));return i.proxy},getAuthResponse:function(e){return e=e||this.settings.default_service,e&&e in this.services?this.utils.store(e)||null:null},events:{}}),hello.utils.extend(hello.utils,{error:function(e,t){return{error:{code:e,message:t}}},qs:function(e,t,n){if(t){n=n||encodeURIComponent;for(var o in t){var i="([\\?\\&])"+o+"=[^\\&]*",r=new RegExp(i);e.match(r)&&(e=e.replace(r,"$1"+o+"="+n(t[o])),delete t[o])}}return this.isEmpty(t)?e:e+(e.indexOf("?")>-1?"&":"?")+this.param(t,n)},param:function(e,t){var n,o,i={};if("string"==typeof e){if(t=t||decodeURIComponent,o=e.replace(/^[\#\?]/,"").match(/([^=\/\&]+)=([^\&]+)/g))for(var r=0;r<o.length;r++)n=o[r].match(/([^=]+)=(.*)/),i[n[1]]=t(n[2]);return i}t=t||encodeURIComponent;var a=e;i=[];for(var s in a)a.hasOwnProperty(s)&&a.hasOwnProperty(s)&&i.push([s,"?"===a[s]?"?":t(a[s])].join("="));return i.join("&")},store:function(){function e(){var e={};try{e=JSON.parse(n.getItem("hello"))||{}}catch(t){}return e}function t(e){n.setItem("hello",JSON.stringify(e))}for(var n,o=["localStorage","sessionStorage"],i=-1,r="test";o[++i];)try{n=window[o[i]],n.setItem(r+i,i),n.removeItem(r+i);break}catch(a){n=null}if(!n){var s=null;n={getItem:function(e){e+="=";for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var o=t[n].replace(/(^\s+|\s+$)/,"");if(o&&0===o.indexOf(e))return o.substr(e.length)}return s},setItem:function(e,t){s=t,document.cookie=e+"="+t}},s=n.getItem("hello")}return function(n,o,i){var r=e();if(n&&void 0===o)return r[n]||null;if(n&&null===o)try{delete r[n]}catch(a){r[n]=null}else{if(!n)return r;r[n]=o}return t(r),r||null}}(),append:function(e,t,n){var o="string"==typeof e?document.createElement(e):e;if("object"==typeof t)if("tagName"in t)n=t;else for(var i in t)if(t.hasOwnProperty(i))if("object"==typeof t[i])for(var r in t[i])t[i].hasOwnProperty(r)&&(o[i][r]=t[i][r]);else"html"===i?o.innerHTML=t[i]:/^on/.test(i)?o[i]=t[i]:o.setAttribute(i,t[i]);return"body"===n?!function a(){document.body?document.body.appendChild(o):setTimeout(a,16)}():"object"==typeof n?n.appendChild(o):"string"==typeof n&&document.getElementsByTagName(n)[0].appendChild(o),o},iframe:function(e){this.append("iframe",{src:e,style:{position:"absolute",left:"-1000px",bottom:0,height:"1px",width:"1px"}},"body")},merge:function(){var e=Array.prototype.slice.call(arguments);return e.unshift({}),this.extend.apply(null,e)},args:function(e,t){var n={},o=0,i=null,r=null;for(r in e)if(e.hasOwnProperty(r))break;if(1===t.length&&"object"==typeof t[0]&&"o!"!=e[r])for(r in t[0])if(e.hasOwnProperty(r)&&r in e)return t[0];for(r in e)if(e.hasOwnProperty(r))if(i=typeof t[o],"function"==typeof e[r]&&e[r].test(t[o])||"string"==typeof e[r]&&(e[r].indexOf("s")>-1&&"string"===i||e[r].indexOf("o")>-1&&"object"===i||e[r].indexOf("i")>-1&&"number"===i||e[r].indexOf("a")>-1&&"object"===i||e[r].indexOf("f")>-1&&"function"===i))n[r]=t[o++];else if("string"==typeof e[r]&&e[r].indexOf("!")>-1)return!1;return n},url:function(e){if(e){if(window.URL&&URL instanceof Function&&0!==URL.length)return new URL(e,window.location);var t=document.createElement("a");return t.href=e,t.cloneNode(!1)}return window.location},diff:function(e,t){return t.filter(function(t){return-1===e.indexOf(t)})},diffKey:function(e,t){if(e||!t){var n={};for(var o in e)o in t||(n[o]=e[o]);return n}return e},unique:function(e){return Array.isArray(e)?e.filter(function(t,n){return e.indexOf(t)===n}):[]},isEmpty:function(e){if(!e)return!0;if(Array.isArray(e))return!e.length;if("object"==typeof e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},Promise:function(){var e=0,t=1,n=2,o=function(t){return this instanceof o?(this.id="Thenable/1.0.6",this.state=e,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},void("function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this)))):new o(t)};o.prototype={fulfill:function(e){return i(this,t,"fulfillValue",e)},reject:function(e){return i(this,n,"rejectReason",e)},then:function(e,t){var n=this,i=new o;return n.onFulfilled.push(s(e,i,"fulfill")),n.onRejected.push(s(t,i,"reject")),r(n),i.proxy}};var i=function(t,n,o,i){return t.state===e&&(t.state=n,t[o]=i,r(t)),t},r=function(e){e.state===t?a(e,"onFulfilled",e.fulfillValue):e.state===n&&a(e,"onRejected",e.rejectReason)},a=function(e,t,n){if(0!==e[t].length){var o=e[t];e[t]=[];var i=function(){for(var e=0;e<o.length;e++)o[e](n)};"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick(i):"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},s=function(e,t,n){return function(o){if("function"!=typeof e)t[n].call(t,o);else{var i;try{i=e(o)}catch(r){return void t.reject(r)}l(t,i)}}},l=function(e,t){if(e===t||e.proxy===t)return void e.reject(new TypeError("cannot resolve promise with itself"));var n;if("object"==typeof t&&null!==t||"function"==typeof t)try{n=t.then}catch(o){return void e.reject(o)}if("function"!=typeof n)e.fulfill(t);else{var i=!1;try{n.call(t,function(n){i||(i=!0,n===t?e.reject(new TypeError("circular thenable chain")):l(e,n))},function(t){i||(i=!0,e.reject(t))})}catch(o){i||e.reject(o)}}};return o}(),Event:function(){var e=/[\s\,]+/;return this.parent={events:this.events,findEvents:this.findEvents,parent:this.parent,utils:this.utils},this.events={},this.on=function(t,n){if(n&&"function"==typeof n)for(var o=t.split(e),i=0;i<o.length;i++)this.events[o[i]]=[n].concat(this.events[o[i]]||[]);return this},this.off=function(e,t){return this.findEvents(e,function(e,n){t&&this.events[e][n]!==t||(this.events[e][n]=null)}),this},this.emit=function(e){var t=Array.prototype.slice.call(arguments,1);t.push(e);for(var n=function(n,o){t[t.length-1]="*"===n?e:n,this.events[n][o].apply(this,t)},o=this;o&&o.findEvents;)o.findEvents(e+",*",n),o=o.parent;return this},this.emitAfter=function(){var e=this,t=arguments;return setTimeout(function(){e.emit.apply(e,t)},0),this},this.findEvents=function(t,n){var o=t.split(e);for(var i in this.events)if(this.events.hasOwnProperty(i)&&o.indexOf(i)>-1)for(var r=0;r<this.events[i].length;r++)this.events[i][r]&&n.call(this,i,r)},this},globalEvent:function(e,t){return t=t||"_hellojs_"+parseInt(1e12*Math.random(),10).toString(36),window[t]=function(){try{e.apply(this,arguments)&&delete window[t]}catch(n){console.error(n)}},t},popup:function(e,t,n){var o=document.documentElement;if(n.height){var i=void 0!==window.screenTop?window.screenTop:screen.top,r=screen.height||window.innerHeight||o.clientHeight;n.top=parseInt((r-n.height)/2,10)+i}if(n.width){var a=void 0!==window.screenLeft?window.screenLeft:screen.left,s=screen.width||window.innerWidth||o.clientWidth;n.left=parseInt((s-n.width)/2,10)+a}var l=[];Object.keys(n).forEach(function(e){var t=n[e];l.push(e+(null!==t?"="+t:""))}),-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&(e=t+"#oauth_redirect="+encodeURIComponent(encodeURIComponent(e)));var u=window.open(e,"_blank",l.join(","));return u&&u.focus&&u.focus(),u},responseHandler:function(e,t){function n(e,t,n){var r=e.callback,s=e.network;if(a.store(s,e),!("display"in e&&"page"===e.display)){if(n&&r&&r in n){try{delete e.callback}catch(l){}a.store(s,e);var u=JSON.stringify(e);try{o(n,r)(u)}catch(l){}}i()}}function o(e,t){return 0!==t.indexOf("_hellojs_")?function(){throw"Could not execute callback "+t}:e[t]}function i(){if(e.frameElement)t.document.body.removeChild(e.frameElement);else{try{e.close()}catch(n){}e.addEventListener&&e.addEventListener("load",function(){e.close()})}}var r,a=this,s=e.location;if(r=a.param(s.search),r&&r.state&&(r.code||r.oauth_token)){var l=JSON.parse(r.state);r.redirect_uri=l.redirect_uri||s.href.replace(/[\?\#].*$/,"");var u=l.oauth_proxy+"?"+a.param(r);return void s.assign(u)}if(r=a.merge(a.param(s.search||""),a.param(s.hash||"")),r&&"state"in r){try{var c=JSON.parse(r.state);a.extend(r,c)}catch(d){console.error("Could not decode state parameter")}if("access_token"in r&&r.access_token&&r.network)r.expires_in&&0!==parseInt(r.expires_in,10)||(r.expires_in=0),r.expires_in=parseInt(r.expires_in,10),r.expires=(new Date).getTime()/1e3+(r.expires_in||31536e3),n(r,e,t);else if("error"in r&&r.error&&r.network)r.error={code:r.error,message:r.error_message||r.error_description},n(r,e,t);else if(r.callback&&r.callback in t){var f="result"in r&&r.result?JSON.parse(r.result):!1;o(t,r.callback)(f),i()}r.page_uri&&s.assign(r.page_uri)}else if("oauth_redirect"in r)return void s.assign(decodeURIComponent(r.oauth_redirect))}}),hello.utils.Event.call(hello),function(e){var t={},n={};e.on("auth.login, auth.logout",function(n){n&&"object"==typeof n&&n.network&&(t[n.network]=e.utils.store(n.network)||{})}),function o(){var i=(new Date).getTime()/1e3,r=function(t){e.emit("auth."+t,{network:a,authResponse:s})};for(var a in e.services)if(e.services.hasOwnProperty(a)){if(!e.services[a].id)continue;var s=e.utils.store(a)||{},l=e.services[a],u=t[a]||{};if(s&&"callback"in s){var c=s.callback;try{delete s.callback}catch(d){}e.utils.store(a,s);try{window[c](s)}catch(d){}}if(s&&"expires"in s&&s.expires<i){var f=l.refresh||s.refresh_token;!f||a in n&&!(n[a]<i)?f||a in n||(r("expired"),n[a]=!0):(e.emit("notice",a+" has expired trying to resignin"),e.login(a,{display:"none",force:!1}),n[a]=i+600);continue}if(u.access_token===s.access_token&&u.expires===s.expires)continue;!s.access_token&&u.access_token?r("logout"):s.access_token&&!u.access_token?r("login"):s.expires!==u.expires&&r("update"),t[a]=s,a in n&&delete n[a]}setTimeout(o,1e3)}()}(hello),hello.api=function(){function e(e){e=e.replace(/\@\{([a-z\_\-]+)(\|.*?)?\}/gi,function(e,t,n){var a=n?n.replace(/^\|/,""):"";return t in r.query?(a=r.query[t],delete r.query[t]):r.data&&t in r.data?(a=r.data[t],delete r.data[t]):n||i.reject(o("missing_attribute","The attribute "+t+" is missing from the request")),a}),e.match(/^https?:\/\//)||(e=u.base+e),r.url=e,n.request(r,function(e,t){if(!r.formatResponse)return void(("object"==typeof t?t.statusCode>=400:"object"==typeof e&&"error"in e)?i.reject(e):i.fulfill(e));if(e===!0?e={success:!0}:e||(e={}),"delete"===r.method&&(e=!e||n.isEmpty(e)?{success:!0}:e),u.wrap&&(r.path in u.wrap||"default"in u.wrap)){var o=r.path in u.wrap?r.path:"default",a=((new Date).getTime(),u.wrap[o](e,t,r));a&&(e=a)}e&&"paging"in e&&e.paging.next&&("?"===e.paging.next[0]?e.paging.next=r.path+e.paging.next:e.paging.next+="#"+r.path),!e||"error"in e?i.reject(e):i.fulfill(e)})}var t=this,n=t.utils,o=n.error,i=n.Promise(),r=n.args({path:"s!",query:"o",method:"s",data:"o",timeout:"i",callback:"f"},arguments);r.method=(r.method||"get").toLowerCase(),r.headers=r.headers||{},r.query=r.query||{},"get"!==r.method&&"delete"!==r.method||(n.extend(r.query,r.data),r.data={});var a=r.data=r.data||{};if(i.then(r.callback,r.callback),!r.path)return i.reject(o("invalid_path","Missing the path parameter from the request"));r.path=r.path.replace(/^\/+/,"");var s=(r.path.split(/[\/\:]/,2)||[])[0].toLowerCase();if(s in t.services){r.network=s;var l=new RegExp("^"+s+":?/?");r.path=r.path.replace(l,"")}r.network=t.settings.default_service=r.network||t.settings.default_service;var u=t.services[r.network];if(!u)return i.reject(o("invalid_network","Could not match the service requested: "+r.network));if(r.method in u&&r.path in u[r.method]&&u[r.method][r.path]===!1)return i.reject(o("invalid_path","The provided path is not available on the selected network"));r.oauth_proxy||(r.oauth_proxy=t.settings.oauth_proxy),"proxy"in r||(r.proxy=r.oauth_proxy&&u.oauth&&1===parseInt(u.oauth.version,10)),"timeout"in r||(r.timeout=t.settings.timeout),"formatResponse"in r||(r.formatResponse=!0),r.authResponse=t.getAuthResponse(r.network),r.authResponse&&r.authResponse.access_token&&(r.query.access_token=r.authResponse.access_token);var c,d=r.path;r.options=n.clone(r.query),r.data=n.clone(a);var f=u[{"delete":"del"}[r.method]||r.method]||{};if("get"===r.method){var p=d.split(/[\?#]/)[1];p&&(n.extend(r.query,n.param(p)),d=d.replace(/\?.*?(#|$)/,"$1"))}return(c=d.match(/#(.+)/,""))?(d=d.split("#")[0],r.path=c[1]):d in f?(r.path=d,d=f[d]):"default"in f&&(d=f["default"]),r.redirect_uri=t.settings.redirect_uri,r.xhr=u.xhr,r.jsonp=u.jsonp,r.form=u.form,"function"==typeof d?d(r,e):e(d),i.proxy},hello.utils.extend(hello.utils,{request:function(e,t){function n(e,t){var n;e.authResponse&&e.authResponse.oauth&&1===parseInt(e.authResponse.oauth.version,10)&&(n=e.query.access_token,delete e.query.access_token,e.proxy=!0),!e.data||"get"!==e.method&&"delete"!==e.method||(o.extend(e.query,e.data),e.data=null);var i=o.qs(e.url,e.query);e.proxy&&(i=o.qs(e.oauth_proxy,{path:i,access_token:n||"",then:e.proxy_response_type||("get"===e.method.toLowerCase()?"redirect":"proxy"),method:e.method.toLowerCase(),suppress_response_codes:!0})),t(i)}var o=this,i=o.error;o.isEmpty(e.data)||"FileList"in window||!o.hasBinary(e.data)||(e.xhr=!1,e.jsonp=!1);var r=this.request_cors(function(){return void 0===e.xhr||e.xhr&&("function"!=typeof e.xhr||e.xhr(e,e.query))});if(r)return void n(e,function(n){var i=o.xhr(e.method,n,e.headers,e.data,t);i.onprogress=e.onprogress||null,i.upload&&e.onuploadprogress&&(i.upload.onprogress=e.onuploadprogress)});var a=e.query;if(e.query=o.clone(e.query),e.callbackID=o.globalEvent(),e.jsonp!==!1){if(e.query.callback=e.callbackID,"function"==typeof e.jsonp&&e.jsonp(e,e.query),"get"===e.method)return void n(e,function(n){o.jsonp(n,t,e.callbackID,e.timeout)});e.query=a}if(e.form!==!1){e.query.redirect_uri=e.redirect_uri,e.query.state=JSON.stringify({callback:e.callbackID});var s;if("function"==typeof e.form&&(s=e.form(e,e.query)),"post"===e.method&&s!==!1)return void n(e,function(n){o.post(n,e.data,s,t,e.callbackID,e.timeout)})}t(i("invalid_request","There was no mechanism for handling this request"))},request_cors:function(e){return"withCredentials"in new XMLHttpRequest&&e()},domInstance:function(e,t){var n="HTML"+(e||"").replace(/^[a-z]/,function(e){return e.toUpperCase()})+"Element";return t?window[n]?t instanceof window[n]:window.Element?t instanceof window.Element&&(!e||t.tagName&&t.tagName.toLowerCase()===e):!(t instanceof Object||t instanceof Array||t instanceof String||t instanceof Number)&&t.tagName&&t.tagName.toLowerCase()===e:!1},clone:function(e){if(null===e||"object"!=typeof e||e instanceof Date||"nodeName"in e||this.isBinary(e)||"function"==typeof FormData&&e instanceof FormData)return e;if(Array.isArray(e))return e.map(this.clone.bind(this));var t={};for(var n in e)t[n]=this.clone(e[n]);return t},xhr:function(e,t,n,o,i){function r(e){for(var t,n={},o=/([a-z\-]+):\s?(.*);?/gi;t=o.exec(e);)n[t[1]]=t[2];return n}var a=new XMLHttpRequest,s=this.error,l=!1;"blob"===e&&(l=e,e="GET"),e=e.toUpperCase(),a.onload=function(t){var n=a.response;try{n=JSON.parse(a.responseText)}catch(o){401===a.status&&(n=s("access_denied",a.statusText))}var l=r(a.getAllResponseHeaders());l.statusCode=a.status,i(n||("GET"===e?s("empty_response","Could not get resource"):{}),l)},a.onerror=function(e){var t=a.responseText;try{t=JSON.parse(a.responseText)}catch(n){}i(t||s("access_denied","Could not get resource"))};var u;if("GET"===e||"DELETE"===e)o=null;else if(o&&"string"!=typeof o&&!(o instanceof FormData)&&!(o instanceof File)&&!(o instanceof Blob)){var c=new FormData;for(u in o)o.hasOwnProperty(u)&&(o[u]instanceof HTMLInputElement?"files"in o[u]&&o[u].files.length>0&&c.append(u,o[u].files[0]):o[u]instanceof Blob?c.append(u,o[u],o.name):c.append(u,o[u]));o=c}if(a.open(e,t,!0),l&&("responseType"in a?a.responseType=l:a.overrideMimeType("text/plain; charset=x-user-defined")),n)for(u in n)a.setRequestHeader(u,n[u]);return a.send(o),a},jsonp:function(e,t,n,o){var i,r=this,a=r.error,s=0,l=document.getElementsByTagName("head")[0],u=a("server_error","server_error"),c=function(){s++||window.setTimeout(function(){t(u),l.removeChild(d)},0)};n=r.globalEvent(function(e){return u=e,!0},n),e=e.replace(new RegExp("=\\?(&|$)"),"="+n+"$1");var d=r.append("script",{id:n,name:n,src:e,async:!0,onload:c,onerror:c,onreadystatechange:function(){/loaded|complete/i.test(this.readyState)&&c()}});window.navigator.userAgent.toLowerCase().indexOf("opera")>-1&&(i=r.append("script",{text:"document.getElementById('"+n+"').onerror();"}),d.async=!1),o&&window.setTimeout(function(){u=a("timeout","timeout"),c()},o),l.appendChild(d),i&&l.appendChild(i)},post:function(e,t,n,o,i,r){var a,s=this,l=s.error,u=document,c=null,d=[],f=0,p=null,m=0,h=function(e){m++||o(e)};s.globalEvent(h,i);var g;try{g=u.createElement('<iframe name="'+i+'">')}catch(v){g=u.createElement("iframe")}if(g.name=i,g.id=i,g.style.display="none",n&&n.callbackonload&&(g.onload=function(){h({response:"posted",message:"Content was posted"})}),r&&setTimeout(function(){h(l("timeout","The post operation timed out"))},r),u.body.appendChild(g),s.domInstance("form",t)){for(c=t.form,f=0;f<c.elements.length;f++)c.elements[f]!==t&&c.elements[f].setAttribute("disabled",!0);t=c}if(s.domInstance("form",t))for(c=t,f=0;f<c.elements.length;f++)c.elements[f].disabled||"file"!==c.elements[f].type||(c.encoding=c.enctype="multipart/form-data",c.elements[f].setAttribute("name","file"));else{for(p in t)t.hasOwnProperty(p)&&s.domInstance("input",t[p])&&"file"===t[p].type&&(c=t[p].form,c.encoding=c.enctype="multipart/form-data");c||(c=u.createElement("form"),u.body.appendChild(c),a=c);var y;for(p in t)if(t.hasOwnProperty(p)){var w=s.domInstance("input",t[p])||s.domInstance("textArea",t[p])||s.domInstance("select",t[p]);if(w&&t[p].form===c)w&&t[p].name!==p&&(t[p].setAttribute("name",p),t[p].name=p);else{var _=c.elements[p];if(y)for(_ instanceof NodeList||(_=[_]),f=0;f<_.length;f++)_[f].parentNode.removeChild(_[f]);y=u.createElement("input"),y.setAttribute("type","hidden"),y.setAttribute("name",p),w?y.value=t[p].value:s.domInstance(null,t[p])?y.value=t[p].innerHTML||t[p].innerText:y.value=t[p],c.appendChild(y)}}for(f=0;f<c.elements.length;f++)y=c.elements[f],y.name in t||y.getAttribute("disabled")===!0||(y.setAttribute("disabled",!0),d.push(y))}c.setAttribute("method","POST"),c.setAttribute("target",i),c.target=i,c.setAttribute("action",e),setTimeout(function(){c.submit(),setTimeout(function(){try{a&&a.parentNode.removeChild(a)}catch(e){try{console.error("HelloJS: could not remove iframe")}catch(t){}}for(var n=0;n<d.length;n++)d[n]&&(d[n].setAttribute("disabled",!1),d[n].disabled=!1)},0)},100)},hasBinary:function(e){for(var t in e)if(e.hasOwnProperty(t)&&this.isBinary(e[t]))return!0;return!1},isBinary:function(e){return e instanceof Object&&(this.domInstance("input",e)&&"file"===e.type||"FileList"in window&&e instanceof window.FileList||"File"in window&&e instanceof window.File||"Blob"in window&&e instanceof window.Blob)},toBlob:function(e){var t=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i,n=e.match(t);if(!n)return e;for(var o=atob(e.replace(t,"")),i=[],r=0;r<o.length;r++)i.push(o.charCodeAt(r));return new Blob([new Uint8Array(i)],{type:n[1]})}}),function(e){var t=e.api,n=e.utils;n.extend(n,{dataToJSON:function(e){var t=this,n=window,o=e.data;if(t.domInstance("form",o)?o=t.nodeListToJSON(o.elements):"NodeList"in n&&o instanceof NodeList?o=t.nodeListToJSON(o):t.domInstance("input",o)&&(o=t.nodeListToJSON([o])),("File"in n&&o instanceof n.File||"Blob"in n&&o instanceof n.Blob||"FileList"in n&&o instanceof n.FileList)&&(o={file:o}),!("FormData"in n&&o instanceof n.FormData))for(var i in o)if(o.hasOwnProperty(i))if("FileList"in n&&o[i]instanceof n.FileList)1===o[i].length&&(o[i]=o[i][0]);else{if(t.domInstance("input",o[i])&&"file"===o[i].type)continue;t.domInstance("input",o[i])||t.domInstance("select",o[i])||t.domInstance("textArea",o[i])?o[i]=o[i].value:t.domInstance(null,o[i])&&(o[i]=o[i].innerHTML||o[i].innerText)}return e.data=o,o},nodeListToJSON:function(e){for(var t={},n=0;n<e.length;n++){var o=e[n];!o.disabled&&o.name&&("file"===o.type?t[o.name]=o:t[o.name]=o.value||o.innerHTML)}return t}}),e.api=function(){var e=n.args({path:"s!",method:"s",data:"o",timeout:"i",callback:"f"},arguments);return e.data&&n.dataToJSON(e),t.call(this,e)}}(hello),hello.utils.responseHandler(window,window.opener||window.parent),"object"==typeof chrome&&"object"==typeof chrome.identity&&chrome.identity.launchWebAuthFlow&&!function(){function e(t,n){var o={closed:!1};return chrome.identity.launchWebAuthFlow({url:t,interactive:n},function(t){if(void 0===t)return void(o.closed=!0);var n=hello.utils.url(t),i={location:{assign:function(t){e(t,!1)},search:n.search,hash:n.hash,href:n.href},close:function(){}};hello.utils.responseHandler(i,window)}),o}hello.utils.popup=function(t){return e(t,!0)},hello.utils.iframe=function(t){e(t,!1)},hello.utils.request_cors=function(e){return e(),!0};var t={};chrome.storage.local.get("hello",function(e){t=e.hello||{}}),hello.utils.store=function(e,n){return 0===arguments.length?t:1===arguments.length?t[e]||null:n?(t[e]=n,chrome.storage.local.set({hello:t}),n):null===n?(delete t[e],chrome.storage.local.set({hello:t}),null):void 0}}(),function(){if(/^file:\/{3}[^\/]/.test(window.location.href)&&window.cordova){hello.utils.iframe=function(e,t){hello.utils.popup(e,t,{hidden:"yes"})};var e=hello.utils.popup;hello.utils.popup=function(t,n,o){var i=e.call(this,t,n,o);try{if(i&&i.addEventListener){var r=hello.utils.url(n),a=r.origin||r.protocol+"//"+r.hostname;i.addEventListener("loadstart",function(e){var t=e.url;if(0===t.indexOf(a)){var n=hello.utils.url(t),o={location:{assign:function(e){i.executeScript({code:'window.location.href = "'+e+';"'})},search:n.search,hash:n.hash,href:n.href},close:function(){if(i.close){i.close();try{i.closed=!0}catch(e){}}}};hello.utils.responseHandler(o,window)}})}}catch(s){}return i}}}(),function(e){function t(e){e&&"error"in e&&(e.error={code:"server_error",message:e.error.message||e.error})}function n(t,n,o){if(!("object"!=typeof t||"undefined"!=typeof Blob&&t instanceof Blob||"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer||"error"in t)){var i=("app_folder"!==t.root?t.root:"")+t.path.replace(/\&/g,"%26");i=i.replace(/^\//,""),t.thumb_exists&&(t.thumbnail=o.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/thumbnails/auto/"+i+"?format=jpeg&size=m")+"&access_token="+o.options.access_token),t.type=t.is_dir?"folder":t.mime_type,t.name=t.path.replace(/.*\//g,""),t.is_dir?t.files=i.replace(/^\//,""):(t.downloadLink=e.settings.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/files/auto/"+i)+"&access_token="+o.options.access_token,t.file="https://api-content.dropbox.com/1/files/auto/"+i),t.id||(t.id=t.path.replace(/^\//,""))}}function o(e){return function(t,n){delete t.query.limit,n(e)}}var i={version:"1.0",auth:"https://www.dropbox.com/1/oauth/authorize",request:"https://api.dropbox.com/1/oauth/request_token",token:"https://api.dropbox.com/1/oauth/access_token"},r={version:2,auth:"https://www.dropbox.com/1/oauth2/authorize",grant:"https://api.dropbox.com/1/oauth2/token"};e.init({dropbox:{name:"Dropbox",oauth:r,login:function(t){t.qs.scope="";var n=decodeURIComponent(t.qs.redirect_uri);0===n.indexOf("http:")&&0!==n.indexOf("http://localhost/")?e.services.dropbox.oauth=i:e.services.dropbox.oauth=r,t.options.popup.width=1e3,t.options.popup.height=1e3},base:"https://api.dropbox.com/1/",root:"sandbox",get:{me:"account/info","me/files":o("metadata/auto/@{parent|}"),"me/folder":o("metadata/auto/@{id}"),"me/folders":o("metadata/auto/"),"default":function(e,t){e.path.match("https://api-content.dropbox.com/1/files/")&&(e.method="blob"),t(e.path)}},post:{"me/files":function(t,n){var o=t.data.parent,i=t.data.name;t.data={file:t.data.file},"string"==typeof t.data.file&&(t.data.file=e.utils.toBlob(t.data.file)),n("https://api-content.dropbox.com/1/files_put/auto/"+o+"/"+i)},"me/folders":function(t,n){var o=t.data.name;t.data={},n("fileops/create_folder?root=@{root|sandbox}&"+e.utils.param({path:o}))}},del:{"me/files":"fileops/delete?root=@{root|sandbox}&path=@{id}","me/folder":"fileops/delete?root=@{root|sandbox}&path=@{id}"},wrap:{me:function(e){if(t(e),!e.uid)return e;e.name=e.display_name;var n=e.name.split(" ");return e.first_name=n.shift(),e.last_name=n.join(" "),e.id=e.uid,delete e.uid,delete e.display_name,e},"default":function(e,o,i){return t(e),e.is_dir&&e.contents&&(e.data=e.contents,delete e.contents,e.data.forEach(function(t){t.root=e.root,n(t,o,i)})),n(e,o,i),e.is_deleted&&(e.success=!0),e}},xhr:function(e){if(e.data&&e.data.file){var t=e.data.file;t&&(t.files?e.data=t.files[0]:e.data=t)}return"delete"===e.method&&(e.method="post"),!0},form:function(e,t){delete t.state,delete t.redirect_uri}}})}(hello),function(e){function t(e){return e.id&&(e.thumbnail=e.picture="https://graph.facebook.com/"+e.id+"/picture"),e}function n(e){return"data"in e&&e.data.forEach(t),e}function o(e,t,n){if("boolean"==typeof e&&(e={success:e}),e&&"data"in e){var o=n.query.access_token;if(!(e.data instanceof Array)){var r=e.data;delete e.data,e.data=[r]}e.data.forEach(function(e){e.picture&&(e.thumbnail=e.picture),e.pictures=(e.images||[]).sort(function(e,t){return e.width-t.width}),e.cover_photo&&e.cover_photo.id&&(e.thumbnail=i+e.cover_photo.id+"/picture?access_token="+o),"album"===e.type&&(e.files=e.photos=i+e.id+"/photos"),e.can_upload&&(e.upload_location=i+e.id+"/photos")})}return e}e.init({facebook:{name:"Facebook",oauth:{version:2,auth:"https://www.facebook.com/dialog/oauth/",grant:"https://graph.facebook.com/oauth/access_token"},scope:{basic:"public_profile",email:"email",
share:"user_posts",birthday:"user_birthday",events:"user_events",photos:"user_photos",videos:"user_videos",friends:"user_friends",files:"user_photos,user_videos",publish_files:"user_photos,user_videos,publish_actions",publish:"publish_actions",offline_access:""},refresh:!1,login:function(e){e.options.force&&(e.qs.auth_type="reauthenticate"),e.qs.display=e.options.display||"popup"},logout:function(t,n){var o=e.utils.globalEvent(t),i=encodeURIComponent(e.settings.redirect_uri+"?"+e.utils.param({callback:o,result:JSON.stringify({force:!0}),state:"{}"})),r=(n.authResponse||{}).access_token;return e.utils.iframe("https://www.facebook.com/logout.php?next="+i+"&access_token="+r),r?void 0:!1},base:"https://graph.facebook.com/v2.7/",get:{me:"me?fields=email,first_name,last_name,name,timezone,verified","me/friends":"me/friends","me/following":"me/friends","me/followers":"me/friends","me/share":"me/feed","me/like":"me/likes","me/files":"me/albums","me/albums":"me/albums?fields=cover_photo,name","me/album":"@{id}/photos?fields=picture","me/photos":"me/photos","me/photo":"@{id}","friend/albums":"@{id}/albums","friend/photos":"@{id}/photos"},post:{"me/share":"me/feed","me/photo":"@{id}"},wrap:{me:t,"me/friends":n,"me/following":n,"me/followers":n,"me/albums":o,"me/photos":o,"me/files":o,"default":o},xhr:function(t,n){return"get"!==t.method&&"post"!==t.method||(n.suppress_response_codes=!0),"post"===t.method&&t.data&&"string"==typeof t.data.file&&(t.data.file=e.utils.toBlob(t.data.file)),!0},jsonp:function(t,n){var o=t.method;"get"===o||e.utils.hasBinary(t.data)?"delete"===t.method&&(n.method="delete",t.method="post"):(t.data.method=o,t.method="get")},form:function(e){return{callbackonload:!0}}}});var i="https://graph.facebook.com/"}(hello),function(e){function t(t,n,o){var i=(o?"":"flickr:")+"?method="+t+"&api_key="+e.services.flickr.id+"&format=json";for(var r in n)n.hasOwnProperty(r)&&(i+="&"+r+"="+n[r]);return i}function n(t){var n=e.getAuthResponse("flickr");t(n&&n.user_nsid?n.user_nsid:null)}function o(e,o){return o||(o={}),function(i,r){n(function(n){o.user_id=n,r(t(e,o,!0))})}}function i(e,t){var n="https://www.flickr.com/images/buddyicon.gif";return e.nsid&&e.iconserver&&e.iconfarm&&(n="https://farm"+e.iconfarm+".staticflickr.com/"+e.iconserver+"/buddyicons/"+e.nsid+(t?"_"+t:"")+".jpg"),n}function r(e,t,n,o,i){return i=i?"_"+i:"","https://farm"+t+".staticflickr.com/"+n+"/"+e+"_"+o+i+".jpg"}function a(e){e&&e.stat&&"ok"!=e.stat.toLowerCase()&&(e.error={code:"invalid_request",message:e.message})}function s(e){if(e.photoset||e.photos){var t="photoset"in e?"photoset":"photos";e=u(e,t),d(e),e.data=e.photo,delete e.photo;for(var n=0;n<e.data.length;n++){var o=e.data[n];o.name=o.title,o.picture=r(o.id,o.farm,o.server,o.secret,""),o.pictures=l(o.id,o.farm,o.server,o.secret),o.source=r(o.id,o.farm,o.server,o.secret,"b"),o.thumbnail=r(o.id,o.farm,o.server,o.secret,"m")}}return e}function l(e,t,n,o){var i=2048,a=[{id:"t",max:100},{id:"m",max:240},{id:"n",max:320},{id:"",max:500},{id:"z",max:640},{id:"c",max:800},{id:"b",max:1024},{id:"h",max:1600},{id:"k",max:2048},{id:"o",max:i}];return a.map(function(i){return{source:r(e,t,n,o,i.id),width:i.max,height:i.max}})}function u(e,t){return t in e?e=e[t]:"error"in e||(e.error={code:"invalid_request",message:e.message||"Failed to get data from Flickr"}),e}function c(e){if(a(e),e.contacts){e=u(e,"contacts"),d(e),e.data=e.contact,delete e.contact;for(var t=0;t<e.data.length;t++){var n=e.data[t];n.id=n.nsid,n.name=n.realname||n.username,n.thumbnail=i(n,"m")}}return e}function d(e){e.page&&e.pages&&e.page!==e.pages&&(e.paging={next:"?page="+ ++e.page})}e.init({flickr:{name:"Flickr",oauth:{version:"1.0a",auth:"https://www.flickr.com/services/oauth/authorize?perms=read",request:"https://www.flickr.com/services/oauth/request_token",token:"https://www.flickr.com/services/oauth/access_token"},base:"https://api.flickr.com/services/rest",get:{me:o("flickr.people.getInfo"),"me/friends":o("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/following":o("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/followers":o("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/albums":o("flickr.photosets.getList",{per_page:"@{limit|50}"}),"me/album":o("flickr.photosets.getPhotos",{photoset_id:"@{id}"}),"me/photos":o("flickr.people.getPhotos",{per_page:"@{limit|50}"})},wrap:{me:function(e){if(a(e),e=u(e,"person"),e.id){if(e.realname){e.name=e.realname._content;var t=e.name.split(" ");e.first_name=t.shift(),e.last_name=t.join(" ")}e.thumbnail=i(e,"l"),e.picture=i(e,"l")}return e},"me/friends":c,"me/followers":c,"me/following":c,"me/albums":function(e){return a(e),e=u(e,"photosets"),d(e),e.photoset&&(e.data=e.photoset,e.data.forEach(function(e){e.name=e.title._content,e.photos="https://api.flickr.com/services/rest"+t("flickr.photosets.getPhotos",{photoset_id:e.id},!0)}),delete e.photoset),e},"me/photos":function(e){return a(e),s(e)},"default":function(e){return a(e),s(e)}},xhr:!1,jsonp:function(e,t){"get"==e.method&&(delete t.callback,t.jsoncallback=e.callbackID)}}})}(hello),function(e){function t(e){!e.meta||400!==e.meta.code&&401!==e.meta.code||(e.error={code:"access_denied",message:e.meta.errorDetail})}function n(e){e&&e.id&&(e.thumbnail=e.photo.prefix+"100x100"+e.photo.suffix,e.name=e.firstName+" "+e.lastName,e.first_name=e.firstName,e.last_name=e.lastName,e.contact&&e.contact.email&&(e.email=e.contact.email))}function o(e,t){var n=t.access_token;return delete t.access_token,t.oauth_token=n,t.v=20121125,!0}e.init({foursquare:{name:"Foursquare",oauth:{version:2,auth:"https://foursquare.com/oauth2/authenticate",grant:"https://foursquare.com/oauth2/access_token"},refresh:!0,base:"https://api.foursquare.com/v2/",get:{me:"users/self","me/friends":"users/self/friends","me/followers":"users/self/friends","me/following":"users/self/friends"},wrap:{me:function(e){return t(e),e&&e.response&&(e=e.response.user,n(e)),e},"default":function(e){return t(e),e&&"response"in e&&"friends"in e.response&&"items"in e.response.friends&&(e.data=e.response.friends.items,e.data.forEach(n),delete e.response),e}},xhr:o,jsonp:o}})}(hello),function(e){function t(e,t){var n=t?t.statusCode:e&&"meta"in e&&"status"in e.meta&&e.meta.status;401!==n&&403!==n||(e.error={code:"access_denied",message:e.message||(e.data?e.data.message:"Could not get response")},delete e.message)}function n(e){e.id&&(e.thumbnail=e.picture=e.avatar_url,e.name=e.login)}function o(e,t,n){if(e.data&&e.data.length&&t&&t.Link){var o=t.Link.match(/<(.*?)>;\s*rel=\"next\"/);o&&(e.paging={next:o[1]})}}e.init({github:{name:"GitHub",oauth:{version:2,auth:"https://github.com/login/oauth/authorize",grant:"https://github.com/login/oauth/access_token",response_type:"code"},scope:{email:"user:email"},base:"https://api.github.com/",get:{me:"user","me/friends":"user/following?per_page=@{limit|100}","me/following":"user/following?per_page=@{limit|100}","me/followers":"user/followers?per_page=@{limit|100}","me/like":"user/starred?per_page=@{limit|100}"},wrap:{me:function(e,o){return t(e,o),n(e),e},"default":function(e,i,r){return t(e,i),Array.isArray(e)&&(e={data:e}),e.data&&(o(e,i,r),e.data.forEach(n)),e}},xhr:function(e){return"get"!==e.method&&e.data&&(e.headers=e.headers||{},e.headers["Content-Type"]="application/json","object"==typeof e.data&&(e.data=JSON.stringify(e.data))),!0}}})}(hello),function(e){function t(e){return parseInt(e,10)}function n(e){return c(e),e.data=e.items,delete e.items,e}function o(e){return e.error?void 0:(e.name||(e.name=e.title||e.message),e.picture||(e.picture=e.thumbnailLink),e.thumbnail||(e.thumbnail=e.thumbnailLink),"application/vnd.google-apps.folder"===e.mimeType&&(e.type="folder",e.files="https://www.googleapis.com/drive/v2/files?q=%22"+e.id+"%22+in+parents"),e)}function i(e){return{source:e.url,width:e.width,height:e.height}}function r(e){e.data=e.feed.entry.map(u),delete e.feed}function a(e){if(c(e),"feed"in e&&"entry"in e.feed)e.data=e.feed.entry.map(u),delete e.feed;else{if("entry"in e)return u(e.entry);"items"in e?(e.data=e.items.map(o),delete e.items):o(e)}return e}function s(e){e.name=e.displayName||e.name,e.picture=e.picture||(e.image?e.image.url:null),e.thumbnail=e.picture}function l(e,t,n){c(e);if("feed"in e&&"entry"in e.feed){for(var o=n.query.access_token,i=0;i<e.feed.entry.length;i++){var r=e.feed.entry[i];if(r.id=r.id.$t,r.name=r.title.$t,delete r.title,r.gd$email&&(r.email=r.gd$email&&r.gd$email.length>0?r.gd$email[0].address:null,r.emails=r.gd$email,delete r.gd$email),r.updated&&(r.updated=r.updated.$t),r.link){var a=r.link.length>0?r.link[0].href:null;a&&r.link[0].gd$etag&&(a+=(a.indexOf("?")>-1?"&":"?")+"access_token="+o,r.picture=a,r.thumbnail=a),delete r.link}r.category&&delete r.category}e.data=e.feed.entry,delete e.feed}return e}function u(e){var t,n=e.media$group,o=n.media$content.length?n.media$content[0]:{},r=n.media$content||[],a=n.media$thumbnail||[],s=r.concat(a).map(i).sort(function(e,t){return e.width-t.width}),l=0,u={id:e.id.$t,name:e.title.$t,description:e.summary.$t,updated_time:e.updated.$t,created_time:e.published.$t,picture:o?o.url:null,pictures:s,images:[],thumbnail:o?o.url:null,width:o.width,height:o.height};if("link"in e)for(l=0;l<e.link.length;l++){var c=e.link[l];if(c.rel.match(/\#feed$/)){u.upload_location=u.files=u.photos=c.href;break}}if("category"in e&&e.category.length)for(t=e.category,l=0;l<t.length;l++)t[l].scheme&&t[l].scheme.match(/\#kind$/)&&(u.type=t[l].term.replace(/^.*?\#/,""));return"media$thumbnail"in n&&n.media$thumbnail.length&&(t=n.media$thumbnail,u.thumbnail=t[0].url,u.images=t.map(i)),t=n.media$content,t&&t.length&&u.images.push(i(t[0])),u}function c(e){if("feed"in e&&e.feed.openSearch$itemsPerPage){var n=t(e.feed.openSearch$itemsPerPage.$t),o=t(e.feed.openSearch$startIndex.$t),i=t(e.feed.openSearch$totalResults.$t);i>o+n&&(e.paging={next:"?start="+(o+n)})}else"nextPageToken"in e&&(e.paging={next:"?pageToken="+e.nextPageToken})}function d(){function e(e){var n=new FileReader;n.onload=function(n){t(btoa(n.target.result),e.type+r+"Content-Transfer-Encoding: base64")},n.readAsBinaryString(e)}function t(e,t){n.push(r+"Content-Type: "+t+r+r+e),i--,s()}var n=[],o=(1e10*Math.random()).toString(32),i=0,r="\r\n",a=r+"--"+o,s=function(){},l=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i;this.append=function(n,o){"string"!=typeof n&&"length"in Object(n)||(n=[n]);for(var a=0;a<n.length;a++){i++;var s=n[a];if("undefined"!=typeof File&&s instanceof File||"undefined"!=typeof Blob&&s instanceof Blob)e(s);else if("string"==typeof s&&s.match(l)){var u=s.match(l);t(s.replace(l,""),u[1]+r+"Content-Transfer-Encoding: base64")}else t(s,o)}},this.onready=function(e){(s=function(){0===i&&(n.unshift(""),n.push("--"),e(n.join(a),o),n=[])})()}}function f(e,t){var n={};e.data&&"undefined"!=typeof HTMLInputElement&&e.data instanceof HTMLInputElement&&(e.data={file:e.data}),!e.data.name&&Object(Object(e.data.file).files).length&&"post"===e.method&&(e.data.name=e.data.file.files[0].name),"post"===e.method?e.data={title:e.data.name,parents:[{id:e.data.parent||"root"}],file:e.data.file}:(n=e.data,e.data={},n.parent&&(e.data.parents=[{id:e.data.parent||"root"}]),n.file&&(e.data.file=n.file),n.name&&(e.data.title=n.name));var o;if("file"in e.data&&(o=e.data.file,delete e.data.file,"object"==typeof o&&"files"in o&&(o=o.files),!o||!o.length))return void t({error:{code:"request_invalid",message:"There were no files attached with this request to upload"}});var i=new d;i.append(JSON.stringify(e.data),"application/json"),o&&i.append(o),i.onready(function(o,i){e.headers["content-type"]='multipart/related; boundary="'+i+'"',e.data=o,t("upload/drive/v2/files"+(n.id?"/"+n.id:"")+"?uploadType=multipart")})}function p(e){if("object"==typeof e.data)try{e.data=JSON.stringify(e.data),e.headers["content-type"]="application/json"}catch(t){}}var m="https://www.google.com/m8/feeds/contacts/default/full?v=3.0&alt=json&max-results=@{limit|1000}&start-index=@{start|1}";e.init({google:{name:"Google Plus",oauth:{version:2,auth:"https://accounts.google.com/o/oauth2/auth",grant:"https://accounts.google.com/o/oauth2/token"},scope:{basic:"https://www.googleapis.com/auth/plus.me profile",email:"email",birthday:"",events:"",photos:"https://picasaweb.google.com/data/",videos:"http://gdata.youtube.com",friends:"https://www.google.com/m8/feeds, https://www.googleapis.com/auth/plus.login",files:"https://www.googleapis.com/auth/drive.readonly",publish:"",publish_files:"https://www.googleapis.com/auth/drive",share:"",create_event:"",offline_access:""},scope_delim:" ",login:function(e){"code"===e.qs.response_type&&(e.qs.access_type="offline"),e.options.force&&(e.qs.approval_prompt="force")},base:"https://www.googleapis.com/",get:{me:"plus/v1/people/me","me/friends":"plus/v1/people/me/people/visible?maxResults=@{limit|100}","me/following":m,"me/followers":m,"me/contacts":m,"me/share":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/feed":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/albums":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&max-results=@{limit|100}&start-index=@{start|1}","me/album":function(e,t){var n=e.query.id;delete e.query.id,t(n.replace("/entry/","/feed/"))},"me/photos":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&kind=photo&max-results=@{limit|100}&start-index=@{start|1}","me/file":"drive/v2/files/@{id}","me/files":"drive/v2/files?q=%22@{parent|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}","me/folders":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+mimeType+=+%22application/vnd.google-apps.folder%22+and+trashed=false&maxResults=@{limit|100}","me/folder":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}"},post:{"me/files":f,"me/folders":function(e,t){e.data={title:e.data.name,parents:[{id:e.data.parent||"root"}],mimeType:"application/vnd.google-apps.folder"},t("drive/v2/files")}},put:{"me/files":f},del:{"me/files":"drive/v2/files/@{id}","me/folder":"drive/v2/files/@{id}"},patch:{"me/file":"drive/v2/files/@{id}"},wrap:{me:function(e){return e.id&&(e.last_name=e.family_name||(e.name?e.name.familyName:null),e.first_name=e.given_name||(e.name?e.name.givenName:null),e.emails&&e.emails.length&&(e.email=e.emails[0].value),s(e)),e},"me/friends":function(e){return e.items&&(c(e),e.data=e.items,e.data.forEach(s),delete e.items),e},"me/contacts":l,"me/followers":l,"me/following":l,"me/share":n,"me/feed":n,"me/albums":a,"me/photos":r,"default":a},xhr:function(t){return"post"===t.method||"put"===t.method?p(t):"patch"===t.method&&(e.utils.extend(t.query,t.data),t.data=null),!0},form:!1}})}(hello),function(e){function t(e){return{source:e.url,width:e.width,height:e.height}}function n(e){return"string"==typeof e?{error:{code:"invalid_request",message:e}}:(e&&"meta"in e&&"error_type"in e.meta&&(e.error={code:e.meta.error_type,message:e.meta.error_message}),e)}function o(e){return r(e),e&&"data"in e&&e.data.forEach(i),e}function i(e){e.id&&(e.thumbnail=e.profile_picture,e.name=e.full_name||e.username)}function r(e){"pagination"in e&&(e.paging={next:e.pagination.next_url},delete e.pagination)}e.init({instagram:{name:"Instagram",oauth:{version:2,auth:"https://instagram.com/oauth/authorize/",grant:"https://api.instagram.com/oauth/access_token"},refresh:!0,scope:{basic:"basic",photos:"",friends:"relationships",publish:"likes comments",email:"",share:"",publish_files:"",files:"",videos:"",offline_access:""},scope_delim:" ",base:"https://api.instagram.com/v1/",get:{me:"users/self","me/feed":"users/self/feed?count=@{limit|100}","me/photos":"users/self/media/recent?min_id=0&count=@{limit|100}","me/friends":"users/self/follows?count=@{limit|100}","me/following":"users/self/follows?count=@{limit|100}","me/followers":"users/self/followed-by?count=@{limit|100}","friend/photos":"users/@{id}/media/recent?min_id=0&count=@{limit|100}"},post:{"me/like":function(e,t){var n=e.data.id;e.data={},t("media/"+n+"/likes")}},del:{"me/like":"media/@{id}/likes"},wrap:{me:function(e){return n(e),"data"in e&&(e.id=e.data.id,e.thumbnail=e.data.profile_picture,e.name=e.data.full_name||e.data.username),e},"me/friends":o,"me/following":o,"me/followers":o,"me/photos":function(e){return n(e),r(e),"data"in e&&(e.data=e.data.filter(function(e){return"image"===e.type}),e.data.forEach(function(e){e.name=e.caption?e.caption.text:null,e.thumbnail=e.images.thumbnail.url,e.picture=e.images.standard_resolution.url,e.pictures=Object.keys(e.images).map(function(n){var o=e.images[n];return t(o)}).sort(function(e,t){return e.width-t.width})})),e},"default":function(e){return e=n(e),r(e),e}},xhr:function(e,t){var n=e.method,o="get"!==n;return o&&("post"!==n&&"put"!==n||!e.query.access_token||(e.data.access_token=e.query.access_token,delete e.query.access_token),e.proxy=o),o},form:!1}})}(hello),function(e){function t(e,t){var n,i;return e&&"Message"in e&&(i=e.Message,delete e.Message,"ErrorCode"in e?(n=e.ErrorCode,delete e.ErrorCode):n=o(t),e.error={code:n,message:i,details:e}),e}function n(e,t){var n=t.access_token;return delete t.access_token,e.headers.Authorization="Bearer "+n,"get"!==e.method&&e.data&&(e.headers["Content-Type"]="application/json","object"==typeof e.data&&(e.data=JSON.stringify(e.data))),"put"===e.method&&(e.method="patch"),!0}function o(e){switch(e.statusCode){case 400:return"invalid_request";case 403:return"stale_token";case 401:return"invalid_token";case 500:return"server_error";default:return"server_error"}}e.init({joinme:{name:"join.me",oauth:{version:2,auth:"https://secure.join.me/api/public/v1/auth/oauth2",grant:"https://secure.join.me/api/public/v1/auth/oauth2"},refresh:!1,scope:{basic:"user_info",user:"user_info",scheduler:"scheduler",start:"start_meeting",email:"",friends:"",share:"",publish:"",photos:"",publish_files:"",files:"",videos:"",offline_access:""},scope_delim:" ",login:function(e){e.options.popup.width=400,e.options.popup.height=700},base:"https://api.join.me/v1/",get:{me:"user",meetings:"meetings","meetings/info":"meetings/@{id}"},post:{"meetings/start/adhoc":function(e,t){t("meetings/start")},"meetings/start/scheduled":function(e,t){var n=e.data.meetingId;e.data={},t("meetings/"+n+"/start")},"meetings/schedule":function(e,t){t("meetings")}},patch:{"meetings/update":function(e,t){t("meetings/"+e.data.meetingId)}},del:{"meetings/delete":"meetings/@{id}"},wrap:{me:function(e,n){return t(e,n),e.email?(e.name=e.fullName,e.first_name=e.name.split(" ")[0],e.last_name=e.name.split(" ")[1],e.id=e.email,e):e},"default":function(e,n){return t(e,n),e}},xhr:n}})}(hello),function(e){function t(e){e&&"errorCode"in e&&(e.error={code:e.status,message:e.message})}function n(e){return e.error?void 0:(e.first_name=e.firstName,e.last_name=e.lastName,e.name=e.formattedName||e.first_name+" "+e.last_name,e.thumbnail=e.pictureUrl,e.email=e.emailAddress,e)}function o(e){return t(e),i(e),e.values&&(e.data=e.values.map(n),delete e.values),e}function i(e){"_count"in e&&"_start"in e&&e._count+e._start<e._total&&(e.paging={next:"?start="+(e._start+e._count)+"&count="+e._count})}function r(e,t){"{}"===JSON.stringify(e)&&200===t.statusCode&&(e.success=!0)}function a(e){e.access_token&&(e.oauth2_access_token=e.access_token,delete e.access_token)}function s(e,t){e.headers["x-li-format"]="json";var n=e.data.id;e.data=("delete"!==e.method).toString(),e.method="put",t("people/~/network/updates/key="+n+"/is-liked")}e.init({linkedin:{oauth:{version:2,response_type:"code",auth:"https://www.linkedin.com/uas/oauth2/authorization",grant:"https://www.linkedin.com/uas/oauth2/accessToken"},refresh:!0,scope:{basic:"r_basicprofile",email:"r_emailaddress",files:"",friends:"",photos:"",publish:"w_share",publish_files:"w_share",share:"",videos:"",offline_access:""},scope_delim:" ",base:"https://api.linkedin.com/v1/",get:{me:"people/~:(picture-url,first-name,last-name,id,formatted-name,email-address)","me/share":"people/~/network/updates?count=@{limit|250}"},post:{"me/share":function(e,t){var n={visibility:{code:"anyone"}};e.data.id?n.attribution={share:{id:e.data.id}}:(n.comment=e.data.message,e.data.picture&&e.data.link&&(n.content={"submitted-url":e.data.link,"submitted-image-url":e.data.picture})),e.data=JSON.stringify(n),t("people/~/shares?format=json")},"me/like":s},del:{"me/like":s},wrap:{me:function(e){return t(e),n(e),e},"me/friends":o,"me/following":o,"me/followers":o,"me/share":function(e){return t(e),i(e),e.values&&(e.data=e.values.map(n),e.data.forEach(function(e){e.message=e.headline}),delete e.values),e},"default":function(e,n){t(e),r(e,n),i(e)}},jsonp:function(e,t){a(t),"get"===e.method&&(t.format="jsonp",t["error-callback"]=e.callbackID)},xhr:function(e,t){return"get"!==e.method?(a(t),e.headers["Content-Type"]="application/json",e.headers["x-li-format"]="json",e.proxy=!0,!0):!1}}})}(hello),function(e){function t(e,t){var n=t.access_token;return delete t.access_token,t.oauth_token=n,t["_status_code_map[302]"]=200,!0}function n(e){return e.id&&(e.picture=e.avatar_url,e.thumbnail=e.avatar_url,e.name=e.username||e.full_name),e}function o(e){"next_href"in e&&(e.paging={next:e.next_href})}e.init({soundcloud:{name:"SoundCloud",oauth:{version:2,auth:"https://soundcloud.com/connect",grant:"https://soundcloud.com/oauth2/token"},base:"https://api.soundcloud.com/",get:{me:"me.json","me/friends":"me/followings.json","me/followers":"me/followers.json","me/following":"me/followings.json","default":function(e,t){t(e.path+".json")}},wrap:{me:function(e){return n(e),e},"default":function(e){return Array.isArray(e)&&(e={data:e.map(n)}),o(e),e}},xhr:t,jsonp:t}})}(hello),function(e){function t(e){if(e.id){if(e.name){var t=e.name.split(" ");e.first_name=t.shift(),e.last_name=t.join(" ")}e.thumbnail=e.profile_image_url_https||e.profile_image_url}return e}function n(e){return o(e),i(e),e.users&&(e.data=e.users.map(t),delete e.users),e}function o(e){if(e.errors){var t=e.errors[0];e.error={code:"request_failed",message:t.message}}}function i(e){"next_cursor_str"in e&&(e.paging={next:"?cursor="+e.next_cursor_str})}function r(e){return Array.isArray(e)?{data:e}:e}var a="https://api.twitter.com/";e.init({twitter:{oauth:{version:"1.0a",auth:a+"oauth/authenticate",request:a+"oauth/request_token",token:a+"oauth/access_token"},login:function(e){var t="?force_login=true";this.oauth.auth=this.oauth.auth.replace(t,"")+(e.options.force?t:"")},base:a+"1.1/",get:{me:"account/verify_credentials.json","me/friends":"friends/list.json?count=@{limit|200}","me/following":"friends/list.json?count=@{limit|200}","me/followers":"followers/list.json?count=@{limit|200}","me/share":"statuses/user_timeline.json?count=@{limit|200}","me/like":"favorites/list.json?count=@{limit|200}"},post:{"me/share":function(t,n){var o=t.data;t.data=null;var i=[];o.message&&(i.push(o.message),delete o.message),o.link&&(i.push(o.link),delete o.link),o.picture&&(i.push(o.picture),delete o.picture),i.length&&(o.status=i.join(" ")),o.file?(o["media[]"]=o.file,delete o.file,t.data=o,n("statuses/update_with_media.json")):"id"in o?n("statuses/retweet/"+o.id+".json"):(e.utils.extend(t.query,o),n("statuses/update.json?include_entities=1"))},"me/like":function(e,t){var n=e.data.id;e.data=null,t("favorites/create.json?id="+n)}},del:{"me/like":function(){p.method="post";var e=p.data.id;p.data=null,callback("favorites/destroy.json?id="+e)}},wrap:{me:function(e){return o(e),t(e),e},"me/friends":n,"me/followers":n,"me/following":n,"me/share":function(e){return o(e),i(e),!e.error&&"length"in e?{data:e}:e},"default":function(e){return e=r(e),i(e),e}},xhr:function(e){return"get"!==e.method}}})}(hello),function(e){function t(e,t){return null!==e&&"response"in e&&null!==e.response&&e.response.length&&(e=e.response[0],e.id=e.uid,e.thumbnail=e.picture=e.photo_max,e.name=e.first_name+" "+e.last_name,t.authResponse&&null!==t.authResponse.email&&(e.email=t.authResponse.email)),e}function n(e){if(e.error){var t=e.error;e.error={code:t.error_code,message:t.error_msg}}}e.init({vk:{name:"Vk",oauth:{version:2,auth:"https://oauth.vk.com/authorize",grant:"https://oauth.vk.com/access_token"},scope:{email:"email",friends:"friends",photos:"photos",videos:"video",share:"share",offline_access:"offline"},refresh:!0,login:function(e){e.qs.display=window.navigator&&window.navigator.userAgent&&/ipad|phone|phone|android/.test(window.navigator.userAgent.toLowerCase())?"mobile":"popup"},base:"https://api.vk.com/method/",get:{me:function(e,t){e.query.fields="id,first_name,last_name,photo_max",t("users.get")}},wrap:{me:function(e,o,i){return n(e),t(e,i)}},xhr:!1,jsonp:!0,form:!1}})}(hello),function(e){function t(e){return"data"in e&&e.data.forEach(function(e){e.picture&&(e.thumbnail=e.picture),e.images&&(e.pictures=e.images.map(n).sort(function(e,t){return e.width-t.width}))}),e}function n(e){return{width:e.width,height:e.height,source:e.source}}function o(e){return"data"in e&&e.data.forEach(function(e){e.photos=e.files="https://apis.live.net/v5.0/"+e.id+"/photos"}),e}function i(e,t,n){if(e.id){var o=n.query.access_token;if(e.emails&&(e.email=e.emails.preferred),e.is_friend!==!1){var i=e.user_id||e.id;e.thumbnail=e.picture="https://apis.live.net/v5.0/"+i+"/picture?access_token="+o}}return e}function r(e,t,n){return"data"in e&&e.data.forEach(function(e){i(e,t,n)}),e}e.init({windows:{name:"Windows live",oauth:{version:2,auth:"https://login.live.com/oauth20_authorize.srf",grant:"https://login.live.com/oauth20_token.srf"},refresh:!0,logout:function(){return"http://login.live.com/oauth20_logout.srf?ts="+(new Date).getTime()},scope:{basic:"wl.signin,wl.basic",email:"wl.emails",birthday:"wl.birthday",events:"wl.calendars",photos:"wl.photos",videos:"wl.photos",friends:"wl.contacts_emails",files:"wl.skydrive",publish:"wl.share",publish_files:"wl.skydrive_update",share:"wl.share",create_event:"wl.calendars_update,wl.events_create",offline_access:"wl.offline_access"},base:"https://apis.live.net/v5.0/",get:{me:"me","me/friends":"me/friends","me/following":"me/contacts","me/followers":"me/friends","me/contacts":"me/contacts","me/albums":"me/albums","me/album":"@{id}/files","me/photo":"@{id}","me/files":"@{parent|me/skydrive}/files","me/folders":"@{id|me/skydrive}/files","me/folder":"@{id|me/skydrive}/files"},post:{"me/albums":"me/albums","me/album":"@{id}/files/","me/folders":"@{id|me/skydrive/}","me/files":"@{parent|me/skydrive}/files"},del:{"me/album":"@{id}","me/photo":"@{id}","me/folder":"@{id}","me/files":"@{id}"},wrap:{me:i,"me/friends":r,"me/contacts":r,"me/followers":r,"me/following":r,"me/albums":o,"me/photos":t,"default":t},xhr:function(t){return"get"===t.method||"delete"===t.method||e.utils.hasBinary(t.data)||("string"==typeof t.data.file?t.data.file=e.utils.toBlob(t.data.file):(t.data=JSON.stringify(t.data),t.headers={"Content-Type":"application/json"})),!0},jsonp:function(t){"get"===t.method||e.utils.hasBinary(t.data)||(t.data.method=t.method,t.method="get")}}})}(hello),function(e){function t(e){e&&"meta"in e&&"error_type"in e.meta&&(e.error={code:e.meta.error_type,message:e.meta.error_message})}function n(e){if(t(e),e.query&&e.query.results&&e.query.results.profile){e=e.query.results.profile,e.id=e.guid,e.last_name=e.familyName,e.first_name=e.givenName||e.nickname;var n=[];e.first_name&&n.push(e.first_name),e.last_name&&n.push(e.last_name),e.name=n.join(" "),e.email=e.emails&&e.emails[0]?e.emails[0].handle:null,e.thumbnail=e.image?e.image.imageUrl:null}return e}function o(e,n,o){t(e),r(e,n,o);return e.query&&e.query.results&&e.query.results.contact&&(e.data=e.query.results.contact,delete e.query,Array.isArray(e.data)||(e.data=[e.data]),e.data.forEach(i)),e}function i(e){e.id=null,!e.fields||e.fields instanceof Array||(e.fields=[e.fields]),(e.fields||[]).forEach(function(t){"email"===t.type&&(e.email=t.value),"name"===t.type&&(e.first_name=t.value.givenName,e.last_name=t.value.familyName,e.name=t.value.givenName+" "+t.value.familyName),"yahooid"===t.type&&(e.id=t.value)})}function r(e,t,n){return e.query&&e.query.count&&n.options&&(e.paging={next:"?start="+(e.query.count+(+n.options.start||1))}),e}function a(e){return"https://query.yahooapis.com/v1/yql?q="+(e+" limit @{limit|100} offset @{start|0}").replace(/\s/g,"%20")+"&format=json"}e.init({yahoo:{oauth:{version:"1.0a",auth:"https://api.login.yahoo.com/oauth/v2/request_auth",request:"https://api.login.yahoo.com/oauth/v2/get_request_token",token:"https://api.login.yahoo.com/oauth/v2/get_token"},login:function(e){e.options.popup.width=560;try{delete e.qs.state.scope}catch(t){}},base:"https://social.yahooapis.com/v1/",get:{me:a("select * from social.profile(0) where guid=me"),"me/friends":a("select * from social.contacts(0) where guid=me"),"me/following":a("select * from social.contacts(0) where guid=me")},wrap:{me:n,"me/friends":o,"me/following":o,"default":r}}})}(hello),"function"==typeof define&&define.amd&&define(function(){return hello}),"object"==typeof module&&module.exports&&(module.exports=hello);
// ------------------------------------------------------------------------------
//  Copyright (c) Microsoft Corporation.  All Rights Reserved.  Licensed under the MIT License.  See License in the project root for license information.
// ------------------------------------------------------------------------------

'use strict';

angular.module('ApiExplorer', ['ngAnimate', 'ngMaterial'])
    .config(['$mdThemingProvider', function ($mdThemingProvider) {

    $mdThemingProvider.definePalette('O365PrimaryPalette', {
            '50': 'e9f0fc',
            '100': 'd3e2f8',
            '200': 'bdd3f5',
            '300': '91b6ee', 
            '400': '6599e7',
            '500': '4685e2', //blue
            '600': '387be0',
            '700': '226ddd',
            '800': '1f62c7', 
            '900': '1c57b0',
            'A100': 'FF6A00', 
            'A200': 'FF6A00', 
            'A400': 'FF6A00', 
            'A700': 'FF6A00', 
            'contrastDefaultColor': 'light',   
            'contrastDarkColors': ['50', '100', 
                '200', '300', '400', 'A100'],
            'contrastLightColors': undefined 
    });
    
    $mdThemingProvider.definePalette('O365AccentPalette', {
            '50': 'ffc499',
            '100': 'ffb580',
            '200': 'ffa666',
            '300': 'ff974d', 
            '400': 'ff8833',
            '500': 'FF6A00', //orange
            '600': 'e66000',
            '700': 'cc5500',
            '800': 'b34a00', 
            '900': '994000',
            'A100': 'FF6A00',
            'A200': 'FF6A00', 
            'A400': 'FF6A00', 
            'A700': 'FF6A00', 
    });

    $mdThemingProvider.theme('default').primaryPalette('O365PrimaryPalette');
    $mdThemingProvider.theme('default').accentPalette('O365AccentPalette');
}]);
// ------------------------------------------------------------------------------
//  Copyright (c) Microsoft Corporation.  All Rights Reserved.  Licensed under the MIT License.  See License in the project root for license information.
// ------------------------------------------------------------------------------

'use strict';

angular.module('ApiExplorer')
.config(function($locationProvider) {
    $locationProvider.html5Mode({
        enabled: true,
        requireBase: false,
        rewriteLinks: false
    });
    
})
.factory('ApiExplorerSvc', [function () {
    var apiExplorerService = {};
    return apiExplorerService;
}]);
// ------------------------------------------------------------------------------
//  Copyright (c) Microsoft Corporation.  All Rights Reserved.  Licensed under the MIT License.  See License in the project root for license information.
// ------------------------------------------------------------------------------

'use strict';

angular.module('ApiExplorer')
    .factory('ApiExplorerSvc', ['$http', '$cacheFactory', function ($http, $cacheFactory) {
        return {
            text: 'https://graph.microsoft.com/v1.0/me/',

            selectedVersion: "v1.0",

            selectedOption: "GET",

            cache: $cacheFactory('myCache'),
            
            performAnonymousQuery: function (queryType) {
                return function (query, postString, requestHeaders) {
                    var headersObj = {
                        "Authorization": "Bearer {token:https://graph.microsoft.com/}",
                        "Accept": "application/json"
                    };

                    if (requestHeaders && requestHeaders["Authorization"]){
                        headersObj["Authorization"] = requestHeaders["Authorization"];
                    }

                    if (requestHeaders && requestHeaders["Accept"]){
                        headersObj["Accept"] = requestHeaders["Accept"];
                    }

                    var request = {
                        url: 'https://proxy.apisandbox.msdn.microsoft.com/svc?url=' + encodeURIComponent(query),
                        method: 'GET',
                        headers: headersObj
                    }

                    if (queryType == "GET_BINARY") {
                        request["responseType"] = "arraybuffer";
                    }

                    if (queryType == "GET_BINARY" || queryType == "GET") {
                        return $http(request);
                    }
                };
            },

            performQuery: function (queryType) {
                return function (query, postString, requestHeaders) {
                    switch(queryType) {
                        case "GET":
                            return $http.get(query, {headers : requestHeaders});
                        case "GET_BINARY":
                            return $http.get(query, {responseType:"arraybuffer"}, {headers : requestHeaders});
                        case "POST":
                            return $http.post(query, postString, {headers : requestHeaders});
                        case "PATCH":
                            return $http.patch(query, postString, {headers : requestHeaders});
                        case "DELETE":
                            return $http.delete(query, {headers : requestHeaders});
                    }
                };
            },
            
            getMetadata: function() {
                return this.performAnonymousQuery("GET")("https://graph.microsoft.com/" + this.selectedVersion + "/$metadata");
            }
        }
    }]);
function createShareLink(fullRequestUrl, action, version) {    
    return window.location.origin + window.location.pathname + "?request=" + extractGraphEndpoint(fullRequestUrl) + "&method=" + action + "&version=" + version;
}

function extractGraphEndpoint(fullRequestUrl) {
    requestUrl = fullRequestUrl.split('.com')
    requestUrl.shift();
    
    var requestUrlComponents = requestUrl[0].split('/');
    requestUrlComponents.shift(); //remove empty item
    requestUrlComponents.shift(); //remove version
    return (requestUrlComponents.join('/'));
}

function isPostOrPatch(option) {
    return  option == "POST" || option == "PATCH";
}

function ShareDialogController($scope, $mdDialog, apiService, $sce, headers, body) {
    var _apiService = apiService;
    $scope.hide = function() {
        $mdDialog.hide();
    };

    $scope.cancel = function() {
        $mdDialog.cancel();
    };
    
    $scope.getShareLink = function() {
        var requestUrl = $scope.getSearchText();
        return createShareLink(requestUrl, _apiService.selectedOption, _apiService.selectedVersion);
    }

    $scope.generateSuperAgentCode = function() {
        var requestUrl = $scope.getSearchText();

        var fullGraphUrl = "https://graph.microsoft.com/" + _apiService.selectedVersion + "/" + extractGraphEndpoint(requestUrl);

        var tab = function() {
            return "<span style='padding-left:15px'></span>";
        }

        var line = function() {
            return "<br>"
        }

        var str = "request";
        str += line() + tab() + "." + _apiService.selectedOption.toLocaleLowerCase() + "(\"" + fullGraphUrl + "\")"

        if (Object.keys(headers).length > 0) {
            str += line() + tab() + ".set(" + JSON.stringify(headers) + ")";
        }

        if (isPostOrPatch( _apiService.selectedOption)) {
            try {
                var bodyObj = JSON.parse(body);
                if (bodyObj) {
                    str += line() + tab() + ".send(" + JSON.stringify(bodyObj) + ")";
                }
            } catch(e) {

            }
        }
 
        str += line() + tab() + ".end(function(err, res) {"
        str += line() + tab() + tab() + "console.log(res);"
        str += line() + tab() + "});"
        return $sce.trustAsHtml(str);
    }
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhlbGxvLmFsbC5taW4uanMiLCJhcGktZXhwbG9yZXItaW5pdC5qcyIsImFwaS1leHBsb3Jlci1hcHAuanMiLCJhcGktZXhwbG9yZXItc3ZjLmpzIiwic2hhcmUtZGlhbG9nLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQ0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNqREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNyRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiYWxsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohIGhlbGxvanMgdjEuMTQuMCB8IChjKSAyMDEyLTIwMTYgQW5kcmV3IERvZHNvbiB8IE1JVCBodHRwczovL2Fkb2Rzb24uY29tL2hlbGxvLmpzL0xJQ0VOU0UgKi9cclxuT2JqZWN0LmNyZWF0ZXx8KE9iamVjdC5jcmVhdGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBmdW5jdGlvbih0KXtpZigxIT1hcmd1bWVudHMubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIk9iamVjdC5jcmVhdGUgaW1wbGVtZW50YXRpb24gb25seSBhY2NlcHRzIG9uZSBwYXJhbWV0ZXIuXCIpO3JldHVybiBlLnByb3RvdHlwZT10LG5ldyBlfX0oKSksT2JqZWN0LmtleXN8fChPYmplY3Qua2V5cz1mdW5jdGlvbihlLHQsbil7bj1bXTtmb3IodCBpbiBlKW4uaGFzT3duUHJvcGVydHkuY2FsbChlLHQpJiZuLnB1c2godCk7cmV0dXJuIG59KSxBcnJheS5wcm90b3R5cGUuaW5kZXhPZnx8KEFycmF5LnByb3RvdHlwZS5pbmRleE9mPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8dGhpcy5sZW5ndGg7dCsrKWlmKHRoaXNbdF09PT1lKXJldHVybiB0O3JldHVybi0xfSksQXJyYXkucHJvdG90eXBlLmZvckVhY2h8fChBcnJheS5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbihlKXtpZih2b2lkIDA9PT10aGlzfHxudWxsPT09dGhpcyl0aHJvdyBuZXcgVHlwZUVycm9yO3ZhciB0PU9iamVjdCh0aGlzKSxuPXQubGVuZ3RoPj4+MDtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3I7Zm9yKHZhciBvPWFyZ3VtZW50cy5sZW5ndGg+PTI/YXJndW1lbnRzWzFdOnZvaWQgMCxpPTA7bj5pO2krKylpIGluIHQmJmUuY2FsbChvLHRbaV0saSx0KTtyZXR1cm4gdGhpc30pLEFycmF5LnByb3RvdHlwZS5maWx0ZXJ8fChBcnJheS5wcm90b3R5cGUuZmlsdGVyPWZ1bmN0aW9uKGUsdCl7dmFyIG49W107cmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbihvLGkscil7ZS5jYWxsKHR8fHZvaWQgMCxvLGkscikmJm4ucHVzaChvKX0pLG59KSxBcnJheS5wcm90b3R5cGUubWFwfHwoQXJyYXkucHJvdG90eXBlLm1hcD1mdW5jdGlvbihlLHQpe3ZhciBuPVtdO3JldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24obyxpLHIpe24ucHVzaChlLmNhbGwodHx8dm9pZCAwLG8saSxyKSl9KSxufSksQXJyYXkuaXNBcnJheXx8KEFycmF5LmlzQXJyYXk9ZnVuY3Rpb24oZSl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfSksXCJvYmplY3RcIiE9dHlwZW9mIHdpbmRvd3x8XCJvYmplY3RcIiE9dHlwZW9mIHdpbmRvdy5sb2NhdGlvbnx8d2luZG93LmxvY2F0aW9uLmFzc2lnbnx8KHdpbmRvdy5sb2NhdGlvbi5hc3NpZ249ZnVuY3Rpb24oZSl7d2luZG93LmxvY2F0aW9uPWV9KSxGdW5jdGlvbi5wcm90b3R5cGUuYmluZHx8KEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt9aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdGhpcyl0aHJvdyBuZXcgVHlwZUVycm9yKFwiRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgLSB3aGF0IGlzIHRyeWluZyB0byBiZSBib3VuZCBpcyBub3QgY2FsbGFibGVcIik7dmFyIG49W10uc2xpY2Usbz1uLmNhbGwoYXJndW1lbnRzLDEpLGk9dGhpcyxyPWZ1bmN0aW9uKCl7cmV0dXJuIGkuYXBwbHkodGhpcyBpbnN0YW5jZW9mIHQ/dGhpczplfHx3aW5kb3csby5jb25jYXQobi5jYWxsKGFyZ3VtZW50cykpKX07cmV0dXJuIHQucHJvdG90eXBlPXRoaXMucHJvdG90eXBlLHIucHJvdG90eXBlPW5ldyB0LHJ9KTt2YXIgaGVsbG89ZnVuY3Rpb24oZSl7cmV0dXJuIGhlbGxvLnVzZShlKX07aGVsbG8udXRpbHM9e2V4dGVuZDpmdW5jdGlvbihlKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLmZvckVhY2goZnVuY3Rpb24odCl7aWYoQXJyYXkuaXNBcnJheShlKSYmQXJyYXkuaXNBcnJheSh0KSlBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShlLHQpO2Vsc2UgaWYoZSBpbnN0YW5jZW9mIE9iamVjdCYmdCBpbnN0YW5jZW9mIE9iamVjdCYmZSE9PXQpZm9yKHZhciBuIGluIHQpZVtuXT1oZWxsby51dGlscy5leHRlbmQoZVtuXSx0W25dKTtlbHNlIEFycmF5LmlzQXJyYXkodCkmJih0PXQuc2xpY2UoMCkpLGU9dH0pLGV9fSxoZWxsby51dGlscy5leHRlbmQoaGVsbG8se3NldHRpbmdzOntyZWRpcmVjdF91cmk6d2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoXCIjXCIpWzBdLHJlc3BvbnNlX3R5cGU6XCJ0b2tlblwiLGRpc3BsYXk6XCJwb3B1cFwiLHN0YXRlOlwiXCIsb2F1dGhfcHJveHk6XCJodHRwczovL2F1dGgtc2VydmVyLmhlcm9rdWFwcC5jb20vcHJveHlcIix0aW1lb3V0OjJlNCxwb3B1cDp7cmVzaXphYmxlOjEsc2Nyb2xsYmFyczoxLHdpZHRoOjUwMCxoZWlnaHQ6NTUwfSxzY29wZTpbXCJiYXNpY1wiXSxzY29wZV9tYXA6e2Jhc2ljOlwiXCJ9LGRlZmF1bHRfc2VydmljZTpudWxsLGZvcmNlOm51bGwscGFnZV91cmk6d2luZG93LmxvY2F0aW9uLmhyZWZ9LHNlcnZpY2VzOnt9LHVzZTpmdW5jdGlvbihlKXt2YXIgdD1PYmplY3QuY3JlYXRlKHRoaXMpO3JldHVybiB0LnNldHRpbmdzPU9iamVjdC5jcmVhdGUodGhpcy5zZXR0aW5ncyksZSYmKHQuc2V0dGluZ3MuZGVmYXVsdF9zZXJ2aWNlPWUpLHQudXRpbHMuRXZlbnQuY2FsbCh0KSx0fSxpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy51dGlscztpZighZSlyZXR1cm4gdGhpcy5zZXJ2aWNlcztmb3IodmFyIG8gaW4gZSllLmhhc093blByb3BlcnR5KG8pJiZcIm9iamVjdFwiIT10eXBlb2YgZVtvXSYmKGVbb109e2lkOmVbb119KTtyZXR1cm4gbi5leHRlbmQodGhpcy5zZXJ2aWNlcyxlKSx0JiYobi5leHRlbmQodGhpcy5zZXR0aW5ncyx0KSxcInJlZGlyZWN0X3VyaVwiaW4gdCYmKHRoaXMuc2V0dGluZ3MucmVkaXJlY3RfdXJpPW4udXJsKHQucmVkaXJlY3RfdXJpKS5ocmVmKSksdGhpc30sbG9naW46ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7aGVsbG8uZW1pdChlLHQpfWZ1bmN0aW9uIHQoZSl7cmV0dXJuIGV9ZnVuY3Rpb24gbihlKXtyZXR1cm4hIWV9dmFyIG8saT10aGlzLHI9aS51dGlscyxhPXIuZXJyb3Iscz1yLlByb21pc2UoKSxsPXIuYXJncyh7bmV0d29yazpcInNcIixvcHRpb25zOlwib1wiLGNhbGxiYWNrOlwiZlwifSxhcmd1bWVudHMpLHU9ci5kaWZmS2V5KGwub3B0aW9ucyxpLnNldHRpbmdzKSxjPWwub3B0aW9ucz1yLm1lcmdlKGkuc2V0dGluZ3MsbC5vcHRpb25zfHx7fSk7aWYoYy5wb3B1cD1yLm1lcmdlKGkuc2V0dGluZ3MucG9wdXAsbC5vcHRpb25zLnBvcHVwfHx7fSksbC5uZXR3b3JrPWwubmV0d29ya3x8aS5zZXR0aW5ncy5kZWZhdWx0X3NlcnZpY2Uscy5wcm94eS50aGVuKGwuY2FsbGJhY2ssbC5jYWxsYmFjaykscy5wcm94eS50aGVuKGUuYmluZCh0aGlzLFwiYXV0aC5sb2dpbiBhdXRoXCIpLGUuYmluZCh0aGlzLFwiYXV0aC5mYWlsZWQgYXV0aFwiKSksXCJzdHJpbmdcIiE9dHlwZW9mIGwubmV0d29ya3x8IShsLm5ldHdvcmsgaW4gaS5zZXJ2aWNlcykpcmV0dXJuIHMucmVqZWN0KGEoXCJpbnZhbGlkX25ldHdvcmtcIixcIlRoZSBwcm92aWRlZCBuZXR3b3JrIHdhcyBub3QgcmVjb2duaXplZFwiKSk7dmFyIGQ9aS5zZXJ2aWNlc1tsLm5ldHdvcmtdLGY9ci5nbG9iYWxFdmVudChmdW5jdGlvbihlKXt2YXIgdDt0PWU/SlNPTi5wYXJzZShlKTphKFwiY2FuY2VsbGVkXCIsXCJUaGUgYXV0aGVudGljYXRpb24gd2FzIG5vdCBjb21wbGV0ZWRcIiksdC5lcnJvcj9zLnJlamVjdCh0KTooci5zdG9yZSh0Lm5ldHdvcmssdCkscy5mdWxmaWxsKHtuZXR3b3JrOnQubmV0d29yayxhdXRoUmVzcG9uc2U6dH0pKX0pLHA9ci51cmwoYy5yZWRpcmVjdF91cmkpLmhyZWYsbT1kLm9hdXRoLnJlc3BvbnNlX3R5cGV8fGMucmVzcG9uc2VfdHlwZTsvXFxiY29kZVxcYi8udGVzdChtKSYmIWQub2F1dGguZ3JhbnQmJihtPW0ucmVwbGFjZSgvXFxiY29kZVxcYi8sXCJ0b2tlblwiKSksbC5xcz1yLm1lcmdlKHUse2NsaWVudF9pZDplbmNvZGVVUklDb21wb25lbnQoZC5pZCkscmVzcG9uc2VfdHlwZTplbmNvZGVVUklDb21wb25lbnQobSkscmVkaXJlY3RfdXJpOmVuY29kZVVSSUNvbXBvbmVudChwKSxzdGF0ZTp7Y2xpZW50X2lkOmQuaWQsbmV0d29yazpsLm5ldHdvcmssZGlzcGxheTpjLmRpc3BsYXksY2FsbGJhY2s6ZixzdGF0ZTpjLnN0YXRlLHJlZGlyZWN0X3VyaTpwfX0pO3ZhciBoPXIuc3RvcmUobC5uZXR3b3JrKSxnPS9bLFxcc10rLyx2PWkuc2V0dGluZ3Muc2NvcGU/W2kuc2V0dGluZ3Muc2NvcGUudG9TdHJpbmcoKV06W10seT1yLm1lcmdlKGkuc2V0dGluZ3Muc2NvcGVfbWFwLGQuc2NvcGV8fHt9KTtpZihjLnNjb3BlJiZ2LnB1c2goYy5zY29wZS50b1N0cmluZygpKSxoJiZcInNjb3BlXCJpbiBoJiZoLnNjb3BlIGluc3RhbmNlb2YgU3RyaW5nJiZ2LnB1c2goaC5zY29wZSksdj12LmpvaW4oXCIsXCIpLnNwbGl0KGcpLHY9ci51bmlxdWUodikuZmlsdGVyKG4pLGwucXMuc3RhdGUuc2NvcGU9di5qb2luKFwiLFwiKSx2PXYubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlIGluIHk/eVtlXTplfSksdj12LmpvaW4oXCIsXCIpLnNwbGl0KGcpLHY9ci51bmlxdWUodikuZmlsdGVyKG4pLGwucXMuc2NvcGU9di5qb2luKGQuc2NvcGVfZGVsaW18fFwiLFwiKSxjLmZvcmNlPT09ITEmJmgmJlwiYWNjZXNzX3Rva2VuXCJpbiBoJiZoLmFjY2Vzc190b2tlbiYmXCJleHBpcmVzXCJpbiBoJiZoLmV4cGlyZXM+KG5ldyBEYXRlKS5nZXRUaW1lKCkvMWUzKXt2YXIgdz1yLmRpZmYoKGguc2NvcGV8fFwiXCIpLnNwbGl0KGcpLChsLnFzLnN0YXRlLnNjb3BlfHxcIlwiKS5zcGxpdChnKSk7aWYoMD09PXcubGVuZ3RoKXJldHVybiBzLmZ1bGZpbGwoe3VuY2hhbmdlZDohMCxuZXR3b3JrOmwubmV0d29yayxhdXRoUmVzcG9uc2U6aH0pLHN9aWYoXCJwYWdlXCI9PT1jLmRpc3BsYXkmJmMucGFnZV91cmkmJihsLnFzLnN0YXRlLnBhZ2VfdXJpPXIudXJsKGMucGFnZV91cmkpLmhyZWYpLFwibG9naW5cImluIGQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGQubG9naW4mJmQubG9naW4obCksKCEvXFxidG9rZW5cXGIvLnRlc3QobSl8fHBhcnNlSW50KGQub2F1dGgudmVyc2lvbiwxMCk8Mnx8XCJub25lXCI9PT1jLmRpc3BsYXkmJmQub2F1dGguZ3JhbnQmJmgmJmgucmVmcmVzaF90b2tlbikmJihsLnFzLnN0YXRlLm9hdXRoPWQub2F1dGgsbC5xcy5zdGF0ZS5vYXV0aF9wcm94eT1jLm9hdXRoX3Byb3h5KSxsLnFzLnN0YXRlPWVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShsLnFzLnN0YXRlKSksMT09PXBhcnNlSW50KGQub2F1dGgudmVyc2lvbiwxMCk/bz1yLnFzKGMub2F1dGhfcHJveHksbC5xcyx0KTpcIm5vbmVcIj09PWMuZGlzcGxheSYmZC5vYXV0aC5ncmFudCYmaCYmaC5yZWZyZXNoX3Rva2VuPyhsLnFzLnJlZnJlc2hfdG9rZW49aC5yZWZyZXNoX3Rva2VuLG89ci5xcyhjLm9hdXRoX3Byb3h5LGwucXMsdCkpOm89ci5xcyhkLm9hdXRoLmF1dGgsbC5xcyx0KSxlKFwiYXV0aC5pbml0XCIsbCksXCJub25lXCI9PT1jLmRpc3BsYXkpci5pZnJhbWUobyxwKTtlbHNlIGlmKFwicG9wdXBcIj09PWMuZGlzcGxheSl2YXIgXz1yLnBvcHVwKG8scCxjLnBvcHVwKSxiPXNldEludGVydmFsKGZ1bmN0aW9uKCl7aWYoKCFffHxfLmNsb3NlZCkmJihjbGVhckludGVydmFsKGIpLCFzLnN0YXRlKSl7dmFyIGU9YShcImNhbmNlbGxlZFwiLFwiTG9naW4gaGFzIGJlZW4gY2FuY2VsbGVkXCIpO198fChlPWEoXCJibG9ja2VkXCIsXCJQb3B1cCB3YXMgYmxvY2tlZFwiKSksZS5uZXR3b3JrPWwubmV0d29yayxzLnJlamVjdChlKX19LDEwMCk7ZWxzZSB3aW5kb3cubG9jYXRpb249bztyZXR1cm4gcy5wcm94eX0sbG9nb3V0OmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2hlbGxvLmVtaXQoZSx0KX12YXIgdD10aGlzLG49dC51dGlscyxvPW4uZXJyb3IsaT1uLlByb21pc2UoKSxyPW4uYXJncyh7bmFtZTpcInNcIixvcHRpb25zOlwib1wiLGNhbGxiYWNrOlwiZlwifSxhcmd1bWVudHMpO2lmKHIub3B0aW9ucz1yLm9wdGlvbnN8fHt9LGkucHJveHkudGhlbihyLmNhbGxiYWNrLHIuY2FsbGJhY2spLGkucHJveHkudGhlbihlLmJpbmQodGhpcyxcImF1dGgubG9nb3V0IGF1dGhcIiksZS5iaW5kKHRoaXMsXCJlcnJvclwiKSksci5uYW1lPXIubmFtZXx8dGhpcy5zZXR0aW5ncy5kZWZhdWx0X3NlcnZpY2Usci5hdXRoUmVzcG9uc2U9bi5zdG9yZShyLm5hbWUpLCFyLm5hbWV8fHIubmFtZSBpbiB0LnNlcnZpY2VzKWlmKHIubmFtZSYmci5hdXRoUmVzcG9uc2Upe3ZhciBhPWZ1bmN0aW9uKGUpe24uc3RvcmUoci5uYW1lLG51bGwpLGkuZnVsZmlsbChoZWxsby51dGlscy5tZXJnZSh7bmV0d29yazpyLm5hbWV9LGV8fHt9KSl9LHM9e307aWYoci5vcHRpb25zLmZvcmNlKXt2YXIgbD10LnNlcnZpY2VzW3IubmFtZV0ubG9nb3V0O2lmKGwpaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgbCYmKGw9bChhLHIpKSxcInN0cmluZ1wiPT10eXBlb2YgbCluLmlmcmFtZShsKSxzLmZvcmNlPW51bGwscy5tZXNzYWdlPVwiTG9nb3V0IHN1Y2Nlc3Mgb24gcHJvdmlkZXJzIHNpdGUgd2FzIGluZGV0ZXJtaW5hdGVcIjtlbHNlIGlmKHZvaWQgMD09PWwpcmV0dXJuIGkucHJveHl9YShzKX1lbHNlIGkucmVqZWN0KG8oXCJpbnZhbGlkX3Nlc3Npb25cIixcIlRoZXJlIHdhcyBubyBzZXNzaW9uIHRvIHJlbW92ZVwiKSk7ZWxzZSBpLnJlamVjdChvKFwiaW52YWxpZF9uZXR3b3JrXCIsXCJUaGUgbmV0d29yayB3YXMgdW5yZWNvZ25pemVkXCIpKTtyZXR1cm4gaS5wcm94eX0sZ2V0QXV0aFJlc3BvbnNlOmZ1bmN0aW9uKGUpe3JldHVybiBlPWV8fHRoaXMuc2V0dGluZ3MuZGVmYXVsdF9zZXJ2aWNlLGUmJmUgaW4gdGhpcy5zZXJ2aWNlcz90aGlzLnV0aWxzLnN0b3JlKGUpfHxudWxsOm51bGx9LGV2ZW50czp7fX0pLGhlbGxvLnV0aWxzLmV4dGVuZChoZWxsby51dGlscyx7ZXJyb3I6ZnVuY3Rpb24oZSx0KXtyZXR1cm57ZXJyb3I6e2NvZGU6ZSxtZXNzYWdlOnR9fX0scXM6ZnVuY3Rpb24oZSx0LG4pe2lmKHQpe249bnx8ZW5jb2RlVVJJQ29tcG9uZW50O2Zvcih2YXIgbyBpbiB0KXt2YXIgaT1cIihbXFxcXD9cXFxcJl0pXCIrbytcIj1bXlxcXFwmXSpcIixyPW5ldyBSZWdFeHAoaSk7ZS5tYXRjaChyKSYmKGU9ZS5yZXBsYWNlKHIsXCIkMVwiK28rXCI9XCIrbih0W29dKSksZGVsZXRlIHRbb10pfX1yZXR1cm4gdGhpcy5pc0VtcHR5KHQpP2U6ZSsoZS5pbmRleE9mKFwiP1wiKT4tMT9cIiZcIjpcIj9cIikrdGhpcy5wYXJhbSh0LG4pfSxwYXJhbTpmdW5jdGlvbihlLHQpe3ZhciBuLG8saT17fTtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl7aWYodD10fHxkZWNvZGVVUklDb21wb25lbnQsbz1lLnJlcGxhY2UoL15bXFwjXFw/XS8sXCJcIikubWF0Y2goLyhbXj1cXC9cXCZdKyk9KFteXFwmXSspL2cpKWZvcih2YXIgcj0wO3I8by5sZW5ndGg7cisrKW49b1tyXS5tYXRjaCgvKFtePV0rKT0oLiopLyksaVtuWzFdXT10KG5bMl0pO3JldHVybiBpfXQ9dHx8ZW5jb2RlVVJJQ29tcG9uZW50O3ZhciBhPWU7aT1bXTtmb3IodmFyIHMgaW4gYSlhLmhhc093blByb3BlcnR5KHMpJiZhLmhhc093blByb3BlcnR5KHMpJiZpLnB1c2goW3MsXCI/XCI9PT1hW3NdP1wiP1wiOnQoYVtzXSldLmpvaW4oXCI9XCIpKTtyZXR1cm4gaS5qb2luKFwiJlwiKX0sc3RvcmU6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dmFyIGU9e307dHJ5e2U9SlNPTi5wYXJzZShuLmdldEl0ZW0oXCJoZWxsb1wiKSl8fHt9fWNhdGNoKHQpe31yZXR1cm4gZX1mdW5jdGlvbiB0KGUpe24uc2V0SXRlbShcImhlbGxvXCIsSlNPTi5zdHJpbmdpZnkoZSkpfWZvcih2YXIgbixvPVtcImxvY2FsU3RvcmFnZVwiLFwic2Vzc2lvblN0b3JhZ2VcIl0saT0tMSxyPVwidGVzdFwiO29bKytpXTspdHJ5e249d2luZG93W29baV1dLG4uc2V0SXRlbShyK2ksaSksbi5yZW1vdmVJdGVtKHIraSk7YnJlYWt9Y2F0Y2goYSl7bj1udWxsfWlmKCFuKXt2YXIgcz1udWxsO249e2dldEl0ZW06ZnVuY3Rpb24oZSl7ZSs9XCI9XCI7Zm9yKHZhciB0PWRvY3VtZW50LmNvb2tpZS5zcGxpdChcIjtcIiksbj0wO248dC5sZW5ndGg7bisrKXt2YXIgbz10W25dLnJlcGxhY2UoLyheXFxzK3xcXHMrJCkvLFwiXCIpO2lmKG8mJjA9PT1vLmluZGV4T2YoZSkpcmV0dXJuIG8uc3Vic3RyKGUubGVuZ3RoKX1yZXR1cm4gc30sc2V0SXRlbTpmdW5jdGlvbihlLHQpe3M9dCxkb2N1bWVudC5jb29raWU9ZStcIj1cIit0fX0scz1uLmdldEl0ZW0oXCJoZWxsb1wiKX1yZXR1cm4gZnVuY3Rpb24obixvLGkpe3ZhciByPWUoKTtpZihuJiZ2b2lkIDA9PT1vKXJldHVybiByW25dfHxudWxsO2lmKG4mJm51bGw9PT1vKXRyeXtkZWxldGUgcltuXX1jYXRjaChhKXtyW25dPW51bGx9ZWxzZXtpZighbilyZXR1cm4gcjtyW25dPW99cmV0dXJuIHQocikscnx8bnVsbH19KCksYXBwZW5kOmZ1bmN0aW9uKGUsdCxuKXt2YXIgbz1cInN0cmluZ1wiPT10eXBlb2YgZT9kb2N1bWVudC5jcmVhdGVFbGVtZW50KGUpOmU7aWYoXCJvYmplY3RcIj09dHlwZW9mIHQpaWYoXCJ0YWdOYW1lXCJpbiB0KW49dDtlbHNlIGZvcih2YXIgaSBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkoaSkpaWYoXCJvYmplY3RcIj09dHlwZW9mIHRbaV0pZm9yKHZhciByIGluIHRbaV0pdFtpXS5oYXNPd25Qcm9wZXJ0eShyKSYmKG9baV1bcl09dFtpXVtyXSk7ZWxzZVwiaHRtbFwiPT09aT9vLmlubmVySFRNTD10W2ldOi9eb24vLnRlc3QoaSk/b1tpXT10W2ldOm8uc2V0QXR0cmlidXRlKGksdFtpXSk7cmV0dXJuXCJib2R5XCI9PT1uPyFmdW5jdGlvbiBhKCl7ZG9jdW1lbnQuYm9keT9kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG8pOnNldFRpbWVvdXQoYSwxNil9KCk6XCJvYmplY3RcIj09dHlwZW9mIG4/bi5hcHBlbmRDaGlsZChvKTpcInN0cmluZ1wiPT10eXBlb2YgbiYmZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUobilbMF0uYXBwZW5kQ2hpbGQobyksb30saWZyYW1lOmZ1bmN0aW9uKGUpe3RoaXMuYXBwZW5kKFwiaWZyYW1lXCIse3NyYzplLHN0eWxlOntwb3NpdGlvbjpcImFic29sdXRlXCIsbGVmdDpcIi0xMDAwcHhcIixib3R0b206MCxoZWlnaHQ6XCIxcHhcIix3aWR0aDpcIjFweFwifX0sXCJib2R5XCIpfSxtZXJnZTpmdW5jdGlvbigpe3ZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7cmV0dXJuIGUudW5zaGlmdCh7fSksdGhpcy5leHRlbmQuYXBwbHkobnVsbCxlKX0sYXJnczpmdW5jdGlvbihlLHQpe3ZhciBuPXt9LG89MCxpPW51bGwscj1udWxsO2ZvcihyIGluIGUpaWYoZS5oYXNPd25Qcm9wZXJ0eShyKSlicmVhaztpZigxPT09dC5sZW5ndGgmJlwib2JqZWN0XCI9PXR5cGVvZiB0WzBdJiZcIm8hXCIhPWVbcl0pZm9yKHIgaW4gdFswXSlpZihlLmhhc093blByb3BlcnR5KHIpJiZyIGluIGUpcmV0dXJuIHRbMF07Zm9yKHIgaW4gZSlpZihlLmhhc093blByb3BlcnR5KHIpKWlmKGk9dHlwZW9mIHRbb10sXCJmdW5jdGlvblwiPT10eXBlb2YgZVtyXSYmZVtyXS50ZXN0KHRbb10pfHxcInN0cmluZ1wiPT10eXBlb2YgZVtyXSYmKGVbcl0uaW5kZXhPZihcInNcIik+LTEmJlwic3RyaW5nXCI9PT1pfHxlW3JdLmluZGV4T2YoXCJvXCIpPi0xJiZcIm9iamVjdFwiPT09aXx8ZVtyXS5pbmRleE9mKFwiaVwiKT4tMSYmXCJudW1iZXJcIj09PWl8fGVbcl0uaW5kZXhPZihcImFcIik+LTEmJlwib2JqZWN0XCI9PT1pfHxlW3JdLmluZGV4T2YoXCJmXCIpPi0xJiZcImZ1bmN0aW9uXCI9PT1pKSluW3JdPXRbbysrXTtlbHNlIGlmKFwic3RyaW5nXCI9PXR5cGVvZiBlW3JdJiZlW3JdLmluZGV4T2YoXCIhXCIpPi0xKXJldHVybiExO3JldHVybiBufSx1cmw6ZnVuY3Rpb24oZSl7aWYoZSl7aWYod2luZG93LlVSTCYmVVJMIGluc3RhbmNlb2YgRnVuY3Rpb24mJjAhPT1VUkwubGVuZ3RoKXJldHVybiBuZXcgVVJMKGUsd2luZG93LmxvY2F0aW9uKTt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtyZXR1cm4gdC5ocmVmPWUsdC5jbG9uZU5vZGUoITEpfXJldHVybiB3aW5kb3cubG9jYXRpb259LGRpZmY6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuLTE9PT1lLmluZGV4T2YodCl9KX0sZGlmZktleTpmdW5jdGlvbihlLHQpe2lmKGV8fCF0KXt2YXIgbj17fTtmb3IodmFyIG8gaW4gZSlvIGluIHR8fChuW29dPWVbb10pO3JldHVybiBufXJldHVybiBlfSx1bmlxdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/ZS5maWx0ZXIoZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5pbmRleE9mKHQpPT09bn0pOltdfSxpc0VtcHR5OmZ1bmN0aW9uKGUpe2lmKCFlKXJldHVybiEwO2lmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIWUubGVuZ3RoO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBlKWZvcih2YXIgdCBpbiBlKWlmKGUuaGFzT3duUHJvcGVydHkodCkpcmV0dXJuITE7cmV0dXJuITB9LFByb21pc2U6ZnVuY3Rpb24oKXt2YXIgZT0wLHQ9MSxuPTIsbz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIG8/KHRoaXMuaWQ9XCJUaGVuYWJsZS8xLjAuNlwiLHRoaXMuc3RhdGU9ZSx0aGlzLmZ1bGZpbGxWYWx1ZT12b2lkIDAsdGhpcy5yZWplY3RSZWFzb249dm9pZCAwLHRoaXMub25GdWxmaWxsZWQ9W10sdGhpcy5vblJlamVjdGVkPVtdLHRoaXMucHJveHk9e3RoZW46dGhpcy50aGVuLmJpbmQodGhpcyl9LHZvaWQoXCJmdW5jdGlvblwiPT10eXBlb2YgdCYmdC5jYWxsKHRoaXMsdGhpcy5mdWxmaWxsLmJpbmQodGhpcyksdGhpcy5yZWplY3QuYmluZCh0aGlzKSkpKTpuZXcgbyh0KX07by5wcm90b3R5cGU9e2Z1bGZpbGw6ZnVuY3Rpb24oZSl7cmV0dXJuIGkodGhpcyx0LFwiZnVsZmlsbFZhbHVlXCIsZSl9LHJlamVjdDpmdW5jdGlvbihlKXtyZXR1cm4gaSh0aGlzLG4sXCJyZWplY3RSZWFzb25cIixlKX0sdGhlbjpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1uZXcgbztyZXR1cm4gbi5vbkZ1bGZpbGxlZC5wdXNoKHMoZSxpLFwiZnVsZmlsbFwiKSksbi5vblJlamVjdGVkLnB1c2gocyh0LGksXCJyZWplY3RcIikpLHIobiksaS5wcm94eX19O3ZhciBpPWZ1bmN0aW9uKHQsbixvLGkpe3JldHVybiB0LnN0YXRlPT09ZSYmKHQuc3RhdGU9bix0W29dPWkscih0KSksdH0scj1mdW5jdGlvbihlKXtlLnN0YXRlPT09dD9hKGUsXCJvbkZ1bGZpbGxlZFwiLGUuZnVsZmlsbFZhbHVlKTplLnN0YXRlPT09biYmYShlLFwib25SZWplY3RlZFwiLGUucmVqZWN0UmVhc29uKX0sYT1mdW5jdGlvbihlLHQsbil7aWYoMCE9PWVbdF0ubGVuZ3RoKXt2YXIgbz1lW3RdO2VbdF09W107dmFyIGk9ZnVuY3Rpb24oKXtmb3IodmFyIGU9MDtlPG8ubGVuZ3RoO2UrKylvW2VdKG4pfTtcIm9iamVjdFwiPT10eXBlb2YgcHJvY2VzcyYmXCJmdW5jdGlvblwiPT10eXBlb2YgcHJvY2Vzcy5uZXh0VGljaz9wcm9jZXNzLm5leHRUaWNrKGkpOlwiZnVuY3Rpb25cIj09dHlwZW9mIHNldEltbWVkaWF0ZT9zZXRJbW1lZGlhdGUoaSk6c2V0VGltZW91dChpLDApfX0scz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGZ1bmN0aW9uKG8pe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpdFtuXS5jYWxsKHQsbyk7ZWxzZXt2YXIgaTt0cnl7aT1lKG8pfWNhdGNoKHIpe3JldHVybiB2b2lkIHQucmVqZWN0KHIpfWwodCxpKX19fSxsPWZ1bmN0aW9uKGUsdCl7aWYoZT09PXR8fGUucHJveHk9PT10KXJldHVybiB2b2lkIGUucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJjYW5ub3QgcmVzb2x2ZSBwcm9taXNlIHdpdGggaXRzZWxmXCIpKTt2YXIgbjtpZihcIm9iamVjdFwiPT10eXBlb2YgdCYmbnVsbCE9PXR8fFwiZnVuY3Rpb25cIj09dHlwZW9mIHQpdHJ5e249dC50aGVufWNhdGNoKG8pe3JldHVybiB2b2lkIGUucmVqZWN0KG8pfWlmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG4pZS5mdWxmaWxsKHQpO2Vsc2V7dmFyIGk9ITE7dHJ5e24uY2FsbCh0LGZ1bmN0aW9uKG4pe2l8fChpPSEwLG49PT10P2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJjaXJjdWxhciB0aGVuYWJsZSBjaGFpblwiKSk6bChlLG4pKX0sZnVuY3Rpb24odCl7aXx8KGk9ITAsZS5yZWplY3QodCkpfSl9Y2F0Y2gobyl7aXx8ZS5yZWplY3Qobyl9fX07cmV0dXJuIG99KCksRXZlbnQ6ZnVuY3Rpb24oKXt2YXIgZT0vW1xcc1xcLF0rLztyZXR1cm4gdGhpcy5wYXJlbnQ9e2V2ZW50czp0aGlzLmV2ZW50cyxmaW5kRXZlbnRzOnRoaXMuZmluZEV2ZW50cyxwYXJlbnQ6dGhpcy5wYXJlbnQsdXRpbHM6dGhpcy51dGlsc30sdGhpcy5ldmVudHM9e30sdGhpcy5vbj1mdW5jdGlvbih0LG4pe2lmKG4mJlwiZnVuY3Rpb25cIj09dHlwZW9mIG4pZm9yKHZhciBvPXQuc3BsaXQoZSksaT0wO2k8by5sZW5ndGg7aSsrKXRoaXMuZXZlbnRzW29baV1dPVtuXS5jb25jYXQodGhpcy5ldmVudHNbb1tpXV18fFtdKTtyZXR1cm4gdGhpc30sdGhpcy5vZmY9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5maW5kRXZlbnRzKGUsZnVuY3Rpb24oZSxuKXt0JiZ0aGlzLmV2ZW50c1tlXVtuXSE9PXR8fCh0aGlzLmV2ZW50c1tlXVtuXT1udWxsKX0pLHRoaXN9LHRoaXMuZW1pdD1mdW5jdGlvbihlKXt2YXIgdD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7dC5wdXNoKGUpO2Zvcih2YXIgbj1mdW5jdGlvbihuLG8pe3RbdC5sZW5ndGgtMV09XCIqXCI9PT1uP2U6bix0aGlzLmV2ZW50c1tuXVtvXS5hcHBseSh0aGlzLHQpfSxvPXRoaXM7byYmby5maW5kRXZlbnRzOylvLmZpbmRFdmVudHMoZStcIiwqXCIsbiksbz1vLnBhcmVudDtyZXR1cm4gdGhpc30sdGhpcy5lbWl0QWZ0ZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9YXJndW1lbnRzO3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5lbWl0LmFwcGx5KGUsdCl9LDApLHRoaXN9LHRoaXMuZmluZEV2ZW50cz1mdW5jdGlvbih0LG4pe3ZhciBvPXQuc3BsaXQoZSk7Zm9yKHZhciBpIGluIHRoaXMuZXZlbnRzKWlmKHRoaXMuZXZlbnRzLmhhc093blByb3BlcnR5KGkpJiZvLmluZGV4T2YoaSk+LTEpZm9yKHZhciByPTA7cjx0aGlzLmV2ZW50c1tpXS5sZW5ndGg7cisrKXRoaXMuZXZlbnRzW2ldW3JdJiZuLmNhbGwodGhpcyxpLHIpfSx0aGlzfSxnbG9iYWxFdmVudDpmdW5jdGlvbihlLHQpe3JldHVybiB0PXR8fFwiX2hlbGxvanNfXCIrcGFyc2VJbnQoMWUxMipNYXRoLnJhbmRvbSgpLDEwKS50b1N0cmluZygzNiksd2luZG93W3RdPWZ1bmN0aW9uKCl7dHJ5e2UuYXBwbHkodGhpcyxhcmd1bWVudHMpJiZkZWxldGUgd2luZG93W3RdfWNhdGNoKG4pe2NvbnNvbGUuZXJyb3Iobil9fSx0fSxwb3B1cDpmdW5jdGlvbihlLHQsbil7dmFyIG89ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2lmKG4uaGVpZ2h0KXt2YXIgaT12b2lkIDAhPT13aW5kb3cuc2NyZWVuVG9wP3dpbmRvdy5zY3JlZW5Ub3A6c2NyZWVuLnRvcCxyPXNjcmVlbi5oZWlnaHR8fHdpbmRvdy5pbm5lckhlaWdodHx8by5jbGllbnRIZWlnaHQ7bi50b3A9cGFyc2VJbnQoKHItbi5oZWlnaHQpLzIsMTApK2l9aWYobi53aWR0aCl7dmFyIGE9dm9pZCAwIT09d2luZG93LnNjcmVlbkxlZnQ/d2luZG93LnNjcmVlbkxlZnQ6c2NyZWVuLmxlZnQscz1zY3JlZW4ud2lkdGh8fHdpbmRvdy5pbm5lcldpZHRofHxvLmNsaWVudFdpZHRoO24ubGVmdD1wYXJzZUludCgocy1uLndpZHRoKS8yLDEwKSthfXZhciBsPVtdO09iamVjdC5rZXlzKG4pLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9bltlXTtsLnB1c2goZSsobnVsbCE9PXQ/XCI9XCIrdDpcIlwiKSl9KSwtMSE9PW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIlNhZmFyaVwiKSYmLTE9PT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJDaHJvbWVcIikmJihlPXQrXCIjb2F1dGhfcmVkaXJlY3Q9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGVuY29kZVVSSUNvbXBvbmVudChlKSkpO3ZhciB1PXdpbmRvdy5vcGVuKGUsXCJfYmxhbmtcIixsLmpvaW4oXCIsXCIpKTtyZXR1cm4gdSYmdS5mb2N1cyYmdS5mb2N1cygpLHV9LHJlc3BvbnNlSGFuZGxlcjpmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSx0LG4pe3ZhciByPWUuY2FsbGJhY2sscz1lLm5ldHdvcms7aWYoYS5zdG9yZShzLGUpLCEoXCJkaXNwbGF5XCJpbiBlJiZcInBhZ2VcIj09PWUuZGlzcGxheSkpe2lmKG4mJnImJnIgaW4gbil7dHJ5e2RlbGV0ZSBlLmNhbGxiYWNrfWNhdGNoKGwpe31hLnN0b3JlKHMsZSk7dmFyIHU9SlNPTi5zdHJpbmdpZnkoZSk7dHJ5e28obixyKSh1KX1jYXRjaChsKXt9fWkoKX19ZnVuY3Rpb24gbyhlLHQpe3JldHVybiAwIT09dC5pbmRleE9mKFwiX2hlbGxvanNfXCIpP2Z1bmN0aW9uKCl7dGhyb3dcIkNvdWxkIG5vdCBleGVjdXRlIGNhbGxiYWNrIFwiK3R9OmVbdF19ZnVuY3Rpb24gaSgpe2lmKGUuZnJhbWVFbGVtZW50KXQuZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlLmZyYW1lRWxlbWVudCk7ZWxzZXt0cnl7ZS5jbG9zZSgpfWNhdGNoKG4pe31lLmFkZEV2ZW50TGlzdGVuZXImJmUuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixmdW5jdGlvbigpe2UuY2xvc2UoKX0pfX12YXIgcixhPXRoaXMscz1lLmxvY2F0aW9uO2lmKHI9YS5wYXJhbShzLnNlYXJjaCksciYmci5zdGF0ZSYmKHIuY29kZXx8ci5vYXV0aF90b2tlbikpe3ZhciBsPUpTT04ucGFyc2Uoci5zdGF0ZSk7ci5yZWRpcmVjdF91cmk9bC5yZWRpcmVjdF91cml8fHMuaHJlZi5yZXBsYWNlKC9bXFw/XFwjXS4qJC8sXCJcIik7dmFyIHU9bC5vYXV0aF9wcm94eStcIj9cIithLnBhcmFtKHIpO3JldHVybiB2b2lkIHMuYXNzaWduKHUpfWlmKHI9YS5tZXJnZShhLnBhcmFtKHMuc2VhcmNofHxcIlwiKSxhLnBhcmFtKHMuaGFzaHx8XCJcIikpLHImJlwic3RhdGVcImluIHIpe3RyeXt2YXIgYz1KU09OLnBhcnNlKHIuc3RhdGUpO2EuZXh0ZW5kKHIsYyl9Y2F0Y2goZCl7Y29uc29sZS5lcnJvcihcIkNvdWxkIG5vdCBkZWNvZGUgc3RhdGUgcGFyYW1ldGVyXCIpfWlmKFwiYWNjZXNzX3Rva2VuXCJpbiByJiZyLmFjY2Vzc190b2tlbiYmci5uZXR3b3JrKXIuZXhwaXJlc19pbiYmMCE9PXBhcnNlSW50KHIuZXhwaXJlc19pbiwxMCl8fChyLmV4cGlyZXNfaW49MCksci5leHBpcmVzX2luPXBhcnNlSW50KHIuZXhwaXJlc19pbiwxMCksci5leHBpcmVzPShuZXcgRGF0ZSkuZ2V0VGltZSgpLzFlMysoci5leHBpcmVzX2lufHwzMTUzNmUzKSxuKHIsZSx0KTtlbHNlIGlmKFwiZXJyb3JcImluIHImJnIuZXJyb3ImJnIubmV0d29yaylyLmVycm9yPXtjb2RlOnIuZXJyb3IsbWVzc2FnZTpyLmVycm9yX21lc3NhZ2V8fHIuZXJyb3JfZGVzY3JpcHRpb259LG4ocixlLHQpO2Vsc2UgaWYoci5jYWxsYmFjayYmci5jYWxsYmFjayBpbiB0KXt2YXIgZj1cInJlc3VsdFwiaW4gciYmci5yZXN1bHQ/SlNPTi5wYXJzZShyLnJlc3VsdCk6ITE7byh0LHIuY2FsbGJhY2spKGYpLGkoKX1yLnBhZ2VfdXJpJiZzLmFzc2lnbihyLnBhZ2VfdXJpKX1lbHNlIGlmKFwib2F1dGhfcmVkaXJlY3RcImluIHIpcmV0dXJuIHZvaWQgcy5hc3NpZ24oZGVjb2RlVVJJQ29tcG9uZW50KHIub2F1dGhfcmVkaXJlY3QpKX19KSxoZWxsby51dGlscy5FdmVudC5jYWxsKGhlbGxvKSxmdW5jdGlvbihlKXt2YXIgdD17fSxuPXt9O2Uub24oXCJhdXRoLmxvZ2luLCBhdXRoLmxvZ291dFwiLGZ1bmN0aW9uKG4pe24mJlwib2JqZWN0XCI9PXR5cGVvZiBuJiZuLm5ldHdvcmsmJih0W24ubmV0d29ya109ZS51dGlscy5zdG9yZShuLm5ldHdvcmspfHx7fSl9KSxmdW5jdGlvbiBvKCl7dmFyIGk9KG5ldyBEYXRlKS5nZXRUaW1lKCkvMWUzLHI9ZnVuY3Rpb24odCl7ZS5lbWl0KFwiYXV0aC5cIit0LHtuZXR3b3JrOmEsYXV0aFJlc3BvbnNlOnN9KX07Zm9yKHZhciBhIGluIGUuc2VydmljZXMpaWYoZS5zZXJ2aWNlcy5oYXNPd25Qcm9wZXJ0eShhKSl7aWYoIWUuc2VydmljZXNbYV0uaWQpY29udGludWU7dmFyIHM9ZS51dGlscy5zdG9yZShhKXx8e30sbD1lLnNlcnZpY2VzW2FdLHU9dFthXXx8e307aWYocyYmXCJjYWxsYmFja1wiaW4gcyl7dmFyIGM9cy5jYWxsYmFjazt0cnl7ZGVsZXRlIHMuY2FsbGJhY2t9Y2F0Y2goZCl7fWUudXRpbHMuc3RvcmUoYSxzKTt0cnl7d2luZG93W2NdKHMpfWNhdGNoKGQpe319aWYocyYmXCJleHBpcmVzXCJpbiBzJiZzLmV4cGlyZXM8aSl7dmFyIGY9bC5yZWZyZXNofHxzLnJlZnJlc2hfdG9rZW47IWZ8fGEgaW4gbiYmIShuW2FdPGkpP2Z8fGEgaW4gbnx8KHIoXCJleHBpcmVkXCIpLG5bYV09ITApOihlLmVtaXQoXCJub3RpY2VcIixhK1wiIGhhcyBleHBpcmVkIHRyeWluZyB0byByZXNpZ25pblwiKSxlLmxvZ2luKGEse2Rpc3BsYXk6XCJub25lXCIsZm9yY2U6ITF9KSxuW2FdPWkrNjAwKTtjb250aW51ZX1pZih1LmFjY2Vzc190b2tlbj09PXMuYWNjZXNzX3Rva2VuJiZ1LmV4cGlyZXM9PT1zLmV4cGlyZXMpY29udGludWU7IXMuYWNjZXNzX3Rva2VuJiZ1LmFjY2Vzc190b2tlbj9yKFwibG9nb3V0XCIpOnMuYWNjZXNzX3Rva2VuJiYhdS5hY2Nlc3NfdG9rZW4/cihcImxvZ2luXCIpOnMuZXhwaXJlcyE9PXUuZXhwaXJlcyYmcihcInVwZGF0ZVwiKSx0W2FdPXMsYSBpbiBuJiZkZWxldGUgblthXX1zZXRUaW1lb3V0KG8sMWUzKX0oKX0oaGVsbG8pLGhlbGxvLmFwaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7ZT1lLnJlcGxhY2UoL1xcQFxceyhbYS16XFxfXFwtXSspKFxcfC4qPyk/XFx9L2dpLGZ1bmN0aW9uKGUsdCxuKXt2YXIgYT1uP24ucmVwbGFjZSgvXlxcfC8sXCJcIik6XCJcIjtyZXR1cm4gdCBpbiByLnF1ZXJ5PyhhPXIucXVlcnlbdF0sZGVsZXRlIHIucXVlcnlbdF0pOnIuZGF0YSYmdCBpbiByLmRhdGE/KGE9ci5kYXRhW3RdLGRlbGV0ZSByLmRhdGFbdF0pOm58fGkucmVqZWN0KG8oXCJtaXNzaW5nX2F0dHJpYnV0ZVwiLFwiVGhlIGF0dHJpYnV0ZSBcIit0K1wiIGlzIG1pc3NpbmcgZnJvbSB0aGUgcmVxdWVzdFwiKSksYX0pLGUubWF0Y2goL15odHRwcz86XFwvXFwvLyl8fChlPXUuYmFzZStlKSxyLnVybD1lLG4ucmVxdWVzdChyLGZ1bmN0aW9uKGUsdCl7aWYoIXIuZm9ybWF0UmVzcG9uc2UpcmV0dXJuIHZvaWQoKFwib2JqZWN0XCI9PXR5cGVvZiB0P3Quc3RhdHVzQ29kZT49NDAwOlwib2JqZWN0XCI9PXR5cGVvZiBlJiZcImVycm9yXCJpbiBlKT9pLnJlamVjdChlKTppLmZ1bGZpbGwoZSkpO2lmKGU9PT0hMD9lPXtzdWNjZXNzOiEwfTplfHwoZT17fSksXCJkZWxldGVcIj09PXIubWV0aG9kJiYoZT0hZXx8bi5pc0VtcHR5KGUpP3tzdWNjZXNzOiEwfTplKSx1LndyYXAmJihyLnBhdGggaW4gdS53cmFwfHxcImRlZmF1bHRcImluIHUud3JhcCkpe3ZhciBvPXIucGF0aCBpbiB1LndyYXA/ci5wYXRoOlwiZGVmYXVsdFwiLGE9KChuZXcgRGF0ZSkuZ2V0VGltZSgpLHUud3JhcFtvXShlLHQscikpO2EmJihlPWEpfWUmJlwicGFnaW5nXCJpbiBlJiZlLnBhZ2luZy5uZXh0JiYoXCI/XCI9PT1lLnBhZ2luZy5uZXh0WzBdP2UucGFnaW5nLm5leHQ9ci5wYXRoK2UucGFnaW5nLm5leHQ6ZS5wYWdpbmcubmV4dCs9XCIjXCIrci5wYXRoKSwhZXx8XCJlcnJvclwiaW4gZT9pLnJlamVjdChlKTppLmZ1bGZpbGwoZSl9KX12YXIgdD10aGlzLG49dC51dGlscyxvPW4uZXJyb3IsaT1uLlByb21pc2UoKSxyPW4uYXJncyh7cGF0aDpcInMhXCIscXVlcnk6XCJvXCIsbWV0aG9kOlwic1wiLGRhdGE6XCJvXCIsdGltZW91dDpcImlcIixjYWxsYmFjazpcImZcIn0sYXJndW1lbnRzKTtyLm1ldGhvZD0oci5tZXRob2R8fFwiZ2V0XCIpLnRvTG93ZXJDYXNlKCksci5oZWFkZXJzPXIuaGVhZGVyc3x8e30sci5xdWVyeT1yLnF1ZXJ5fHx7fSxcImdldFwiIT09ci5tZXRob2QmJlwiZGVsZXRlXCIhPT1yLm1ldGhvZHx8KG4uZXh0ZW5kKHIucXVlcnksci5kYXRhKSxyLmRhdGE9e30pO3ZhciBhPXIuZGF0YT1yLmRhdGF8fHt9O2lmKGkudGhlbihyLmNhbGxiYWNrLHIuY2FsbGJhY2spLCFyLnBhdGgpcmV0dXJuIGkucmVqZWN0KG8oXCJpbnZhbGlkX3BhdGhcIixcIk1pc3NpbmcgdGhlIHBhdGggcGFyYW1ldGVyIGZyb20gdGhlIHJlcXVlc3RcIikpO3IucGF0aD1yLnBhdGgucmVwbGFjZSgvXlxcLysvLFwiXCIpO3ZhciBzPShyLnBhdGguc3BsaXQoL1tcXC9cXDpdLywyKXx8W10pWzBdLnRvTG93ZXJDYXNlKCk7aWYocyBpbiB0LnNlcnZpY2VzKXtyLm5ldHdvcms9czt2YXIgbD1uZXcgUmVnRXhwKFwiXlwiK3MrXCI6Py8/XCIpO3IucGF0aD1yLnBhdGgucmVwbGFjZShsLFwiXCIpfXIubmV0d29yaz10LnNldHRpbmdzLmRlZmF1bHRfc2VydmljZT1yLm5ldHdvcmt8fHQuc2V0dGluZ3MuZGVmYXVsdF9zZXJ2aWNlO3ZhciB1PXQuc2VydmljZXNbci5uZXR3b3JrXTtpZighdSlyZXR1cm4gaS5yZWplY3QobyhcImludmFsaWRfbmV0d29ya1wiLFwiQ291bGQgbm90IG1hdGNoIHRoZSBzZXJ2aWNlIHJlcXVlc3RlZDogXCIrci5uZXR3b3JrKSk7aWYoci5tZXRob2QgaW4gdSYmci5wYXRoIGluIHVbci5tZXRob2RdJiZ1W3IubWV0aG9kXVtyLnBhdGhdPT09ITEpcmV0dXJuIGkucmVqZWN0KG8oXCJpbnZhbGlkX3BhdGhcIixcIlRoZSBwcm92aWRlZCBwYXRoIGlzIG5vdCBhdmFpbGFibGUgb24gdGhlIHNlbGVjdGVkIG5ldHdvcmtcIikpO3Iub2F1dGhfcHJveHl8fChyLm9hdXRoX3Byb3h5PXQuc2V0dGluZ3Mub2F1dGhfcHJveHkpLFwicHJveHlcImluIHJ8fChyLnByb3h5PXIub2F1dGhfcHJveHkmJnUub2F1dGgmJjE9PT1wYXJzZUludCh1Lm9hdXRoLnZlcnNpb24sMTApKSxcInRpbWVvdXRcImluIHJ8fChyLnRpbWVvdXQ9dC5zZXR0aW5ncy50aW1lb3V0KSxcImZvcm1hdFJlc3BvbnNlXCJpbiByfHwoci5mb3JtYXRSZXNwb25zZT0hMCksci5hdXRoUmVzcG9uc2U9dC5nZXRBdXRoUmVzcG9uc2Uoci5uZXR3b3JrKSxyLmF1dGhSZXNwb25zZSYmci5hdXRoUmVzcG9uc2UuYWNjZXNzX3Rva2VuJiYoci5xdWVyeS5hY2Nlc3NfdG9rZW49ci5hdXRoUmVzcG9uc2UuYWNjZXNzX3Rva2VuKTt2YXIgYyxkPXIucGF0aDtyLm9wdGlvbnM9bi5jbG9uZShyLnF1ZXJ5KSxyLmRhdGE9bi5jbG9uZShhKTt2YXIgZj11W3tcImRlbGV0ZVwiOlwiZGVsXCJ9W3IubWV0aG9kXXx8ci5tZXRob2RdfHx7fTtpZihcImdldFwiPT09ci5tZXRob2Qpe3ZhciBwPWQuc3BsaXQoL1tcXD8jXS8pWzFdO3AmJihuLmV4dGVuZChyLnF1ZXJ5LG4ucGFyYW0ocCkpLGQ9ZC5yZXBsYWNlKC9cXD8uKj8oI3wkKS8sXCIkMVwiKSl9cmV0dXJuKGM9ZC5tYXRjaCgvIyguKykvLFwiXCIpKT8oZD1kLnNwbGl0KFwiI1wiKVswXSxyLnBhdGg9Y1sxXSk6ZCBpbiBmPyhyLnBhdGg9ZCxkPWZbZF0pOlwiZGVmYXVsdFwiaW4gZiYmKGQ9ZltcImRlZmF1bHRcIl0pLHIucmVkaXJlY3RfdXJpPXQuc2V0dGluZ3MucmVkaXJlY3RfdXJpLHIueGhyPXUueGhyLHIuanNvbnA9dS5qc29ucCxyLmZvcm09dS5mb3JtLFwiZnVuY3Rpb25cIj09dHlwZW9mIGQ/ZChyLGUpOmUoZCksaS5wcm94eX0saGVsbG8udXRpbHMuZXh0ZW5kKGhlbGxvLnV0aWxzLHtyZXF1ZXN0OmZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQpe3ZhciBuO2UuYXV0aFJlc3BvbnNlJiZlLmF1dGhSZXNwb25zZS5vYXV0aCYmMT09PXBhcnNlSW50KGUuYXV0aFJlc3BvbnNlLm9hdXRoLnZlcnNpb24sMTApJiYobj1lLnF1ZXJ5LmFjY2Vzc190b2tlbixkZWxldGUgZS5xdWVyeS5hY2Nlc3NfdG9rZW4sZS5wcm94eT0hMCksIWUuZGF0YXx8XCJnZXRcIiE9PWUubWV0aG9kJiZcImRlbGV0ZVwiIT09ZS5tZXRob2R8fChvLmV4dGVuZChlLnF1ZXJ5LGUuZGF0YSksZS5kYXRhPW51bGwpO3ZhciBpPW8ucXMoZS51cmwsZS5xdWVyeSk7ZS5wcm94eSYmKGk9by5xcyhlLm9hdXRoX3Byb3h5LHtwYXRoOmksYWNjZXNzX3Rva2VuOm58fFwiXCIsdGhlbjplLnByb3h5X3Jlc3BvbnNlX3R5cGV8fChcImdldFwiPT09ZS5tZXRob2QudG9Mb3dlckNhc2UoKT9cInJlZGlyZWN0XCI6XCJwcm94eVwiKSxtZXRob2Q6ZS5tZXRob2QudG9Mb3dlckNhc2UoKSxzdXBwcmVzc19yZXNwb25zZV9jb2RlczohMH0pKSx0KGkpfXZhciBvPXRoaXMsaT1vLmVycm9yO28uaXNFbXB0eShlLmRhdGEpfHxcIkZpbGVMaXN0XCJpbiB3aW5kb3d8fCFvLmhhc0JpbmFyeShlLmRhdGEpfHwoZS54aHI9ITEsZS5qc29ucD0hMSk7dmFyIHI9dGhpcy5yZXF1ZXN0X2NvcnMoZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09ZS54aHJ8fGUueGhyJiYoXCJmdW5jdGlvblwiIT10eXBlb2YgZS54aHJ8fGUueGhyKGUsZS5xdWVyeSkpfSk7aWYocilyZXR1cm4gdm9pZCBuKGUsZnVuY3Rpb24obil7dmFyIGk9by54aHIoZS5tZXRob2QsbixlLmhlYWRlcnMsZS5kYXRhLHQpO2kub25wcm9ncmVzcz1lLm9ucHJvZ3Jlc3N8fG51bGwsaS51cGxvYWQmJmUub251cGxvYWRwcm9ncmVzcyYmKGkudXBsb2FkLm9ucHJvZ3Jlc3M9ZS5vbnVwbG9hZHByb2dyZXNzKX0pO3ZhciBhPWUucXVlcnk7aWYoZS5xdWVyeT1vLmNsb25lKGUucXVlcnkpLGUuY2FsbGJhY2tJRD1vLmdsb2JhbEV2ZW50KCksZS5qc29ucCE9PSExKXtpZihlLnF1ZXJ5LmNhbGxiYWNrPWUuY2FsbGJhY2tJRCxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmpzb25wJiZlLmpzb25wKGUsZS5xdWVyeSksXCJnZXRcIj09PWUubWV0aG9kKXJldHVybiB2b2lkIG4oZSxmdW5jdGlvbihuKXtvLmpzb25wKG4sdCxlLmNhbGxiYWNrSUQsZS50aW1lb3V0KX0pO2UucXVlcnk9YX1pZihlLmZvcm0hPT0hMSl7ZS5xdWVyeS5yZWRpcmVjdF91cmk9ZS5yZWRpcmVjdF91cmksZS5xdWVyeS5zdGF0ZT1KU09OLnN0cmluZ2lmeSh7Y2FsbGJhY2s6ZS5jYWxsYmFja0lEfSk7dmFyIHM7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZS5mb3JtJiYocz1lLmZvcm0oZSxlLnF1ZXJ5KSksXCJwb3N0XCI9PT1lLm1ldGhvZCYmcyE9PSExKXJldHVybiB2b2lkIG4oZSxmdW5jdGlvbihuKXtvLnBvc3QobixlLmRhdGEscyx0LGUuY2FsbGJhY2tJRCxlLnRpbWVvdXQpfSl9dChpKFwiaW52YWxpZF9yZXF1ZXN0XCIsXCJUaGVyZSB3YXMgbm8gbWVjaGFuaXNtIGZvciBoYW5kbGluZyB0aGlzIHJlcXVlc3RcIikpfSxyZXF1ZXN0X2NvcnM6ZnVuY3Rpb24oZSl7cmV0dXJuXCJ3aXRoQ3JlZGVudGlhbHNcImluIG5ldyBYTUxIdHRwUmVxdWVzdCYmZSgpfSxkb21JbnN0YW5jZTpmdW5jdGlvbihlLHQpe3ZhciBuPVwiSFRNTFwiKyhlfHxcIlwiKS5yZXBsYWNlKC9eW2Etel0vLGZ1bmN0aW9uKGUpe3JldHVybiBlLnRvVXBwZXJDYXNlKCl9KStcIkVsZW1lbnRcIjtyZXR1cm4gdD93aW5kb3dbbl0/dCBpbnN0YW5jZW9mIHdpbmRvd1tuXTp3aW5kb3cuRWxlbWVudD90IGluc3RhbmNlb2Ygd2luZG93LkVsZW1lbnQmJighZXx8dC50YWdOYW1lJiZ0LnRhZ05hbWUudG9Mb3dlckNhc2UoKT09PWUpOiEodCBpbnN0YW5jZW9mIE9iamVjdHx8dCBpbnN0YW5jZW9mIEFycmF5fHx0IGluc3RhbmNlb2YgU3RyaW5nfHx0IGluc3RhbmNlb2YgTnVtYmVyKSYmdC50YWdOYW1lJiZ0LnRhZ05hbWUudG9Mb3dlckNhc2UoKT09PWU6ITF9LGNsb25lOmZ1bmN0aW9uKGUpe2lmKG51bGw9PT1lfHxcIm9iamVjdFwiIT10eXBlb2YgZXx8ZSBpbnN0YW5jZW9mIERhdGV8fFwibm9kZU5hbWVcImluIGV8fHRoaXMuaXNCaW5hcnkoZSl8fFwiZnVuY3Rpb25cIj09dHlwZW9mIEZvcm1EYXRhJiZlIGluc3RhbmNlb2YgRm9ybURhdGEpcmV0dXJuIGU7aWYoQXJyYXkuaXNBcnJheShlKSlyZXR1cm4gZS5tYXAodGhpcy5jbG9uZS5iaW5kKHRoaXMpKTt2YXIgdD17fTtmb3IodmFyIG4gaW4gZSl0W25dPXRoaXMuY2xvbmUoZVtuXSk7cmV0dXJuIHR9LHhocjpmdW5jdGlvbihlLHQsbixvLGkpe2Z1bmN0aW9uIHIoZSl7Zm9yKHZhciB0LG49e30sbz0vKFthLXpcXC1dKyk6XFxzPyguKik7Py9naTt0PW8uZXhlYyhlKTspblt0WzFdXT10WzJdO3JldHVybiBufXZhciBhPW5ldyBYTUxIdHRwUmVxdWVzdCxzPXRoaXMuZXJyb3IsbD0hMTtcImJsb2JcIj09PWUmJihsPWUsZT1cIkdFVFwiKSxlPWUudG9VcHBlckNhc2UoKSxhLm9ubG9hZD1mdW5jdGlvbih0KXt2YXIgbj1hLnJlc3BvbnNlO3RyeXtuPUpTT04ucGFyc2UoYS5yZXNwb25zZVRleHQpfWNhdGNoKG8pezQwMT09PWEuc3RhdHVzJiYobj1zKFwiYWNjZXNzX2RlbmllZFwiLGEuc3RhdHVzVGV4dCkpfXZhciBsPXIoYS5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSk7bC5zdGF0dXNDb2RlPWEuc3RhdHVzLGkobnx8KFwiR0VUXCI9PT1lP3MoXCJlbXB0eV9yZXNwb25zZVwiLFwiQ291bGQgbm90IGdldCByZXNvdXJjZVwiKTp7fSksbCl9LGEub25lcnJvcj1mdW5jdGlvbihlKXt2YXIgdD1hLnJlc3BvbnNlVGV4dDt0cnl7dD1KU09OLnBhcnNlKGEucmVzcG9uc2VUZXh0KX1jYXRjaChuKXt9aSh0fHxzKFwiYWNjZXNzX2RlbmllZFwiLFwiQ291bGQgbm90IGdldCByZXNvdXJjZVwiKSl9O3ZhciB1O2lmKFwiR0VUXCI9PT1lfHxcIkRFTEVURVwiPT09ZSlvPW51bGw7ZWxzZSBpZihvJiZcInN0cmluZ1wiIT10eXBlb2YgbyYmIShvIGluc3RhbmNlb2YgRm9ybURhdGEpJiYhKG8gaW5zdGFuY2VvZiBGaWxlKSYmIShvIGluc3RhbmNlb2YgQmxvYikpe3ZhciBjPW5ldyBGb3JtRGF0YTtmb3IodSBpbiBvKW8uaGFzT3duUHJvcGVydHkodSkmJihvW3VdaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50P1wiZmlsZXNcImluIG9bdV0mJm9bdV0uZmlsZXMubGVuZ3RoPjAmJmMuYXBwZW5kKHUsb1t1XS5maWxlc1swXSk6b1t1XWluc3RhbmNlb2YgQmxvYj9jLmFwcGVuZCh1LG9bdV0sby5uYW1lKTpjLmFwcGVuZCh1LG9bdV0pKTtvPWN9aWYoYS5vcGVuKGUsdCwhMCksbCYmKFwicmVzcG9uc2VUeXBlXCJpbiBhP2EucmVzcG9uc2VUeXBlPWw6YS5vdmVycmlkZU1pbWVUeXBlKFwidGV4dC9wbGFpbjsgY2hhcnNldD14LXVzZXItZGVmaW5lZFwiKSksbilmb3IodSBpbiBuKWEuc2V0UmVxdWVzdEhlYWRlcih1LG5bdV0pO3JldHVybiBhLnNlbmQobyksYX0sanNvbnA6ZnVuY3Rpb24oZSx0LG4sbyl7dmFyIGkscj10aGlzLGE9ci5lcnJvcixzPTAsbD1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0sdT1hKFwic2VydmVyX2Vycm9yXCIsXCJzZXJ2ZXJfZXJyb3JcIiksYz1mdW5jdGlvbigpe3MrK3x8d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0KHUpLGwucmVtb3ZlQ2hpbGQoZCl9LDApfTtuPXIuZ2xvYmFsRXZlbnQoZnVuY3Rpb24oZSl7cmV0dXJuIHU9ZSwhMH0sbiksZT1lLnJlcGxhY2UobmV3IFJlZ0V4cChcIj1cXFxcPygmfCQpXCIpLFwiPVwiK24rXCIkMVwiKTt2YXIgZD1yLmFwcGVuZChcInNjcmlwdFwiLHtpZDpuLG5hbWU6bixzcmM6ZSxhc3luYzohMCxvbmxvYWQ6YyxvbmVycm9yOmMsb25yZWFkeXN0YXRlY2hhbmdlOmZ1bmN0aW9uKCl7L2xvYWRlZHxjb21wbGV0ZS9pLnRlc3QodGhpcy5yZWFkeVN0YXRlKSYmYygpfX0pO3dpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcIm9wZXJhXCIpPi0xJiYoaT1yLmFwcGVuZChcInNjcmlwdFwiLHt0ZXh0OlwiZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ1wiK24rXCInKS5vbmVycm9yKCk7XCJ9KSxkLmFzeW5jPSExKSxvJiZ3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3U9YShcInRpbWVvdXRcIixcInRpbWVvdXRcIiksYygpfSxvKSxsLmFwcGVuZENoaWxkKGQpLGkmJmwuYXBwZW5kQ2hpbGQoaSl9LHBvc3Q6ZnVuY3Rpb24oZSx0LG4sbyxpLHIpe3ZhciBhLHM9dGhpcyxsPXMuZXJyb3IsdT1kb2N1bWVudCxjPW51bGwsZD1bXSxmPTAscD1udWxsLG09MCxoPWZ1bmN0aW9uKGUpe20rK3x8byhlKX07cy5nbG9iYWxFdmVudChoLGkpO3ZhciBnO3RyeXtnPXUuY3JlYXRlRWxlbWVudCgnPGlmcmFtZSBuYW1lPVwiJytpKydcIj4nKX1jYXRjaCh2KXtnPXUuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKX1pZihnLm5hbWU9aSxnLmlkPWksZy5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLG4mJm4uY2FsbGJhY2tvbmxvYWQmJihnLm9ubG9hZD1mdW5jdGlvbigpe2goe3Jlc3BvbnNlOlwicG9zdGVkXCIsbWVzc2FnZTpcIkNvbnRlbnQgd2FzIHBvc3RlZFwifSl9KSxyJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aChsKFwidGltZW91dFwiLFwiVGhlIHBvc3Qgb3BlcmF0aW9uIHRpbWVkIG91dFwiKSl9LHIpLHUuYm9keS5hcHBlbmRDaGlsZChnKSxzLmRvbUluc3RhbmNlKFwiZm9ybVwiLHQpKXtmb3IoYz10LmZvcm0sZj0wO2Y8Yy5lbGVtZW50cy5sZW5ndGg7ZisrKWMuZWxlbWVudHNbZl0hPT10JiZjLmVsZW1lbnRzW2ZdLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsITApO3Q9Y31pZihzLmRvbUluc3RhbmNlKFwiZm9ybVwiLHQpKWZvcihjPXQsZj0wO2Y8Yy5lbGVtZW50cy5sZW5ndGg7ZisrKWMuZWxlbWVudHNbZl0uZGlzYWJsZWR8fFwiZmlsZVwiIT09Yy5lbGVtZW50c1tmXS50eXBlfHwoYy5lbmNvZGluZz1jLmVuY3R5cGU9XCJtdWx0aXBhcnQvZm9ybS1kYXRhXCIsYy5lbGVtZW50c1tmXS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJmaWxlXCIpKTtlbHNle2ZvcihwIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShwKSYmcy5kb21JbnN0YW5jZShcImlucHV0XCIsdFtwXSkmJlwiZmlsZVwiPT09dFtwXS50eXBlJiYoYz10W3BdLmZvcm0sYy5lbmNvZGluZz1jLmVuY3R5cGU9XCJtdWx0aXBhcnQvZm9ybS1kYXRhXCIpO2N8fChjPXUuY3JlYXRlRWxlbWVudChcImZvcm1cIiksdS5ib2R5LmFwcGVuZENoaWxkKGMpLGE9Yyk7dmFyIHk7Zm9yKHAgaW4gdClpZih0Lmhhc093blByb3BlcnR5KHApKXt2YXIgdz1zLmRvbUluc3RhbmNlKFwiaW5wdXRcIix0W3BdKXx8cy5kb21JbnN0YW5jZShcInRleHRBcmVhXCIsdFtwXSl8fHMuZG9tSW5zdGFuY2UoXCJzZWxlY3RcIix0W3BdKTtpZih3JiZ0W3BdLmZvcm09PT1jKXcmJnRbcF0ubmFtZSE9PXAmJih0W3BdLnNldEF0dHJpYnV0ZShcIm5hbWVcIixwKSx0W3BdLm5hbWU9cCk7ZWxzZXt2YXIgXz1jLmVsZW1lbnRzW3BdO2lmKHkpZm9yKF8gaW5zdGFuY2VvZiBOb2RlTGlzdHx8KF89W19dKSxmPTA7ZjxfLmxlbmd0aDtmKyspX1tmXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKF9bZl0pO3k9dS5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIikseS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJoaWRkZW5cIikseS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIscCksdz95LnZhbHVlPXRbcF0udmFsdWU6cy5kb21JbnN0YW5jZShudWxsLHRbcF0pP3kudmFsdWU9dFtwXS5pbm5lckhUTUx8fHRbcF0uaW5uZXJUZXh0OnkudmFsdWU9dFtwXSxjLmFwcGVuZENoaWxkKHkpfX1mb3IoZj0wO2Y8Yy5lbGVtZW50cy5sZW5ndGg7ZisrKXk9Yy5lbGVtZW50c1tmXSx5Lm5hbWUgaW4gdHx8eS5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKT09PSEwfHwoeS5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCEwKSxkLnB1c2goeSkpfWMuc2V0QXR0cmlidXRlKFwibWV0aG9kXCIsXCJQT1NUXCIpLGMuc2V0QXR0cmlidXRlKFwidGFyZ2V0XCIsaSksYy50YXJnZXQ9aSxjLnNldEF0dHJpYnV0ZShcImFjdGlvblwiLGUpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtjLnN1Ym1pdCgpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0cnl7YSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpfWNhdGNoKGUpe3RyeXtjb25zb2xlLmVycm9yKFwiSGVsbG9KUzogY291bGQgbm90IHJlbW92ZSBpZnJhbWVcIil9Y2F0Y2godCl7fX1mb3IodmFyIG49MDtuPGQubGVuZ3RoO24rKylkW25dJiYoZFtuXS5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCExKSxkW25dLmRpc2FibGVkPSExKX0sMCl9LDEwMCl9LGhhc0JpbmFyeTpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSlpZihlLmhhc093blByb3BlcnR5KHQpJiZ0aGlzLmlzQmluYXJ5KGVbdF0pKXJldHVybiEwO3JldHVybiExfSxpc0JpbmFyeTpmdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIE9iamVjdCYmKHRoaXMuZG9tSW5zdGFuY2UoXCJpbnB1dFwiLGUpJiZcImZpbGVcIj09PWUudHlwZXx8XCJGaWxlTGlzdFwiaW4gd2luZG93JiZlIGluc3RhbmNlb2Ygd2luZG93LkZpbGVMaXN0fHxcIkZpbGVcImluIHdpbmRvdyYmZSBpbnN0YW5jZW9mIHdpbmRvdy5GaWxlfHxcIkJsb2JcImluIHdpbmRvdyYmZSBpbnN0YW5jZW9mIHdpbmRvdy5CbG9iKX0sdG9CbG9iOmZ1bmN0aW9uKGUpe3ZhciB0PS9eZGF0YVxcOihbXjssXSsoXFw7Y2hhcnNldD1bXjssXSspPykoXFw7YmFzZTY0KT8sL2ksbj1lLm1hdGNoKHQpO2lmKCFuKXJldHVybiBlO2Zvcih2YXIgbz1hdG9iKGUucmVwbGFjZSh0LFwiXCIpKSxpPVtdLHI9MDtyPG8ubGVuZ3RoO3IrKylpLnB1c2goby5jaGFyQ29kZUF0KHIpKTtyZXR1cm4gbmV3IEJsb2IoW25ldyBVaW50OEFycmF5KGkpXSx7dHlwZTpuWzFdfSl9fSksZnVuY3Rpb24oZSl7dmFyIHQ9ZS5hcGksbj1lLnV0aWxzO24uZXh0ZW5kKG4se2RhdGFUb0pTT046ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXdpbmRvdyxvPWUuZGF0YTtpZih0LmRvbUluc3RhbmNlKFwiZm9ybVwiLG8pP289dC5ub2RlTGlzdFRvSlNPTihvLmVsZW1lbnRzKTpcIk5vZGVMaXN0XCJpbiBuJiZvIGluc3RhbmNlb2YgTm9kZUxpc3Q/bz10Lm5vZGVMaXN0VG9KU09OKG8pOnQuZG9tSW5zdGFuY2UoXCJpbnB1dFwiLG8pJiYobz10Lm5vZGVMaXN0VG9KU09OKFtvXSkpLChcIkZpbGVcImluIG4mJm8gaW5zdGFuY2VvZiBuLkZpbGV8fFwiQmxvYlwiaW4gbiYmbyBpbnN0YW5jZW9mIG4uQmxvYnx8XCJGaWxlTGlzdFwiaW4gbiYmbyBpbnN0YW5jZW9mIG4uRmlsZUxpc3QpJiYobz17ZmlsZTpvfSksIShcIkZvcm1EYXRhXCJpbiBuJiZvIGluc3RhbmNlb2Ygbi5Gb3JtRGF0YSkpZm9yKHZhciBpIGluIG8paWYoby5oYXNPd25Qcm9wZXJ0eShpKSlpZihcIkZpbGVMaXN0XCJpbiBuJiZvW2ldaW5zdGFuY2VvZiBuLkZpbGVMaXN0KTE9PT1vW2ldLmxlbmd0aCYmKG9baV09b1tpXVswXSk7ZWxzZXtpZih0LmRvbUluc3RhbmNlKFwiaW5wdXRcIixvW2ldKSYmXCJmaWxlXCI9PT1vW2ldLnR5cGUpY29udGludWU7dC5kb21JbnN0YW5jZShcImlucHV0XCIsb1tpXSl8fHQuZG9tSW5zdGFuY2UoXCJzZWxlY3RcIixvW2ldKXx8dC5kb21JbnN0YW5jZShcInRleHRBcmVhXCIsb1tpXSk/b1tpXT1vW2ldLnZhbHVlOnQuZG9tSW5zdGFuY2UobnVsbCxvW2ldKSYmKG9baV09b1tpXS5pbm5lckhUTUx8fG9baV0uaW5uZXJUZXh0KX1yZXR1cm4gZS5kYXRhPW8sb30sbm9kZUxpc3RUb0pTT046ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXt9LG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIG89ZVtuXTshby5kaXNhYmxlZCYmby5uYW1lJiYoXCJmaWxlXCI9PT1vLnR5cGU/dFtvLm5hbWVdPW86dFtvLm5hbWVdPW8udmFsdWV8fG8uaW5uZXJIVE1MKX1yZXR1cm4gdH19KSxlLmFwaT1mdW5jdGlvbigpe3ZhciBlPW4uYXJncyh7cGF0aDpcInMhXCIsbWV0aG9kOlwic1wiLGRhdGE6XCJvXCIsdGltZW91dDpcImlcIixjYWxsYmFjazpcImZcIn0sYXJndW1lbnRzKTtyZXR1cm4gZS5kYXRhJiZuLmRhdGFUb0pTT04oZSksdC5jYWxsKHRoaXMsZSl9fShoZWxsbyksaGVsbG8udXRpbHMucmVzcG9uc2VIYW5kbGVyKHdpbmRvdyx3aW5kb3cub3BlbmVyfHx3aW5kb3cucGFyZW50KSxcIm9iamVjdFwiPT10eXBlb2YgY2hyb21lJiZcIm9iamVjdFwiPT10eXBlb2YgY2hyb21lLmlkZW50aXR5JiZjaHJvbWUuaWRlbnRpdHkubGF1bmNoV2ViQXV0aEZsb3cmJiFmdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuKXt2YXIgbz17Y2xvc2VkOiExfTtyZXR1cm4gY2hyb21lLmlkZW50aXR5LmxhdW5jaFdlYkF1dGhGbG93KHt1cmw6dCxpbnRlcmFjdGl2ZTpufSxmdW5jdGlvbih0KXtpZih2b2lkIDA9PT10KXJldHVybiB2b2lkKG8uY2xvc2VkPSEwKTt2YXIgbj1oZWxsby51dGlscy51cmwodCksaT17bG9jYXRpb246e2Fzc2lnbjpmdW5jdGlvbih0KXtlKHQsITEpfSxzZWFyY2g6bi5zZWFyY2gsaGFzaDpuLmhhc2gsaHJlZjpuLmhyZWZ9LGNsb3NlOmZ1bmN0aW9uKCl7fX07aGVsbG8udXRpbHMucmVzcG9uc2VIYW5kbGVyKGksd2luZG93KX0pLG99aGVsbG8udXRpbHMucG9wdXA9ZnVuY3Rpb24odCl7cmV0dXJuIGUodCwhMCl9LGhlbGxvLnV0aWxzLmlmcmFtZT1mdW5jdGlvbih0KXtlKHQsITEpfSxoZWxsby51dGlscy5yZXF1ZXN0X2NvcnM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUoKSwhMH07dmFyIHQ9e307Y2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KFwiaGVsbG9cIixmdW5jdGlvbihlKXt0PWUuaGVsbG98fHt9fSksaGVsbG8udXRpbHMuc3RvcmU9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gMD09PWFyZ3VtZW50cy5sZW5ndGg/dDoxPT09YXJndW1lbnRzLmxlbmd0aD90W2VdfHxudWxsOm4/KHRbZV09bixjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQoe2hlbGxvOnR9KSxuKTpudWxsPT09bj8oZGVsZXRlIHRbZV0sY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHtoZWxsbzp0fSksbnVsbCk6dm9pZCAwfX0oKSxmdW5jdGlvbigpe2lmKC9eZmlsZTpcXC97M31bXlxcL10vLnRlc3Qod2luZG93LmxvY2F0aW9uLmhyZWYpJiZ3aW5kb3cuY29yZG92YSl7aGVsbG8udXRpbHMuaWZyYW1lPWZ1bmN0aW9uKGUsdCl7aGVsbG8udXRpbHMucG9wdXAoZSx0LHtoaWRkZW46XCJ5ZXNcIn0pfTt2YXIgZT1oZWxsby51dGlscy5wb3B1cDtoZWxsby51dGlscy5wb3B1cD1mdW5jdGlvbih0LG4sbyl7dmFyIGk9ZS5jYWxsKHRoaXMsdCxuLG8pO3RyeXtpZihpJiZpLmFkZEV2ZW50TGlzdGVuZXIpe3ZhciByPWhlbGxvLnV0aWxzLnVybChuKSxhPXIub3JpZ2lufHxyLnByb3RvY29sK1wiLy9cIityLmhvc3RuYW1lO2kuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRzdGFydFwiLGZ1bmN0aW9uKGUpe3ZhciB0PWUudXJsO2lmKDA9PT10LmluZGV4T2YoYSkpe3ZhciBuPWhlbGxvLnV0aWxzLnVybCh0KSxvPXtsb2NhdGlvbjp7YXNzaWduOmZ1bmN0aW9uKGUpe2kuZXhlY3V0ZVNjcmlwdCh7Y29kZTond2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIicrZSsnO1wiJ30pfSxzZWFyY2g6bi5zZWFyY2gsaGFzaDpuLmhhc2gsaHJlZjpuLmhyZWZ9LGNsb3NlOmZ1bmN0aW9uKCl7aWYoaS5jbG9zZSl7aS5jbG9zZSgpO3RyeXtpLmNsb3NlZD0hMH1jYXRjaChlKXt9fX19O2hlbGxvLnV0aWxzLnJlc3BvbnNlSGFuZGxlcihvLHdpbmRvdyl9fSl9fWNhdGNoKHMpe31yZXR1cm4gaX19fSgpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7ZSYmXCJlcnJvclwiaW4gZSYmKGUuZXJyb3I9e2NvZGU6XCJzZXJ2ZXJfZXJyb3JcIixtZXNzYWdlOmUuZXJyb3IubWVzc2FnZXx8ZS5lcnJvcn0pfWZ1bmN0aW9uIG4odCxuLG8pe2lmKCEoXCJvYmplY3RcIiE9dHlwZW9mIHR8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiBCbG9iJiZ0IGluc3RhbmNlb2YgQmxvYnx8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEFycmF5QnVmZmVyJiZ0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXJ8fFwiZXJyb3JcImluIHQpKXt2YXIgaT0oXCJhcHBfZm9sZGVyXCIhPT10LnJvb3Q/dC5yb290OlwiXCIpK3QucGF0aC5yZXBsYWNlKC9cXCYvZyxcIiUyNlwiKTtpPWkucmVwbGFjZSgvXlxcLy8sXCJcIiksdC50aHVtYl9leGlzdHMmJih0LnRodW1ibmFpbD1vLm9hdXRoX3Byb3h5K1wiP3BhdGg9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiaHR0cHM6Ly9hcGktY29udGVudC5kcm9wYm94LmNvbS8xL3RodW1ibmFpbHMvYXV0by9cIitpK1wiP2Zvcm1hdD1qcGVnJnNpemU9bVwiKStcIiZhY2Nlc3NfdG9rZW49XCIrby5vcHRpb25zLmFjY2Vzc190b2tlbiksdC50eXBlPXQuaXNfZGlyP1wiZm9sZGVyXCI6dC5taW1lX3R5cGUsdC5uYW1lPXQucGF0aC5yZXBsYWNlKC8uKlxcLy9nLFwiXCIpLHQuaXNfZGlyP3QuZmlsZXM9aS5yZXBsYWNlKC9eXFwvLyxcIlwiKToodC5kb3dubG9hZExpbms9ZS5zZXR0aW5ncy5vYXV0aF9wcm94eStcIj9wYXRoPVwiK2VuY29kZVVSSUNvbXBvbmVudChcImh0dHBzOi8vYXBpLWNvbnRlbnQuZHJvcGJveC5jb20vMS9maWxlcy9hdXRvL1wiK2kpK1wiJmFjY2Vzc190b2tlbj1cIitvLm9wdGlvbnMuYWNjZXNzX3Rva2VuLHQuZmlsZT1cImh0dHBzOi8vYXBpLWNvbnRlbnQuZHJvcGJveC5jb20vMS9maWxlcy9hdXRvL1wiK2kpLHQuaWR8fCh0LmlkPXQucGF0aC5yZXBsYWNlKC9eXFwvLyxcIlwiKSl9fWZ1bmN0aW9uIG8oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbil7ZGVsZXRlIHQucXVlcnkubGltaXQsbihlKX19dmFyIGk9e3ZlcnNpb246XCIxLjBcIixhdXRoOlwiaHR0cHM6Ly93d3cuZHJvcGJveC5jb20vMS9vYXV0aC9hdXRob3JpemVcIixyZXF1ZXN0OlwiaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vMS9vYXV0aC9yZXF1ZXN0X3Rva2VuXCIsdG9rZW46XCJodHRwczovL2FwaS5kcm9wYm94LmNvbS8xL29hdXRoL2FjY2Vzc190b2tlblwifSxyPXt2ZXJzaW9uOjIsYXV0aDpcImh0dHBzOi8vd3d3LmRyb3Bib3guY29tLzEvb2F1dGgyL2F1dGhvcml6ZVwiLGdyYW50OlwiaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vMS9vYXV0aDIvdG9rZW5cIn07ZS5pbml0KHtkcm9wYm94OntuYW1lOlwiRHJvcGJveFwiLG9hdXRoOnIsbG9naW46ZnVuY3Rpb24odCl7dC5xcy5zY29wZT1cIlwiO3ZhciBuPWRlY29kZVVSSUNvbXBvbmVudCh0LnFzLnJlZGlyZWN0X3VyaSk7MD09PW4uaW5kZXhPZihcImh0dHA6XCIpJiYwIT09bi5pbmRleE9mKFwiaHR0cDovL2xvY2FsaG9zdC9cIik/ZS5zZXJ2aWNlcy5kcm9wYm94Lm9hdXRoPWk6ZS5zZXJ2aWNlcy5kcm9wYm94Lm9hdXRoPXIsdC5vcHRpb25zLnBvcHVwLndpZHRoPTFlMyx0Lm9wdGlvbnMucG9wdXAuaGVpZ2h0PTFlM30sYmFzZTpcImh0dHBzOi8vYXBpLmRyb3Bib3guY29tLzEvXCIscm9vdDpcInNhbmRib3hcIixnZXQ6e21lOlwiYWNjb3VudC9pbmZvXCIsXCJtZS9maWxlc1wiOm8oXCJtZXRhZGF0YS9hdXRvL0B7cGFyZW50fH1cIiksXCJtZS9mb2xkZXJcIjpvKFwibWV0YWRhdGEvYXV0by9Ae2lkfVwiKSxcIm1lL2ZvbGRlcnNcIjpvKFwibWV0YWRhdGEvYXV0by9cIiksXCJkZWZhdWx0XCI6ZnVuY3Rpb24oZSx0KXtlLnBhdGgubWF0Y2goXCJodHRwczovL2FwaS1jb250ZW50LmRyb3Bib3guY29tLzEvZmlsZXMvXCIpJiYoZS5tZXRob2Q9XCJibG9iXCIpLHQoZS5wYXRoKX19LHBvc3Q6e1wibWUvZmlsZXNcIjpmdW5jdGlvbih0LG4pe3ZhciBvPXQuZGF0YS5wYXJlbnQsaT10LmRhdGEubmFtZTt0LmRhdGE9e2ZpbGU6dC5kYXRhLmZpbGV9LFwic3RyaW5nXCI9PXR5cGVvZiB0LmRhdGEuZmlsZSYmKHQuZGF0YS5maWxlPWUudXRpbHMudG9CbG9iKHQuZGF0YS5maWxlKSksbihcImh0dHBzOi8vYXBpLWNvbnRlbnQuZHJvcGJveC5jb20vMS9maWxlc19wdXQvYXV0by9cIitvK1wiL1wiK2kpfSxcIm1lL2ZvbGRlcnNcIjpmdW5jdGlvbih0LG4pe3ZhciBvPXQuZGF0YS5uYW1lO3QuZGF0YT17fSxuKFwiZmlsZW9wcy9jcmVhdGVfZm9sZGVyP3Jvb3Q9QHtyb290fHNhbmRib3h9JlwiK2UudXRpbHMucGFyYW0oe3BhdGg6b30pKX19LGRlbDp7XCJtZS9maWxlc1wiOlwiZmlsZW9wcy9kZWxldGU/cm9vdD1Ae3Jvb3R8c2FuZGJveH0mcGF0aD1Ae2lkfVwiLFwibWUvZm9sZGVyXCI6XCJmaWxlb3BzL2RlbGV0ZT9yb290PUB7cm9vdHxzYW5kYm94fSZwYXRoPUB7aWR9XCJ9LHdyYXA6e21lOmZ1bmN0aW9uKGUpe2lmKHQoZSksIWUudWlkKXJldHVybiBlO2UubmFtZT1lLmRpc3BsYXlfbmFtZTt2YXIgbj1lLm5hbWUuc3BsaXQoXCIgXCIpO3JldHVybiBlLmZpcnN0X25hbWU9bi5zaGlmdCgpLGUubGFzdF9uYW1lPW4uam9pbihcIiBcIiksZS5pZD1lLnVpZCxkZWxldGUgZS51aWQsZGVsZXRlIGUuZGlzcGxheV9uYW1lLGV9LFwiZGVmYXVsdFwiOmZ1bmN0aW9uKGUsbyxpKXtyZXR1cm4gdChlKSxlLmlzX2RpciYmZS5jb250ZW50cyYmKGUuZGF0YT1lLmNvbnRlbnRzLGRlbGV0ZSBlLmNvbnRlbnRzLGUuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3Qucm9vdD1lLnJvb3Qsbih0LG8saSl9KSksbihlLG8saSksZS5pc19kZWxldGVkJiYoZS5zdWNjZXNzPSEwKSxlfX0seGhyOmZ1bmN0aW9uKGUpe2lmKGUuZGF0YSYmZS5kYXRhLmZpbGUpe3ZhciB0PWUuZGF0YS5maWxlO3QmJih0LmZpbGVzP2UuZGF0YT10LmZpbGVzWzBdOmUuZGF0YT10KX1yZXR1cm5cImRlbGV0ZVwiPT09ZS5tZXRob2QmJihlLm1ldGhvZD1cInBvc3RcIiksITB9LGZvcm06ZnVuY3Rpb24oZSx0KXtkZWxldGUgdC5zdGF0ZSxkZWxldGUgdC5yZWRpcmVjdF91cml9fX0pfShoZWxsbyksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXtyZXR1cm4gZS5pZCYmKGUudGh1bWJuYWlsPWUucGljdHVyZT1cImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL1wiK2UuaWQrXCIvcGljdHVyZVwiKSxlfWZ1bmN0aW9uIG4oZSl7cmV0dXJuXCJkYXRhXCJpbiBlJiZlLmRhdGEuZm9yRWFjaCh0KSxlfWZ1bmN0aW9uIG8oZSx0LG4pe2lmKFwiYm9vbGVhblwiPT10eXBlb2YgZSYmKGU9e3N1Y2Nlc3M6ZX0pLGUmJlwiZGF0YVwiaW4gZSl7dmFyIG89bi5xdWVyeS5hY2Nlc3NfdG9rZW47aWYoIShlLmRhdGEgaW5zdGFuY2VvZiBBcnJheSkpe3ZhciByPWUuZGF0YTtkZWxldGUgZS5kYXRhLGUuZGF0YT1bcl19ZS5kYXRhLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5waWN0dXJlJiYoZS50aHVtYm5haWw9ZS5waWN0dXJlKSxlLnBpY3R1cmVzPShlLmltYWdlc3x8W10pLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS53aWR0aC10LndpZHRofSksZS5jb3Zlcl9waG90byYmZS5jb3Zlcl9waG90by5pZCYmKGUudGh1bWJuYWlsPWkrZS5jb3Zlcl9waG90by5pZCtcIi9waWN0dXJlP2FjY2Vzc190b2tlbj1cIitvKSxcImFsYnVtXCI9PT1lLnR5cGUmJihlLmZpbGVzPWUucGhvdG9zPWkrZS5pZCtcIi9waG90b3NcIiksZS5jYW5fdXBsb2FkJiYoZS51cGxvYWRfbG9jYXRpb249aStlLmlkK1wiL3Bob3Rvc1wiKX0pfXJldHVybiBlfWUuaW5pdCh7ZmFjZWJvb2s6e25hbWU6XCJGYWNlYm9va1wiLG9hdXRoOnt2ZXJzaW9uOjIsYXV0aDpcImh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9kaWFsb2cvb2F1dGgvXCIsZ3JhbnQ6XCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9vYXV0aC9hY2Nlc3NfdG9rZW5cIn0sc2NvcGU6e2Jhc2ljOlwicHVibGljX3Byb2ZpbGVcIixlbWFpbDpcImVtYWlsXCIsXHJcbnNoYXJlOlwidXNlcl9wb3N0c1wiLGJpcnRoZGF5OlwidXNlcl9iaXJ0aGRheVwiLGV2ZW50czpcInVzZXJfZXZlbnRzXCIscGhvdG9zOlwidXNlcl9waG90b3NcIix2aWRlb3M6XCJ1c2VyX3ZpZGVvc1wiLGZyaWVuZHM6XCJ1c2VyX2ZyaWVuZHNcIixmaWxlczpcInVzZXJfcGhvdG9zLHVzZXJfdmlkZW9zXCIscHVibGlzaF9maWxlczpcInVzZXJfcGhvdG9zLHVzZXJfdmlkZW9zLHB1Ymxpc2hfYWN0aW9uc1wiLHB1Ymxpc2g6XCJwdWJsaXNoX2FjdGlvbnNcIixvZmZsaW5lX2FjY2VzczpcIlwifSxyZWZyZXNoOiExLGxvZ2luOmZ1bmN0aW9uKGUpe2Uub3B0aW9ucy5mb3JjZSYmKGUucXMuYXV0aF90eXBlPVwicmVhdXRoZW50aWNhdGVcIiksZS5xcy5kaXNwbGF5PWUub3B0aW9ucy5kaXNwbGF5fHxcInBvcHVwXCJ9LGxvZ291dDpmdW5jdGlvbih0LG4pe3ZhciBvPWUudXRpbHMuZ2xvYmFsRXZlbnQodCksaT1lbmNvZGVVUklDb21wb25lbnQoZS5zZXR0aW5ncy5yZWRpcmVjdF91cmkrXCI/XCIrZS51dGlscy5wYXJhbSh7Y2FsbGJhY2s6byxyZXN1bHQ6SlNPTi5zdHJpbmdpZnkoe2ZvcmNlOiEwfSksc3RhdGU6XCJ7fVwifSkpLHI9KG4uYXV0aFJlc3BvbnNlfHx7fSkuYWNjZXNzX3Rva2VuO3JldHVybiBlLnV0aWxzLmlmcmFtZShcImh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9sb2dvdXQucGhwP25leHQ9XCIraStcIiZhY2Nlc3NfdG9rZW49XCIrcikscj92b2lkIDA6ITF9LGJhc2U6XCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS92Mi43L1wiLGdldDp7bWU6XCJtZT9maWVsZHM9ZW1haWwsZmlyc3RfbmFtZSxsYXN0X25hbWUsbmFtZSx0aW1lem9uZSx2ZXJpZmllZFwiLFwibWUvZnJpZW5kc1wiOlwibWUvZnJpZW5kc1wiLFwibWUvZm9sbG93aW5nXCI6XCJtZS9mcmllbmRzXCIsXCJtZS9mb2xsb3dlcnNcIjpcIm1lL2ZyaWVuZHNcIixcIm1lL3NoYXJlXCI6XCJtZS9mZWVkXCIsXCJtZS9saWtlXCI6XCJtZS9saWtlc1wiLFwibWUvZmlsZXNcIjpcIm1lL2FsYnVtc1wiLFwibWUvYWxidW1zXCI6XCJtZS9hbGJ1bXM/ZmllbGRzPWNvdmVyX3Bob3RvLG5hbWVcIixcIm1lL2FsYnVtXCI6XCJAe2lkfS9waG90b3M/ZmllbGRzPXBpY3R1cmVcIixcIm1lL3Bob3Rvc1wiOlwibWUvcGhvdG9zXCIsXCJtZS9waG90b1wiOlwiQHtpZH1cIixcImZyaWVuZC9hbGJ1bXNcIjpcIkB7aWR9L2FsYnVtc1wiLFwiZnJpZW5kL3Bob3Rvc1wiOlwiQHtpZH0vcGhvdG9zXCJ9LHBvc3Q6e1wibWUvc2hhcmVcIjpcIm1lL2ZlZWRcIixcIm1lL3Bob3RvXCI6XCJAe2lkfVwifSx3cmFwOnttZTp0LFwibWUvZnJpZW5kc1wiOm4sXCJtZS9mb2xsb3dpbmdcIjpuLFwibWUvZm9sbG93ZXJzXCI6bixcIm1lL2FsYnVtc1wiOm8sXCJtZS9waG90b3NcIjpvLFwibWUvZmlsZXNcIjpvLFwiZGVmYXVsdFwiOm99LHhocjpmdW5jdGlvbih0LG4pe3JldHVyblwiZ2V0XCIhPT10Lm1ldGhvZCYmXCJwb3N0XCIhPT10Lm1ldGhvZHx8KG4uc3VwcHJlc3NfcmVzcG9uc2VfY29kZXM9ITApLFwicG9zdFwiPT09dC5tZXRob2QmJnQuZGF0YSYmXCJzdHJpbmdcIj09dHlwZW9mIHQuZGF0YS5maWxlJiYodC5kYXRhLmZpbGU9ZS51dGlscy50b0Jsb2IodC5kYXRhLmZpbGUpKSwhMH0sanNvbnA6ZnVuY3Rpb24odCxuKXt2YXIgbz10Lm1ldGhvZDtcImdldFwiPT09b3x8ZS51dGlscy5oYXNCaW5hcnkodC5kYXRhKT9cImRlbGV0ZVwiPT09dC5tZXRob2QmJihuLm1ldGhvZD1cImRlbGV0ZVwiLHQubWV0aG9kPVwicG9zdFwiKToodC5kYXRhLm1ldGhvZD1vLHQubWV0aG9kPVwiZ2V0XCIpfSxmb3JtOmZ1bmN0aW9uKGUpe3JldHVybntjYWxsYmFja29ubG9hZDohMH19fX0pO3ZhciBpPVwiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vXCJ9KGhlbGxvKSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbixvKXt2YXIgaT0obz9cIlwiOlwiZmxpY2tyOlwiKStcIj9tZXRob2Q9XCIrdCtcIiZhcGlfa2V5PVwiK2Uuc2VydmljZXMuZmxpY2tyLmlkK1wiJmZvcm1hdD1qc29uXCI7Zm9yKHZhciByIGluIG4pbi5oYXNPd25Qcm9wZXJ0eShyKSYmKGkrPVwiJlwiK3IrXCI9XCIrbltyXSk7cmV0dXJuIGl9ZnVuY3Rpb24gbih0KXt2YXIgbj1lLmdldEF1dGhSZXNwb25zZShcImZsaWNrclwiKTt0KG4mJm4udXNlcl9uc2lkP24udXNlcl9uc2lkOm51bGwpfWZ1bmN0aW9uIG8oZSxvKXtyZXR1cm4gb3x8KG89e30pLGZ1bmN0aW9uKGkscil7bihmdW5jdGlvbihuKXtvLnVzZXJfaWQ9bixyKHQoZSxvLCEwKSl9KX19ZnVuY3Rpb24gaShlLHQpe3ZhciBuPVwiaHR0cHM6Ly93d3cuZmxpY2tyLmNvbS9pbWFnZXMvYnVkZHlpY29uLmdpZlwiO3JldHVybiBlLm5zaWQmJmUuaWNvbnNlcnZlciYmZS5pY29uZmFybSYmKG49XCJodHRwczovL2Zhcm1cIitlLmljb25mYXJtK1wiLnN0YXRpY2ZsaWNrci5jb20vXCIrZS5pY29uc2VydmVyK1wiL2J1ZGR5aWNvbnMvXCIrZS5uc2lkKyh0P1wiX1wiK3Q6XCJcIikrXCIuanBnXCIpLG59ZnVuY3Rpb24gcihlLHQsbixvLGkpe3JldHVybiBpPWk/XCJfXCIraTpcIlwiLFwiaHR0cHM6Ly9mYXJtXCIrdCtcIi5zdGF0aWNmbGlja3IuY29tL1wiK24rXCIvXCIrZStcIl9cIitvK2krXCIuanBnXCJ9ZnVuY3Rpb24gYShlKXtlJiZlLnN0YXQmJlwib2tcIiE9ZS5zdGF0LnRvTG93ZXJDYXNlKCkmJihlLmVycm9yPXtjb2RlOlwiaW52YWxpZF9yZXF1ZXN0XCIsbWVzc2FnZTplLm1lc3NhZ2V9KX1mdW5jdGlvbiBzKGUpe2lmKGUucGhvdG9zZXR8fGUucGhvdG9zKXt2YXIgdD1cInBob3Rvc2V0XCJpbiBlP1wicGhvdG9zZXRcIjpcInBob3Rvc1wiO2U9dShlLHQpLGQoZSksZS5kYXRhPWUucGhvdG8sZGVsZXRlIGUucGhvdG87Zm9yKHZhciBuPTA7bjxlLmRhdGEubGVuZ3RoO24rKyl7dmFyIG89ZS5kYXRhW25dO28ubmFtZT1vLnRpdGxlLG8ucGljdHVyZT1yKG8uaWQsby5mYXJtLG8uc2VydmVyLG8uc2VjcmV0LFwiXCIpLG8ucGljdHVyZXM9bChvLmlkLG8uZmFybSxvLnNlcnZlcixvLnNlY3JldCksby5zb3VyY2U9cihvLmlkLG8uZmFybSxvLnNlcnZlcixvLnNlY3JldCxcImJcIiksby50aHVtYm5haWw9cihvLmlkLG8uZmFybSxvLnNlcnZlcixvLnNlY3JldCxcIm1cIil9fXJldHVybiBlfWZ1bmN0aW9uIGwoZSx0LG4sbyl7dmFyIGk9MjA0OCxhPVt7aWQ6XCJ0XCIsbWF4OjEwMH0se2lkOlwibVwiLG1heDoyNDB9LHtpZDpcIm5cIixtYXg6MzIwfSx7aWQ6XCJcIixtYXg6NTAwfSx7aWQ6XCJ6XCIsbWF4OjY0MH0se2lkOlwiY1wiLG1heDo4MDB9LHtpZDpcImJcIixtYXg6MTAyNH0se2lkOlwiaFwiLG1heDoxNjAwfSx7aWQ6XCJrXCIsbWF4OjIwNDh9LHtpZDpcIm9cIixtYXg6aX1dO3JldHVybiBhLm1hcChmdW5jdGlvbihpKXtyZXR1cm57c291cmNlOnIoZSx0LG4sbyxpLmlkKSx3aWR0aDppLm1heCxoZWlnaHQ6aS5tYXh9fSl9ZnVuY3Rpb24gdShlLHQpe3JldHVybiB0IGluIGU/ZT1lW3RdOlwiZXJyb3JcImluIGV8fChlLmVycm9yPXtjb2RlOlwiaW52YWxpZF9yZXF1ZXN0XCIsbWVzc2FnZTplLm1lc3NhZ2V8fFwiRmFpbGVkIHRvIGdldCBkYXRhIGZyb20gRmxpY2tyXCJ9KSxlfWZ1bmN0aW9uIGMoZSl7aWYoYShlKSxlLmNvbnRhY3RzKXtlPXUoZSxcImNvbnRhY3RzXCIpLGQoZSksZS5kYXRhPWUuY29udGFjdCxkZWxldGUgZS5jb250YWN0O2Zvcih2YXIgdD0wO3Q8ZS5kYXRhLmxlbmd0aDt0Kyspe3ZhciBuPWUuZGF0YVt0XTtuLmlkPW4ubnNpZCxuLm5hbWU9bi5yZWFsbmFtZXx8bi51c2VybmFtZSxuLnRodW1ibmFpbD1pKG4sXCJtXCIpfX1yZXR1cm4gZX1mdW5jdGlvbiBkKGUpe2UucGFnZSYmZS5wYWdlcyYmZS5wYWdlIT09ZS5wYWdlcyYmKGUucGFnaW5nPXtuZXh0OlwiP3BhZ2U9XCIrICsrZS5wYWdlfSl9ZS5pbml0KHtmbGlja3I6e25hbWU6XCJGbGlja3JcIixvYXV0aDp7dmVyc2lvbjpcIjEuMGFcIixhdXRoOlwiaHR0cHM6Ly93d3cuZmxpY2tyLmNvbS9zZXJ2aWNlcy9vYXV0aC9hdXRob3JpemU/cGVybXM9cmVhZFwiLHJlcXVlc3Q6XCJodHRwczovL3d3dy5mbGlja3IuY29tL3NlcnZpY2VzL29hdXRoL3JlcXVlc3RfdG9rZW5cIix0b2tlbjpcImh0dHBzOi8vd3d3LmZsaWNrci5jb20vc2VydmljZXMvb2F1dGgvYWNjZXNzX3Rva2VuXCJ9LGJhc2U6XCJodHRwczovL2FwaS5mbGlja3IuY29tL3NlcnZpY2VzL3Jlc3RcIixnZXQ6e21lOm8oXCJmbGlja3IucGVvcGxlLmdldEluZm9cIiksXCJtZS9mcmllbmRzXCI6byhcImZsaWNrci5jb250YWN0cy5nZXRMaXN0XCIse3Blcl9wYWdlOlwiQHtsaW1pdHw1MH1cIn0pLFwibWUvZm9sbG93aW5nXCI6byhcImZsaWNrci5jb250YWN0cy5nZXRMaXN0XCIse3Blcl9wYWdlOlwiQHtsaW1pdHw1MH1cIn0pLFwibWUvZm9sbG93ZXJzXCI6byhcImZsaWNrci5jb250YWN0cy5nZXRMaXN0XCIse3Blcl9wYWdlOlwiQHtsaW1pdHw1MH1cIn0pLFwibWUvYWxidW1zXCI6byhcImZsaWNrci5waG90b3NldHMuZ2V0TGlzdFwiLHtwZXJfcGFnZTpcIkB7bGltaXR8NTB9XCJ9KSxcIm1lL2FsYnVtXCI6byhcImZsaWNrci5waG90b3NldHMuZ2V0UGhvdG9zXCIse3Bob3Rvc2V0X2lkOlwiQHtpZH1cIn0pLFwibWUvcGhvdG9zXCI6byhcImZsaWNrci5wZW9wbGUuZ2V0UGhvdG9zXCIse3Blcl9wYWdlOlwiQHtsaW1pdHw1MH1cIn0pfSx3cmFwOnttZTpmdW5jdGlvbihlKXtpZihhKGUpLGU9dShlLFwicGVyc29uXCIpLGUuaWQpe2lmKGUucmVhbG5hbWUpe2UubmFtZT1lLnJlYWxuYW1lLl9jb250ZW50O3ZhciB0PWUubmFtZS5zcGxpdChcIiBcIik7ZS5maXJzdF9uYW1lPXQuc2hpZnQoKSxlLmxhc3RfbmFtZT10LmpvaW4oXCIgXCIpfWUudGh1bWJuYWlsPWkoZSxcImxcIiksZS5waWN0dXJlPWkoZSxcImxcIil9cmV0dXJuIGV9LFwibWUvZnJpZW5kc1wiOmMsXCJtZS9mb2xsb3dlcnNcIjpjLFwibWUvZm9sbG93aW5nXCI6YyxcIm1lL2FsYnVtc1wiOmZ1bmN0aW9uKGUpe3JldHVybiBhKGUpLGU9dShlLFwicGhvdG9zZXRzXCIpLGQoZSksZS5waG90b3NldCYmKGUuZGF0YT1lLnBob3Rvc2V0LGUuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UubmFtZT1lLnRpdGxlLl9jb250ZW50LGUucGhvdG9zPVwiaHR0cHM6Ly9hcGkuZmxpY2tyLmNvbS9zZXJ2aWNlcy9yZXN0XCIrdChcImZsaWNrci5waG90b3NldHMuZ2V0UGhvdG9zXCIse3Bob3Rvc2V0X2lkOmUuaWR9LCEwKX0pLGRlbGV0ZSBlLnBob3Rvc2V0KSxlfSxcIm1lL3Bob3Rvc1wiOmZ1bmN0aW9uKGUpe3JldHVybiBhKGUpLHMoZSl9LFwiZGVmYXVsdFwiOmZ1bmN0aW9uKGUpe3JldHVybiBhKGUpLHMoZSl9fSx4aHI6ITEsanNvbnA6ZnVuY3Rpb24oZSx0KXtcImdldFwiPT1lLm1ldGhvZCYmKGRlbGV0ZSB0LmNhbGxiYWNrLHQuanNvbmNhbGxiYWNrPWUuY2FsbGJhY2tJRCl9fX0pfShoZWxsbyksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXshZS5tZXRhfHw0MDAhPT1lLm1ldGEuY29kZSYmNDAxIT09ZS5tZXRhLmNvZGV8fChlLmVycm9yPXtjb2RlOlwiYWNjZXNzX2RlbmllZFwiLG1lc3NhZ2U6ZS5tZXRhLmVycm9yRGV0YWlsfSl9ZnVuY3Rpb24gbihlKXtlJiZlLmlkJiYoZS50aHVtYm5haWw9ZS5waG90by5wcmVmaXgrXCIxMDB4MTAwXCIrZS5waG90by5zdWZmaXgsZS5uYW1lPWUuZmlyc3ROYW1lK1wiIFwiK2UubGFzdE5hbWUsZS5maXJzdF9uYW1lPWUuZmlyc3ROYW1lLGUubGFzdF9uYW1lPWUubGFzdE5hbWUsZS5jb250YWN0JiZlLmNvbnRhY3QuZW1haWwmJihlLmVtYWlsPWUuY29udGFjdC5lbWFpbCkpfWZ1bmN0aW9uIG8oZSx0KXt2YXIgbj10LmFjY2Vzc190b2tlbjtyZXR1cm4gZGVsZXRlIHQuYWNjZXNzX3Rva2VuLHQub2F1dGhfdG9rZW49bix0LnY9MjAxMjExMjUsITB9ZS5pbml0KHtmb3Vyc3F1YXJlOntuYW1lOlwiRm91cnNxdWFyZVwiLG9hdXRoOnt2ZXJzaW9uOjIsYXV0aDpcImh0dHBzOi8vZm91cnNxdWFyZS5jb20vb2F1dGgyL2F1dGhlbnRpY2F0ZVwiLGdyYW50OlwiaHR0cHM6Ly9mb3Vyc3F1YXJlLmNvbS9vYXV0aDIvYWNjZXNzX3Rva2VuXCJ9LHJlZnJlc2g6ITAsYmFzZTpcImh0dHBzOi8vYXBpLmZvdXJzcXVhcmUuY29tL3YyL1wiLGdldDp7bWU6XCJ1c2Vycy9zZWxmXCIsXCJtZS9mcmllbmRzXCI6XCJ1c2Vycy9zZWxmL2ZyaWVuZHNcIixcIm1lL2ZvbGxvd2Vyc1wiOlwidXNlcnMvc2VsZi9mcmllbmRzXCIsXCJtZS9mb2xsb3dpbmdcIjpcInVzZXJzL3NlbGYvZnJpZW5kc1wifSx3cmFwOnttZTpmdW5jdGlvbihlKXtyZXR1cm4gdChlKSxlJiZlLnJlc3BvbnNlJiYoZT1lLnJlc3BvbnNlLnVzZXIsbihlKSksZX0sXCJkZWZhdWx0XCI6ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSksZSYmXCJyZXNwb25zZVwiaW4gZSYmXCJmcmllbmRzXCJpbiBlLnJlc3BvbnNlJiZcIml0ZW1zXCJpbiBlLnJlc3BvbnNlLmZyaWVuZHMmJihlLmRhdGE9ZS5yZXNwb25zZS5mcmllbmRzLml0ZW1zLGUuZGF0YS5mb3JFYWNoKG4pLGRlbGV0ZSBlLnJlc3BvbnNlKSxlfX0seGhyOm8sanNvbnA6b319KX0oaGVsbG8pLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXt2YXIgbj10P3Quc3RhdHVzQ29kZTplJiZcIm1ldGFcImluIGUmJlwic3RhdHVzXCJpbiBlLm1ldGEmJmUubWV0YS5zdGF0dXM7NDAxIT09biYmNDAzIT09bnx8KGUuZXJyb3I9e2NvZGU6XCJhY2Nlc3NfZGVuaWVkXCIsbWVzc2FnZTplLm1lc3NhZ2V8fChlLmRhdGE/ZS5kYXRhLm1lc3NhZ2U6XCJDb3VsZCBub3QgZ2V0IHJlc3BvbnNlXCIpfSxkZWxldGUgZS5tZXNzYWdlKX1mdW5jdGlvbiBuKGUpe2UuaWQmJihlLnRodW1ibmFpbD1lLnBpY3R1cmU9ZS5hdmF0YXJfdXJsLGUubmFtZT1lLmxvZ2luKX1mdW5jdGlvbiBvKGUsdCxuKXtpZihlLmRhdGEmJmUuZGF0YS5sZW5ndGgmJnQmJnQuTGluayl7dmFyIG89dC5MaW5rLm1hdGNoKC88KC4qPyk+O1xccypyZWw9XFxcIm5leHRcXFwiLyk7byYmKGUucGFnaW5nPXtuZXh0Om9bMV19KX19ZS5pbml0KHtnaXRodWI6e25hbWU6XCJHaXRIdWJcIixvYXV0aDp7dmVyc2lvbjoyLGF1dGg6XCJodHRwczovL2dpdGh1Yi5jb20vbG9naW4vb2F1dGgvYXV0aG9yaXplXCIsZ3JhbnQ6XCJodHRwczovL2dpdGh1Yi5jb20vbG9naW4vb2F1dGgvYWNjZXNzX3Rva2VuXCIscmVzcG9uc2VfdHlwZTpcImNvZGVcIn0sc2NvcGU6e2VtYWlsOlwidXNlcjplbWFpbFwifSxiYXNlOlwiaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9cIixnZXQ6e21lOlwidXNlclwiLFwibWUvZnJpZW5kc1wiOlwidXNlci9mb2xsb3dpbmc/cGVyX3BhZ2U9QHtsaW1pdHwxMDB9XCIsXCJtZS9mb2xsb3dpbmdcIjpcInVzZXIvZm9sbG93aW5nP3Blcl9wYWdlPUB7bGltaXR8MTAwfVwiLFwibWUvZm9sbG93ZXJzXCI6XCJ1c2VyL2ZvbGxvd2Vycz9wZXJfcGFnZT1Ae2xpbWl0fDEwMH1cIixcIm1lL2xpa2VcIjpcInVzZXIvc3RhcnJlZD9wZXJfcGFnZT1Ae2xpbWl0fDEwMH1cIn0sd3JhcDp7bWU6ZnVuY3Rpb24oZSxvKXtyZXR1cm4gdChlLG8pLG4oZSksZX0sXCJkZWZhdWx0XCI6ZnVuY3Rpb24oZSxpLHIpe3JldHVybiB0KGUsaSksQXJyYXkuaXNBcnJheShlKSYmKGU9e2RhdGE6ZX0pLGUuZGF0YSYmKG8oZSxpLHIpLGUuZGF0YS5mb3JFYWNoKG4pKSxlfX0seGhyOmZ1bmN0aW9uKGUpe3JldHVyblwiZ2V0XCIhPT1lLm1ldGhvZCYmZS5kYXRhJiYoZS5oZWFkZXJzPWUuaGVhZGVyc3x8e30sZS5oZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdPVwiYXBwbGljYXRpb24vanNvblwiLFwib2JqZWN0XCI9PXR5cGVvZiBlLmRhdGEmJihlLmRhdGE9SlNPTi5zdHJpbmdpZnkoZS5kYXRhKSkpLCEwfX19KX0oaGVsbG8pLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7cmV0dXJuIHBhcnNlSW50KGUsMTApfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIGMoZSksZS5kYXRhPWUuaXRlbXMsZGVsZXRlIGUuaXRlbXMsZX1mdW5jdGlvbiBvKGUpe3JldHVybiBlLmVycm9yP3ZvaWQgMDooZS5uYW1lfHwoZS5uYW1lPWUudGl0bGV8fGUubWVzc2FnZSksZS5waWN0dXJlfHwoZS5waWN0dXJlPWUudGh1bWJuYWlsTGluayksZS50aHVtYm5haWx8fChlLnRodW1ibmFpbD1lLnRodW1ibmFpbExpbmspLFwiYXBwbGljYXRpb24vdm5kLmdvb2dsZS1hcHBzLmZvbGRlclwiPT09ZS5taW1lVHlwZSYmKGUudHlwZT1cImZvbGRlclwiLGUuZmlsZXM9XCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9kcml2ZS92Mi9maWxlcz9xPSUyMlwiK2UuaWQrXCIlMjIraW4rcGFyZW50c1wiKSxlKX1mdW5jdGlvbiBpKGUpe3JldHVybntzb3VyY2U6ZS51cmwsd2lkdGg6ZS53aWR0aCxoZWlnaHQ6ZS5oZWlnaHR9fWZ1bmN0aW9uIHIoZSl7ZS5kYXRhPWUuZmVlZC5lbnRyeS5tYXAodSksZGVsZXRlIGUuZmVlZH1mdW5jdGlvbiBhKGUpe2lmKGMoZSksXCJmZWVkXCJpbiBlJiZcImVudHJ5XCJpbiBlLmZlZWQpZS5kYXRhPWUuZmVlZC5lbnRyeS5tYXAodSksZGVsZXRlIGUuZmVlZDtlbHNle2lmKFwiZW50cnlcImluIGUpcmV0dXJuIHUoZS5lbnRyeSk7XCJpdGVtc1wiaW4gZT8oZS5kYXRhPWUuaXRlbXMubWFwKG8pLGRlbGV0ZSBlLml0ZW1zKTpvKGUpfXJldHVybiBlfWZ1bmN0aW9uIHMoZSl7ZS5uYW1lPWUuZGlzcGxheU5hbWV8fGUubmFtZSxlLnBpY3R1cmU9ZS5waWN0dXJlfHwoZS5pbWFnZT9lLmltYWdlLnVybDpudWxsKSxlLnRodW1ibmFpbD1lLnBpY3R1cmV9ZnVuY3Rpb24gbChlLHQsbil7YyhlKTtpZihcImZlZWRcImluIGUmJlwiZW50cnlcImluIGUuZmVlZCl7Zm9yKHZhciBvPW4ucXVlcnkuYWNjZXNzX3Rva2VuLGk9MDtpPGUuZmVlZC5lbnRyeS5sZW5ndGg7aSsrKXt2YXIgcj1lLmZlZWQuZW50cnlbaV07aWYoci5pZD1yLmlkLiR0LHIubmFtZT1yLnRpdGxlLiR0LGRlbGV0ZSByLnRpdGxlLHIuZ2QkZW1haWwmJihyLmVtYWlsPXIuZ2QkZW1haWwmJnIuZ2QkZW1haWwubGVuZ3RoPjA/ci5nZCRlbWFpbFswXS5hZGRyZXNzOm51bGwsci5lbWFpbHM9ci5nZCRlbWFpbCxkZWxldGUgci5nZCRlbWFpbCksci51cGRhdGVkJiYoci51cGRhdGVkPXIudXBkYXRlZC4kdCksci5saW5rKXt2YXIgYT1yLmxpbmsubGVuZ3RoPjA/ci5saW5rWzBdLmhyZWY6bnVsbDthJiZyLmxpbmtbMF0uZ2QkZXRhZyYmKGErPShhLmluZGV4T2YoXCI/XCIpPi0xP1wiJlwiOlwiP1wiKStcImFjY2Vzc190b2tlbj1cIitvLHIucGljdHVyZT1hLHIudGh1bWJuYWlsPWEpLGRlbGV0ZSByLmxpbmt9ci5jYXRlZ29yeSYmZGVsZXRlIHIuY2F0ZWdvcnl9ZS5kYXRhPWUuZmVlZC5lbnRyeSxkZWxldGUgZS5mZWVkfXJldHVybiBlfWZ1bmN0aW9uIHUoZSl7dmFyIHQsbj1lLm1lZGlhJGdyb3VwLG89bi5tZWRpYSRjb250ZW50Lmxlbmd0aD9uLm1lZGlhJGNvbnRlbnRbMF06e30scj1uLm1lZGlhJGNvbnRlbnR8fFtdLGE9bi5tZWRpYSR0aHVtYm5haWx8fFtdLHM9ci5jb25jYXQoYSkubWFwKGkpLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS53aWR0aC10LndpZHRofSksbD0wLHU9e2lkOmUuaWQuJHQsbmFtZTplLnRpdGxlLiR0LGRlc2NyaXB0aW9uOmUuc3VtbWFyeS4kdCx1cGRhdGVkX3RpbWU6ZS51cGRhdGVkLiR0LGNyZWF0ZWRfdGltZTplLnB1Ymxpc2hlZC4kdCxwaWN0dXJlOm8/by51cmw6bnVsbCxwaWN0dXJlczpzLGltYWdlczpbXSx0aHVtYm5haWw6bz9vLnVybDpudWxsLHdpZHRoOm8ud2lkdGgsaGVpZ2h0Om8uaGVpZ2h0fTtpZihcImxpbmtcImluIGUpZm9yKGw9MDtsPGUubGluay5sZW5ndGg7bCsrKXt2YXIgYz1lLmxpbmtbbF07aWYoYy5yZWwubWF0Y2goL1xcI2ZlZWQkLykpe3UudXBsb2FkX2xvY2F0aW9uPXUuZmlsZXM9dS5waG90b3M9Yy5ocmVmO2JyZWFrfX1pZihcImNhdGVnb3J5XCJpbiBlJiZlLmNhdGVnb3J5Lmxlbmd0aClmb3IodD1lLmNhdGVnb3J5LGw9MDtsPHQubGVuZ3RoO2wrKyl0W2xdLnNjaGVtZSYmdFtsXS5zY2hlbWUubWF0Y2goL1xcI2tpbmQkLykmJih1LnR5cGU9dFtsXS50ZXJtLnJlcGxhY2UoL14uKj9cXCMvLFwiXCIpKTtyZXR1cm5cIm1lZGlhJHRodW1ibmFpbFwiaW4gbiYmbi5tZWRpYSR0aHVtYm5haWwubGVuZ3RoJiYodD1uLm1lZGlhJHRodW1ibmFpbCx1LnRodW1ibmFpbD10WzBdLnVybCx1LmltYWdlcz10Lm1hcChpKSksdD1uLm1lZGlhJGNvbnRlbnQsdCYmdC5sZW5ndGgmJnUuaW1hZ2VzLnB1c2goaSh0WzBdKSksdX1mdW5jdGlvbiBjKGUpe2lmKFwiZmVlZFwiaW4gZSYmZS5mZWVkLm9wZW5TZWFyY2gkaXRlbXNQZXJQYWdlKXt2YXIgbj10KGUuZmVlZC5vcGVuU2VhcmNoJGl0ZW1zUGVyUGFnZS4kdCksbz10KGUuZmVlZC5vcGVuU2VhcmNoJHN0YXJ0SW5kZXguJHQpLGk9dChlLmZlZWQub3BlblNlYXJjaCR0b3RhbFJlc3VsdHMuJHQpO2k+bytuJiYoZS5wYWdpbmc9e25leHQ6XCI/c3RhcnQ9XCIrKG8rbil9KX1lbHNlXCJuZXh0UGFnZVRva2VuXCJpbiBlJiYoZS5wYWdpbmc9e25leHQ6XCI/cGFnZVRva2VuPVwiK2UubmV4dFBhZ2VUb2tlbn0pfWZ1bmN0aW9uIGQoKXtmdW5jdGlvbiBlKGUpe3ZhciBuPW5ldyBGaWxlUmVhZGVyO24ub25sb2FkPWZ1bmN0aW9uKG4pe3QoYnRvYShuLnRhcmdldC5yZXN1bHQpLGUudHlwZStyK1wiQ29udGVudC1UcmFuc2Zlci1FbmNvZGluZzogYmFzZTY0XCIpfSxuLnJlYWRBc0JpbmFyeVN0cmluZyhlKX1mdW5jdGlvbiB0KGUsdCl7bi5wdXNoKHIrXCJDb250ZW50LVR5cGU6IFwiK3QrcityK2UpLGktLSxzKCl9dmFyIG49W10sbz0oMWUxMCpNYXRoLnJhbmRvbSgpKS50b1N0cmluZygzMiksaT0wLHI9XCJcXHJcXG5cIixhPXIrXCItLVwiK28scz1mdW5jdGlvbigpe30sbD0vXmRhdGFcXDooW147LF0rKFxcO2NoYXJzZXQ9W147LF0rKT8pKFxcO2Jhc2U2NCk/LC9pO3RoaXMuYXBwZW5kPWZ1bmN0aW9uKG4sbyl7XCJzdHJpbmdcIiE9dHlwZW9mIG4mJlwibGVuZ3RoXCJpbiBPYmplY3Qobil8fChuPVtuXSk7Zm9yKHZhciBhPTA7YTxuLmxlbmd0aDthKyspe2krKzt2YXIgcz1uW2FdO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBGaWxlJiZzIGluc3RhbmNlb2YgRmlsZXx8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEJsb2ImJnMgaW5zdGFuY2VvZiBCbG9iKWUocyk7ZWxzZSBpZihcInN0cmluZ1wiPT10eXBlb2YgcyYmcy5tYXRjaChsKSl7dmFyIHU9cy5tYXRjaChsKTt0KHMucmVwbGFjZShsLFwiXCIpLHVbMV0rcitcIkNvbnRlbnQtVHJhbnNmZXItRW5jb2Rpbmc6IGJhc2U2NFwiKX1lbHNlIHQocyxvKX19LHRoaXMub25yZWFkeT1mdW5jdGlvbihlKXsocz1mdW5jdGlvbigpezA9PT1pJiYobi51bnNoaWZ0KFwiXCIpLG4ucHVzaChcIi0tXCIpLGUobi5qb2luKGEpLG8pLG49W10pfSkoKX19ZnVuY3Rpb24gZihlLHQpe3ZhciBuPXt9O2UuZGF0YSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEhUTUxJbnB1dEVsZW1lbnQmJmUuZGF0YSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQmJihlLmRhdGE9e2ZpbGU6ZS5kYXRhfSksIWUuZGF0YS5uYW1lJiZPYmplY3QoT2JqZWN0KGUuZGF0YS5maWxlKS5maWxlcykubGVuZ3RoJiZcInBvc3RcIj09PWUubWV0aG9kJiYoZS5kYXRhLm5hbWU9ZS5kYXRhLmZpbGUuZmlsZXNbMF0ubmFtZSksXCJwb3N0XCI9PT1lLm1ldGhvZD9lLmRhdGE9e3RpdGxlOmUuZGF0YS5uYW1lLHBhcmVudHM6W3tpZDplLmRhdGEucGFyZW50fHxcInJvb3RcIn1dLGZpbGU6ZS5kYXRhLmZpbGV9OihuPWUuZGF0YSxlLmRhdGE9e30sbi5wYXJlbnQmJihlLmRhdGEucGFyZW50cz1be2lkOmUuZGF0YS5wYXJlbnR8fFwicm9vdFwifV0pLG4uZmlsZSYmKGUuZGF0YS5maWxlPW4uZmlsZSksbi5uYW1lJiYoZS5kYXRhLnRpdGxlPW4ubmFtZSkpO3ZhciBvO2lmKFwiZmlsZVwiaW4gZS5kYXRhJiYobz1lLmRhdGEuZmlsZSxkZWxldGUgZS5kYXRhLmZpbGUsXCJvYmplY3RcIj09dHlwZW9mIG8mJlwiZmlsZXNcImluIG8mJihvPW8uZmlsZXMpLCFvfHwhby5sZW5ndGgpKXJldHVybiB2b2lkIHQoe2Vycm9yOntjb2RlOlwicmVxdWVzdF9pbnZhbGlkXCIsbWVzc2FnZTpcIlRoZXJlIHdlcmUgbm8gZmlsZXMgYXR0YWNoZWQgd2l0aCB0aGlzIHJlcXVlc3QgdG8gdXBsb2FkXCJ9fSk7dmFyIGk9bmV3IGQ7aS5hcHBlbmQoSlNPTi5zdHJpbmdpZnkoZS5kYXRhKSxcImFwcGxpY2F0aW9uL2pzb25cIiksbyYmaS5hcHBlbmQobyksaS5vbnJlYWR5KGZ1bmN0aW9uKG8saSl7ZS5oZWFkZXJzW1wiY29udGVudC10eXBlXCJdPSdtdWx0aXBhcnQvcmVsYXRlZDsgYm91bmRhcnk9XCInK2krJ1wiJyxlLmRhdGE9byx0KFwidXBsb2FkL2RyaXZlL3YyL2ZpbGVzXCIrKG4uaWQ/XCIvXCIrbi5pZDpcIlwiKStcIj91cGxvYWRUeXBlPW11bHRpcGFydFwiKX0pfWZ1bmN0aW9uIHAoZSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGUuZGF0YSl0cnl7ZS5kYXRhPUpTT04uc3RyaW5naWZ5KGUuZGF0YSksZS5oZWFkZXJzW1wiY29udGVudC10eXBlXCJdPVwiYXBwbGljYXRpb24vanNvblwifWNhdGNoKHQpe319dmFyIG09XCJodHRwczovL3d3dy5nb29nbGUuY29tL204L2ZlZWRzL2NvbnRhY3RzL2RlZmF1bHQvZnVsbD92PTMuMCZhbHQ9anNvbiZtYXgtcmVzdWx0cz1Ae2xpbWl0fDEwMDB9JnN0YXJ0LWluZGV4PUB7c3RhcnR8MX1cIjtlLmluaXQoe2dvb2dsZTp7bmFtZTpcIkdvb2dsZSBQbHVzXCIsb2F1dGg6e3ZlcnNpb246MixhdXRoOlwiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL2F1dGhcIixncmFudDpcImh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi90b2tlblwifSxzY29wZTp7YmFzaWM6XCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL3BsdXMubWUgcHJvZmlsZVwiLGVtYWlsOlwiZW1haWxcIixiaXJ0aGRheTpcIlwiLGV2ZW50czpcIlwiLHBob3RvczpcImh0dHBzOi8vcGljYXNhd2ViLmdvb2dsZS5jb20vZGF0YS9cIix2aWRlb3M6XCJodHRwOi8vZ2RhdGEueW91dHViZS5jb21cIixmcmllbmRzOlwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9tOC9mZWVkcywgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9wbHVzLmxvZ2luXCIsZmlsZXM6XCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2RyaXZlLnJlYWRvbmx5XCIscHVibGlzaDpcIlwiLHB1Ymxpc2hfZmlsZXM6XCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2RyaXZlXCIsc2hhcmU6XCJcIixjcmVhdGVfZXZlbnQ6XCJcIixvZmZsaW5lX2FjY2VzczpcIlwifSxzY29wZV9kZWxpbTpcIiBcIixsb2dpbjpmdW5jdGlvbihlKXtcImNvZGVcIj09PWUucXMucmVzcG9uc2VfdHlwZSYmKGUucXMuYWNjZXNzX3R5cGU9XCJvZmZsaW5lXCIpLGUub3B0aW9ucy5mb3JjZSYmKGUucXMuYXBwcm92YWxfcHJvbXB0PVwiZm9yY2VcIil9LGJhc2U6XCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9cIixnZXQ6e21lOlwicGx1cy92MS9wZW9wbGUvbWVcIixcIm1lL2ZyaWVuZHNcIjpcInBsdXMvdjEvcGVvcGxlL21lL3Blb3BsZS92aXNpYmxlP21heFJlc3VsdHM9QHtsaW1pdHwxMDB9XCIsXCJtZS9mb2xsb3dpbmdcIjptLFwibWUvZm9sbG93ZXJzXCI6bSxcIm1lL2NvbnRhY3RzXCI6bSxcIm1lL3NoYXJlXCI6XCJwbHVzL3YxL3Blb3BsZS9tZS9hY3Rpdml0aWVzL3B1YmxpYz9tYXhSZXN1bHRzPUB7bGltaXR8MTAwfVwiLFwibWUvZmVlZFwiOlwicGx1cy92MS9wZW9wbGUvbWUvYWN0aXZpdGllcy9wdWJsaWM/bWF4UmVzdWx0cz1Ae2xpbWl0fDEwMH1cIixcIm1lL2FsYnVtc1wiOlwiaHR0cHM6Ly9waWNhc2F3ZWIuZ29vZ2xlLmNvbS9kYXRhL2ZlZWQvYXBpL3VzZXIvZGVmYXVsdD9hbHQ9anNvbiZtYXgtcmVzdWx0cz1Ae2xpbWl0fDEwMH0mc3RhcnQtaW5kZXg9QHtzdGFydHwxfVwiLFwibWUvYWxidW1cIjpmdW5jdGlvbihlLHQpe3ZhciBuPWUucXVlcnkuaWQ7ZGVsZXRlIGUucXVlcnkuaWQsdChuLnJlcGxhY2UoXCIvZW50cnkvXCIsXCIvZmVlZC9cIikpfSxcIm1lL3Bob3Rvc1wiOlwiaHR0cHM6Ly9waWNhc2F3ZWIuZ29vZ2xlLmNvbS9kYXRhL2ZlZWQvYXBpL3VzZXIvZGVmYXVsdD9hbHQ9anNvbiZraW5kPXBob3RvJm1heC1yZXN1bHRzPUB7bGltaXR8MTAwfSZzdGFydC1pbmRleD1Ae3N0YXJ0fDF9XCIsXCJtZS9maWxlXCI6XCJkcml2ZS92Mi9maWxlcy9Ae2lkfVwiLFwibWUvZmlsZXNcIjpcImRyaXZlL3YyL2ZpbGVzP3E9JTIyQHtwYXJlbnR8cm9vdH0lMjIraW4rcGFyZW50cythbmQrdHJhc2hlZD1mYWxzZSZtYXhSZXN1bHRzPUB7bGltaXR8MTAwfVwiLFwibWUvZm9sZGVyc1wiOlwiZHJpdmUvdjIvZmlsZXM/cT0lMjJAe2lkfHJvb3R9JTIyK2luK3BhcmVudHMrYW5kK21pbWVUeXBlKz0rJTIyYXBwbGljYXRpb24vdm5kLmdvb2dsZS1hcHBzLmZvbGRlciUyMithbmQrdHJhc2hlZD1mYWxzZSZtYXhSZXN1bHRzPUB7bGltaXR8MTAwfVwiLFwibWUvZm9sZGVyXCI6XCJkcml2ZS92Mi9maWxlcz9xPSUyMkB7aWR8cm9vdH0lMjIraW4rcGFyZW50cythbmQrdHJhc2hlZD1mYWxzZSZtYXhSZXN1bHRzPUB7bGltaXR8MTAwfVwifSxwb3N0OntcIm1lL2ZpbGVzXCI6ZixcIm1lL2ZvbGRlcnNcIjpmdW5jdGlvbihlLHQpe2UuZGF0YT17dGl0bGU6ZS5kYXRhLm5hbWUscGFyZW50czpbe2lkOmUuZGF0YS5wYXJlbnR8fFwicm9vdFwifV0sbWltZVR5cGU6XCJhcHBsaWNhdGlvbi92bmQuZ29vZ2xlLWFwcHMuZm9sZGVyXCJ9LHQoXCJkcml2ZS92Mi9maWxlc1wiKX19LHB1dDp7XCJtZS9maWxlc1wiOmZ9LGRlbDp7XCJtZS9maWxlc1wiOlwiZHJpdmUvdjIvZmlsZXMvQHtpZH1cIixcIm1lL2ZvbGRlclwiOlwiZHJpdmUvdjIvZmlsZXMvQHtpZH1cIn0scGF0Y2g6e1wibWUvZmlsZVwiOlwiZHJpdmUvdjIvZmlsZXMvQHtpZH1cIn0sd3JhcDp7bWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaWQmJihlLmxhc3RfbmFtZT1lLmZhbWlseV9uYW1lfHwoZS5uYW1lP2UubmFtZS5mYW1pbHlOYW1lOm51bGwpLGUuZmlyc3RfbmFtZT1lLmdpdmVuX25hbWV8fChlLm5hbWU/ZS5uYW1lLmdpdmVuTmFtZTpudWxsKSxlLmVtYWlscyYmZS5lbWFpbHMubGVuZ3RoJiYoZS5lbWFpbD1lLmVtYWlsc1swXS52YWx1ZSkscyhlKSksZX0sXCJtZS9mcmllbmRzXCI6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaXRlbXMmJihjKGUpLGUuZGF0YT1lLml0ZW1zLGUuZGF0YS5mb3JFYWNoKHMpLGRlbGV0ZSBlLml0ZW1zKSxlfSxcIm1lL2NvbnRhY3RzXCI6bCxcIm1lL2ZvbGxvd2Vyc1wiOmwsXCJtZS9mb2xsb3dpbmdcIjpsLFwibWUvc2hhcmVcIjpuLFwibWUvZmVlZFwiOm4sXCJtZS9hbGJ1bXNcIjphLFwibWUvcGhvdG9zXCI6cixcImRlZmF1bHRcIjphfSx4aHI6ZnVuY3Rpb24odCl7cmV0dXJuXCJwb3N0XCI9PT10Lm1ldGhvZHx8XCJwdXRcIj09PXQubWV0aG9kP3AodCk6XCJwYXRjaFwiPT09dC5tZXRob2QmJihlLnV0aWxzLmV4dGVuZCh0LnF1ZXJ5LHQuZGF0YSksdC5kYXRhPW51bGwpLCEwfSxmb3JtOiExfX0pfShoZWxsbyksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXtyZXR1cm57c291cmNlOmUudXJsLHdpZHRoOmUud2lkdGgsaGVpZ2h0OmUuaGVpZ2h0fX1mdW5jdGlvbiBuKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlP3tlcnJvcjp7Y29kZTpcImludmFsaWRfcmVxdWVzdFwiLG1lc3NhZ2U6ZX19OihlJiZcIm1ldGFcImluIGUmJlwiZXJyb3JfdHlwZVwiaW4gZS5tZXRhJiYoZS5lcnJvcj17Y29kZTplLm1ldGEuZXJyb3JfdHlwZSxtZXNzYWdlOmUubWV0YS5lcnJvcl9tZXNzYWdlfSksZSl9ZnVuY3Rpb24gbyhlKXtyZXR1cm4gcihlKSxlJiZcImRhdGFcImluIGUmJmUuZGF0YS5mb3JFYWNoKGkpLGV9ZnVuY3Rpb24gaShlKXtlLmlkJiYoZS50aHVtYm5haWw9ZS5wcm9maWxlX3BpY3R1cmUsZS5uYW1lPWUuZnVsbF9uYW1lfHxlLnVzZXJuYW1lKX1mdW5jdGlvbiByKGUpe1wicGFnaW5hdGlvblwiaW4gZSYmKGUucGFnaW5nPXtuZXh0OmUucGFnaW5hdGlvbi5uZXh0X3VybH0sZGVsZXRlIGUucGFnaW5hdGlvbil9ZS5pbml0KHtpbnN0YWdyYW06e25hbWU6XCJJbnN0YWdyYW1cIixvYXV0aDp7dmVyc2lvbjoyLGF1dGg6XCJodHRwczovL2luc3RhZ3JhbS5jb20vb2F1dGgvYXV0aG9yaXplL1wiLGdyYW50OlwiaHR0cHM6Ly9hcGkuaW5zdGFncmFtLmNvbS9vYXV0aC9hY2Nlc3NfdG9rZW5cIn0scmVmcmVzaDohMCxzY29wZTp7YmFzaWM6XCJiYXNpY1wiLHBob3RvczpcIlwiLGZyaWVuZHM6XCJyZWxhdGlvbnNoaXBzXCIscHVibGlzaDpcImxpa2VzIGNvbW1lbnRzXCIsZW1haWw6XCJcIixzaGFyZTpcIlwiLHB1Ymxpc2hfZmlsZXM6XCJcIixmaWxlczpcIlwiLHZpZGVvczpcIlwiLG9mZmxpbmVfYWNjZXNzOlwiXCJ9LHNjb3BlX2RlbGltOlwiIFwiLGJhc2U6XCJodHRwczovL2FwaS5pbnN0YWdyYW0uY29tL3YxL1wiLGdldDp7bWU6XCJ1c2Vycy9zZWxmXCIsXCJtZS9mZWVkXCI6XCJ1c2Vycy9zZWxmL2ZlZWQ/Y291bnQ9QHtsaW1pdHwxMDB9XCIsXCJtZS9waG90b3NcIjpcInVzZXJzL3NlbGYvbWVkaWEvcmVjZW50P21pbl9pZD0wJmNvdW50PUB7bGltaXR8MTAwfVwiLFwibWUvZnJpZW5kc1wiOlwidXNlcnMvc2VsZi9mb2xsb3dzP2NvdW50PUB7bGltaXR8MTAwfVwiLFwibWUvZm9sbG93aW5nXCI6XCJ1c2Vycy9zZWxmL2ZvbGxvd3M/Y291bnQ9QHtsaW1pdHwxMDB9XCIsXCJtZS9mb2xsb3dlcnNcIjpcInVzZXJzL3NlbGYvZm9sbG93ZWQtYnk/Y291bnQ9QHtsaW1pdHwxMDB9XCIsXCJmcmllbmQvcGhvdG9zXCI6XCJ1c2Vycy9Ae2lkfS9tZWRpYS9yZWNlbnQ/bWluX2lkPTAmY291bnQ9QHtsaW1pdHwxMDB9XCJ9LHBvc3Q6e1wibWUvbGlrZVwiOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5kYXRhLmlkO2UuZGF0YT17fSx0KFwibWVkaWEvXCIrbitcIi9saWtlc1wiKX19LGRlbDp7XCJtZS9saWtlXCI6XCJtZWRpYS9Ae2lkfS9saWtlc1wifSx3cmFwOnttZTpmdW5jdGlvbihlKXtyZXR1cm4gbihlKSxcImRhdGFcImluIGUmJihlLmlkPWUuZGF0YS5pZCxlLnRodW1ibmFpbD1lLmRhdGEucHJvZmlsZV9waWN0dXJlLGUubmFtZT1lLmRhdGEuZnVsbF9uYW1lfHxlLmRhdGEudXNlcm5hbWUpLGV9LFwibWUvZnJpZW5kc1wiOm8sXCJtZS9mb2xsb3dpbmdcIjpvLFwibWUvZm9sbG93ZXJzXCI6byxcIm1lL3Bob3Rvc1wiOmZ1bmN0aW9uKGUpe3JldHVybiBuKGUpLHIoZSksXCJkYXRhXCJpbiBlJiYoZS5kYXRhPWUuZGF0YS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJpbWFnZVwiPT09ZS50eXBlfSksZS5kYXRhLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5uYW1lPWUuY2FwdGlvbj9lLmNhcHRpb24udGV4dDpudWxsLGUudGh1bWJuYWlsPWUuaW1hZ2VzLnRodW1ibmFpbC51cmwsZS5waWN0dXJlPWUuaW1hZ2VzLnN0YW5kYXJkX3Jlc29sdXRpb24udXJsLGUucGljdHVyZXM9T2JqZWN0LmtleXMoZS5pbWFnZXMpLm1hcChmdW5jdGlvbihuKXt2YXIgbz1lLmltYWdlc1tuXTtyZXR1cm4gdChvKX0pLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS53aWR0aC10LndpZHRofSl9KSksZX0sXCJkZWZhdWx0XCI6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9bihlKSxyKGUpLGV9fSx4aHI6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLm1ldGhvZCxvPVwiZ2V0XCIhPT1uO3JldHVybiBvJiYoXCJwb3N0XCIhPT1uJiZcInB1dFwiIT09bnx8IWUucXVlcnkuYWNjZXNzX3Rva2VufHwoZS5kYXRhLmFjY2Vzc190b2tlbj1lLnF1ZXJ5LmFjY2Vzc190b2tlbixkZWxldGUgZS5xdWVyeS5hY2Nlc3NfdG9rZW4pLGUucHJveHk9byksb30sZm9ybTohMX19KX0oaGVsbG8pLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXt2YXIgbixpO3JldHVybiBlJiZcIk1lc3NhZ2VcImluIGUmJihpPWUuTWVzc2FnZSxkZWxldGUgZS5NZXNzYWdlLFwiRXJyb3JDb2RlXCJpbiBlPyhuPWUuRXJyb3JDb2RlLGRlbGV0ZSBlLkVycm9yQ29kZSk6bj1vKHQpLGUuZXJyb3I9e2NvZGU6bixtZXNzYWdlOmksZGV0YWlsczplfSksZX1mdW5jdGlvbiBuKGUsdCl7dmFyIG49dC5hY2Nlc3NfdG9rZW47cmV0dXJuIGRlbGV0ZSB0LmFjY2Vzc190b2tlbixlLmhlYWRlcnMuQXV0aG9yaXphdGlvbj1cIkJlYXJlciBcIituLFwiZ2V0XCIhPT1lLm1ldGhvZCYmZS5kYXRhJiYoZS5oZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdPVwiYXBwbGljYXRpb24vanNvblwiLFwib2JqZWN0XCI9PXR5cGVvZiBlLmRhdGEmJihlLmRhdGE9SlNPTi5zdHJpbmdpZnkoZS5kYXRhKSkpLFwicHV0XCI9PT1lLm1ldGhvZCYmKGUubWV0aG9kPVwicGF0Y2hcIiksITB9ZnVuY3Rpb24gbyhlKXtzd2l0Y2goZS5zdGF0dXNDb2RlKXtjYXNlIDQwMDpyZXR1cm5cImludmFsaWRfcmVxdWVzdFwiO2Nhc2UgNDAzOnJldHVyblwic3RhbGVfdG9rZW5cIjtjYXNlIDQwMTpyZXR1cm5cImludmFsaWRfdG9rZW5cIjtjYXNlIDUwMDpyZXR1cm5cInNlcnZlcl9lcnJvclwiO2RlZmF1bHQ6cmV0dXJuXCJzZXJ2ZXJfZXJyb3JcIn19ZS5pbml0KHtqb2lubWU6e25hbWU6XCJqb2luLm1lXCIsb2F1dGg6e3ZlcnNpb246MixhdXRoOlwiaHR0cHM6Ly9zZWN1cmUuam9pbi5tZS9hcGkvcHVibGljL3YxL2F1dGgvb2F1dGgyXCIsZ3JhbnQ6XCJodHRwczovL3NlY3VyZS5qb2luLm1lL2FwaS9wdWJsaWMvdjEvYXV0aC9vYXV0aDJcIn0scmVmcmVzaDohMSxzY29wZTp7YmFzaWM6XCJ1c2VyX2luZm9cIix1c2VyOlwidXNlcl9pbmZvXCIsc2NoZWR1bGVyOlwic2NoZWR1bGVyXCIsc3RhcnQ6XCJzdGFydF9tZWV0aW5nXCIsZW1haWw6XCJcIixmcmllbmRzOlwiXCIsc2hhcmU6XCJcIixwdWJsaXNoOlwiXCIscGhvdG9zOlwiXCIscHVibGlzaF9maWxlczpcIlwiLGZpbGVzOlwiXCIsdmlkZW9zOlwiXCIsb2ZmbGluZV9hY2Nlc3M6XCJcIn0sc2NvcGVfZGVsaW06XCIgXCIsbG9naW46ZnVuY3Rpb24oZSl7ZS5vcHRpb25zLnBvcHVwLndpZHRoPTQwMCxlLm9wdGlvbnMucG9wdXAuaGVpZ2h0PTcwMH0sYmFzZTpcImh0dHBzOi8vYXBpLmpvaW4ubWUvdjEvXCIsZ2V0OnttZTpcInVzZXJcIixtZWV0aW5nczpcIm1lZXRpbmdzXCIsXCJtZWV0aW5ncy9pbmZvXCI6XCJtZWV0aW5ncy9Ae2lkfVwifSxwb3N0OntcIm1lZXRpbmdzL3N0YXJ0L2FkaG9jXCI6ZnVuY3Rpb24oZSx0KXt0KFwibWVldGluZ3Mvc3RhcnRcIil9LFwibWVldGluZ3Mvc3RhcnQvc2NoZWR1bGVkXCI6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmRhdGEubWVldGluZ0lkO2UuZGF0YT17fSx0KFwibWVldGluZ3MvXCIrbitcIi9zdGFydFwiKX0sXCJtZWV0aW5ncy9zY2hlZHVsZVwiOmZ1bmN0aW9uKGUsdCl7dChcIm1lZXRpbmdzXCIpfX0scGF0Y2g6e1wibWVldGluZ3MvdXBkYXRlXCI6ZnVuY3Rpb24oZSx0KXt0KFwibWVldGluZ3MvXCIrZS5kYXRhLm1lZXRpbmdJZCl9fSxkZWw6e1wibWVldGluZ3MvZGVsZXRlXCI6XCJtZWV0aW5ncy9Ae2lkfVwifSx3cmFwOnttZTpmdW5jdGlvbihlLG4pe3JldHVybiB0KGUsbiksZS5lbWFpbD8oZS5uYW1lPWUuZnVsbE5hbWUsZS5maXJzdF9uYW1lPWUubmFtZS5zcGxpdChcIiBcIilbMF0sZS5sYXN0X25hbWU9ZS5uYW1lLnNwbGl0KFwiIFwiKVsxXSxlLmlkPWUuZW1haWwsZSk6ZX0sXCJkZWZhdWx0XCI6ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdChlLG4pLGV9fSx4aHI6bn19KX0oaGVsbG8pLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7ZSYmXCJlcnJvckNvZGVcImluIGUmJihlLmVycm9yPXtjb2RlOmUuc3RhdHVzLG1lc3NhZ2U6ZS5tZXNzYWdlfSl9ZnVuY3Rpb24gbihlKXtyZXR1cm4gZS5lcnJvcj92b2lkIDA6KGUuZmlyc3RfbmFtZT1lLmZpcnN0TmFtZSxlLmxhc3RfbmFtZT1lLmxhc3ROYW1lLGUubmFtZT1lLmZvcm1hdHRlZE5hbWV8fGUuZmlyc3RfbmFtZStcIiBcIitlLmxhc3RfbmFtZSxlLnRodW1ibmFpbD1lLnBpY3R1cmVVcmwsZS5lbWFpbD1lLmVtYWlsQWRkcmVzcyxlKX1mdW5jdGlvbiBvKGUpe3JldHVybiB0KGUpLGkoZSksZS52YWx1ZXMmJihlLmRhdGE9ZS52YWx1ZXMubWFwKG4pLGRlbGV0ZSBlLnZhbHVlcyksZX1mdW5jdGlvbiBpKGUpe1wiX2NvdW50XCJpbiBlJiZcIl9zdGFydFwiaW4gZSYmZS5fY291bnQrZS5fc3RhcnQ8ZS5fdG90YWwmJihlLnBhZ2luZz17bmV4dDpcIj9zdGFydD1cIisoZS5fc3RhcnQrZS5fY291bnQpK1wiJmNvdW50PVwiK2UuX2NvdW50fSl9ZnVuY3Rpb24gcihlLHQpe1wie31cIj09PUpTT04uc3RyaW5naWZ5KGUpJiYyMDA9PT10LnN0YXR1c0NvZGUmJihlLnN1Y2Nlc3M9ITApfWZ1bmN0aW9uIGEoZSl7ZS5hY2Nlc3NfdG9rZW4mJihlLm9hdXRoMl9hY2Nlc3NfdG9rZW49ZS5hY2Nlc3NfdG9rZW4sZGVsZXRlIGUuYWNjZXNzX3Rva2VuKX1mdW5jdGlvbiBzKGUsdCl7ZS5oZWFkZXJzW1wieC1saS1mb3JtYXRcIl09XCJqc29uXCI7dmFyIG49ZS5kYXRhLmlkO2UuZGF0YT0oXCJkZWxldGVcIiE9PWUubWV0aG9kKS50b1N0cmluZygpLGUubWV0aG9kPVwicHV0XCIsdChcInBlb3BsZS9+L25ldHdvcmsvdXBkYXRlcy9rZXk9XCIrbitcIi9pcy1saWtlZFwiKX1lLmluaXQoe2xpbmtlZGluOntvYXV0aDp7dmVyc2lvbjoyLHJlc3BvbnNlX3R5cGU6XCJjb2RlXCIsYXV0aDpcImh0dHBzOi8vd3d3LmxpbmtlZGluLmNvbS91YXMvb2F1dGgyL2F1dGhvcml6YXRpb25cIixncmFudDpcImh0dHBzOi8vd3d3LmxpbmtlZGluLmNvbS91YXMvb2F1dGgyL2FjY2Vzc1Rva2VuXCJ9LHJlZnJlc2g6ITAsc2NvcGU6e2Jhc2ljOlwicl9iYXNpY3Byb2ZpbGVcIixlbWFpbDpcInJfZW1haWxhZGRyZXNzXCIsZmlsZXM6XCJcIixmcmllbmRzOlwiXCIscGhvdG9zOlwiXCIscHVibGlzaDpcIndfc2hhcmVcIixwdWJsaXNoX2ZpbGVzOlwid19zaGFyZVwiLHNoYXJlOlwiXCIsdmlkZW9zOlwiXCIsb2ZmbGluZV9hY2Nlc3M6XCJcIn0sc2NvcGVfZGVsaW06XCIgXCIsYmFzZTpcImh0dHBzOi8vYXBpLmxpbmtlZGluLmNvbS92MS9cIixnZXQ6e21lOlwicGVvcGxlL346KHBpY3R1cmUtdXJsLGZpcnN0LW5hbWUsbGFzdC1uYW1lLGlkLGZvcm1hdHRlZC1uYW1lLGVtYWlsLWFkZHJlc3MpXCIsXCJtZS9zaGFyZVwiOlwicGVvcGxlL34vbmV0d29yay91cGRhdGVzP2NvdW50PUB7bGltaXR8MjUwfVwifSxwb3N0OntcIm1lL3NoYXJlXCI6ZnVuY3Rpb24oZSx0KXt2YXIgbj17dmlzaWJpbGl0eTp7Y29kZTpcImFueW9uZVwifX07ZS5kYXRhLmlkP24uYXR0cmlidXRpb249e3NoYXJlOntpZDplLmRhdGEuaWR9fToobi5jb21tZW50PWUuZGF0YS5tZXNzYWdlLGUuZGF0YS5waWN0dXJlJiZlLmRhdGEubGluayYmKG4uY29udGVudD17XCJzdWJtaXR0ZWQtdXJsXCI6ZS5kYXRhLmxpbmssXCJzdWJtaXR0ZWQtaW1hZ2UtdXJsXCI6ZS5kYXRhLnBpY3R1cmV9KSksZS5kYXRhPUpTT04uc3RyaW5naWZ5KG4pLHQoXCJwZW9wbGUvfi9zaGFyZXM/Zm9ybWF0PWpzb25cIil9LFwibWUvbGlrZVwiOnN9LGRlbDp7XCJtZS9saWtlXCI6c30sd3JhcDp7bWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSksbihlKSxlfSxcIm1lL2ZyaWVuZHNcIjpvLFwibWUvZm9sbG93aW5nXCI6byxcIm1lL2ZvbGxvd2Vyc1wiOm8sXCJtZS9zaGFyZVwiOmZ1bmN0aW9uKGUpe3JldHVybiB0KGUpLGkoZSksZS52YWx1ZXMmJihlLmRhdGE9ZS52YWx1ZXMubWFwKG4pLGUuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UubWVzc2FnZT1lLmhlYWRsaW5lfSksZGVsZXRlIGUudmFsdWVzKSxlfSxcImRlZmF1bHRcIjpmdW5jdGlvbihlLG4pe3QoZSkscihlLG4pLGkoZSl9fSxqc29ucDpmdW5jdGlvbihlLHQpe2EodCksXCJnZXRcIj09PWUubWV0aG9kJiYodC5mb3JtYXQ9XCJqc29ucFwiLHRbXCJlcnJvci1jYWxsYmFja1wiXT1lLmNhbGxiYWNrSUQpfSx4aHI6ZnVuY3Rpb24oZSx0KXtyZXR1cm5cImdldFwiIT09ZS5tZXRob2Q/KGEodCksZS5oZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdPVwiYXBwbGljYXRpb24vanNvblwiLGUuaGVhZGVyc1tcIngtbGktZm9ybWF0XCJdPVwianNvblwiLGUucHJveHk9ITAsITApOiExfX19KX0oaGVsbG8pLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXt2YXIgbj10LmFjY2Vzc190b2tlbjtyZXR1cm4gZGVsZXRlIHQuYWNjZXNzX3Rva2VuLHQub2F1dGhfdG9rZW49bix0W1wiX3N0YXR1c19jb2RlX21hcFszMDJdXCJdPTIwMCwhMH1mdW5jdGlvbiBuKGUpe3JldHVybiBlLmlkJiYoZS5waWN0dXJlPWUuYXZhdGFyX3VybCxlLnRodW1ibmFpbD1lLmF2YXRhcl91cmwsZS5uYW1lPWUudXNlcm5hbWV8fGUuZnVsbF9uYW1lKSxlfWZ1bmN0aW9uIG8oZSl7XCJuZXh0X2hyZWZcImluIGUmJihlLnBhZ2luZz17bmV4dDplLm5leHRfaHJlZn0pfWUuaW5pdCh7c291bmRjbG91ZDp7bmFtZTpcIlNvdW5kQ2xvdWRcIixvYXV0aDp7dmVyc2lvbjoyLGF1dGg6XCJodHRwczovL3NvdW5kY2xvdWQuY29tL2Nvbm5lY3RcIixncmFudDpcImh0dHBzOi8vc291bmRjbG91ZC5jb20vb2F1dGgyL3Rva2VuXCJ9LGJhc2U6XCJodHRwczovL2FwaS5zb3VuZGNsb3VkLmNvbS9cIixnZXQ6e21lOlwibWUuanNvblwiLFwibWUvZnJpZW5kc1wiOlwibWUvZm9sbG93aW5ncy5qc29uXCIsXCJtZS9mb2xsb3dlcnNcIjpcIm1lL2ZvbGxvd2Vycy5qc29uXCIsXCJtZS9mb2xsb3dpbmdcIjpcIm1lL2ZvbGxvd2luZ3MuanNvblwiLFwiZGVmYXVsdFwiOmZ1bmN0aW9uKGUsdCl7dChlLnBhdGgrXCIuanNvblwiKX19LHdyYXA6e21lOmZ1bmN0aW9uKGUpe3JldHVybiBuKGUpLGV9LFwiZGVmYXVsdFwiOmZ1bmN0aW9uKGUpe3JldHVybiBBcnJheS5pc0FycmF5KGUpJiYoZT17ZGF0YTplLm1hcChuKX0pLG8oZSksZX19LHhocjp0LGpzb25wOnR9fSl9KGhlbGxvKSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe2lmKGUuaWQpe2lmKGUubmFtZSl7dmFyIHQ9ZS5uYW1lLnNwbGl0KFwiIFwiKTtlLmZpcnN0X25hbWU9dC5zaGlmdCgpLGUubGFzdF9uYW1lPXQuam9pbihcIiBcIil9ZS50aHVtYm5haWw9ZS5wcm9maWxlX2ltYWdlX3VybF9odHRwc3x8ZS5wcm9maWxlX2ltYWdlX3VybH1yZXR1cm4gZX1mdW5jdGlvbiBuKGUpe3JldHVybiBvKGUpLGkoZSksZS51c2VycyYmKGUuZGF0YT1lLnVzZXJzLm1hcCh0KSxkZWxldGUgZS51c2VycyksZX1mdW5jdGlvbiBvKGUpe2lmKGUuZXJyb3JzKXt2YXIgdD1lLmVycm9yc1swXTtlLmVycm9yPXtjb2RlOlwicmVxdWVzdF9mYWlsZWRcIixtZXNzYWdlOnQubWVzc2FnZX19fWZ1bmN0aW9uIGkoZSl7XCJuZXh0X2N1cnNvcl9zdHJcImluIGUmJihlLnBhZ2luZz17bmV4dDpcIj9jdXJzb3I9XCIrZS5uZXh0X2N1cnNvcl9zdHJ9KX1mdW5jdGlvbiByKGUpe3JldHVybiBBcnJheS5pc0FycmF5KGUpP3tkYXRhOmV9OmV9dmFyIGE9XCJodHRwczovL2FwaS50d2l0dGVyLmNvbS9cIjtlLmluaXQoe3R3aXR0ZXI6e29hdXRoOnt2ZXJzaW9uOlwiMS4wYVwiLGF1dGg6YStcIm9hdXRoL2F1dGhlbnRpY2F0ZVwiLHJlcXVlc3Q6YStcIm9hdXRoL3JlcXVlc3RfdG9rZW5cIix0b2tlbjphK1wib2F1dGgvYWNjZXNzX3Rva2VuXCJ9LGxvZ2luOmZ1bmN0aW9uKGUpe3ZhciB0PVwiP2ZvcmNlX2xvZ2luPXRydWVcIjt0aGlzLm9hdXRoLmF1dGg9dGhpcy5vYXV0aC5hdXRoLnJlcGxhY2UodCxcIlwiKSsoZS5vcHRpb25zLmZvcmNlP3Q6XCJcIil9LGJhc2U6YStcIjEuMS9cIixnZXQ6e21lOlwiYWNjb3VudC92ZXJpZnlfY3JlZGVudGlhbHMuanNvblwiLFwibWUvZnJpZW5kc1wiOlwiZnJpZW5kcy9saXN0Lmpzb24/Y291bnQ9QHtsaW1pdHwyMDB9XCIsXCJtZS9mb2xsb3dpbmdcIjpcImZyaWVuZHMvbGlzdC5qc29uP2NvdW50PUB7bGltaXR8MjAwfVwiLFwibWUvZm9sbG93ZXJzXCI6XCJmb2xsb3dlcnMvbGlzdC5qc29uP2NvdW50PUB7bGltaXR8MjAwfVwiLFwibWUvc2hhcmVcIjpcInN0YXR1c2VzL3VzZXJfdGltZWxpbmUuanNvbj9jb3VudD1Ae2xpbWl0fDIwMH1cIixcIm1lL2xpa2VcIjpcImZhdm9yaXRlcy9saXN0Lmpzb24/Y291bnQ9QHtsaW1pdHwyMDB9XCJ9LHBvc3Q6e1wibWUvc2hhcmVcIjpmdW5jdGlvbih0LG4pe3ZhciBvPXQuZGF0YTt0LmRhdGE9bnVsbDt2YXIgaT1bXTtvLm1lc3NhZ2UmJihpLnB1c2goby5tZXNzYWdlKSxkZWxldGUgby5tZXNzYWdlKSxvLmxpbmsmJihpLnB1c2goby5saW5rKSxkZWxldGUgby5saW5rKSxvLnBpY3R1cmUmJihpLnB1c2goby5waWN0dXJlKSxkZWxldGUgby5waWN0dXJlKSxpLmxlbmd0aCYmKG8uc3RhdHVzPWkuam9pbihcIiBcIikpLG8uZmlsZT8ob1tcIm1lZGlhW11cIl09by5maWxlLGRlbGV0ZSBvLmZpbGUsdC5kYXRhPW8sbihcInN0YXR1c2VzL3VwZGF0ZV93aXRoX21lZGlhLmpzb25cIikpOlwiaWRcImluIG8/bihcInN0YXR1c2VzL3JldHdlZXQvXCIrby5pZCtcIi5qc29uXCIpOihlLnV0aWxzLmV4dGVuZCh0LnF1ZXJ5LG8pLG4oXCJzdGF0dXNlcy91cGRhdGUuanNvbj9pbmNsdWRlX2VudGl0aWVzPTFcIikpfSxcIm1lL2xpa2VcIjpmdW5jdGlvbihlLHQpe3ZhciBuPWUuZGF0YS5pZDtlLmRhdGE9bnVsbCx0KFwiZmF2b3JpdGVzL2NyZWF0ZS5qc29uP2lkPVwiK24pfX0sZGVsOntcIm1lL2xpa2VcIjpmdW5jdGlvbigpe3AubWV0aG9kPVwicG9zdFwiO3ZhciBlPXAuZGF0YS5pZDtwLmRhdGE9bnVsbCxjYWxsYmFjayhcImZhdm9yaXRlcy9kZXN0cm95Lmpzb24/aWQ9XCIrZSl9fSx3cmFwOnttZTpmdW5jdGlvbihlKXtyZXR1cm4gbyhlKSx0KGUpLGV9LFwibWUvZnJpZW5kc1wiOm4sXCJtZS9mb2xsb3dlcnNcIjpuLFwibWUvZm9sbG93aW5nXCI6bixcIm1lL3NoYXJlXCI6ZnVuY3Rpb24oZSl7cmV0dXJuIG8oZSksaShlKSwhZS5lcnJvciYmXCJsZW5ndGhcImluIGU/e2RhdGE6ZX06ZX0sXCJkZWZhdWx0XCI6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9cihlKSxpKGUpLGV9fSx4aHI6ZnVuY3Rpb24oZSl7cmV0dXJuXCJnZXRcIiE9PWUubWV0aG9kfX19KX0oaGVsbG8pLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXtyZXR1cm4gbnVsbCE9PWUmJlwicmVzcG9uc2VcImluIGUmJm51bGwhPT1lLnJlc3BvbnNlJiZlLnJlc3BvbnNlLmxlbmd0aCYmKGU9ZS5yZXNwb25zZVswXSxlLmlkPWUudWlkLGUudGh1bWJuYWlsPWUucGljdHVyZT1lLnBob3RvX21heCxlLm5hbWU9ZS5maXJzdF9uYW1lK1wiIFwiK2UubGFzdF9uYW1lLHQuYXV0aFJlc3BvbnNlJiZudWxsIT09dC5hdXRoUmVzcG9uc2UuZW1haWwmJihlLmVtYWlsPXQuYXV0aFJlc3BvbnNlLmVtYWlsKSksZX1mdW5jdGlvbiBuKGUpe2lmKGUuZXJyb3Ipe3ZhciB0PWUuZXJyb3I7ZS5lcnJvcj17Y29kZTp0LmVycm9yX2NvZGUsbWVzc2FnZTp0LmVycm9yX21zZ319fWUuaW5pdCh7dms6e25hbWU6XCJWa1wiLG9hdXRoOnt2ZXJzaW9uOjIsYXV0aDpcImh0dHBzOi8vb2F1dGgudmsuY29tL2F1dGhvcml6ZVwiLGdyYW50OlwiaHR0cHM6Ly9vYXV0aC52ay5jb20vYWNjZXNzX3Rva2VuXCJ9LHNjb3BlOntlbWFpbDpcImVtYWlsXCIsZnJpZW5kczpcImZyaWVuZHNcIixwaG90b3M6XCJwaG90b3NcIix2aWRlb3M6XCJ2aWRlb1wiLHNoYXJlOlwic2hhcmVcIixvZmZsaW5lX2FjY2VzczpcIm9mZmxpbmVcIn0scmVmcmVzaDohMCxsb2dpbjpmdW5jdGlvbihlKXtlLnFzLmRpc3BsYXk9d2luZG93Lm5hdmlnYXRvciYmd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQmJi9pcGFkfHBob25lfHBob25lfGFuZHJvaWQvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk/XCJtb2JpbGVcIjpcInBvcHVwXCJ9LGJhc2U6XCJodHRwczovL2FwaS52ay5jb20vbWV0aG9kL1wiLGdldDp7bWU6ZnVuY3Rpb24oZSx0KXtlLnF1ZXJ5LmZpZWxkcz1cImlkLGZpcnN0X25hbWUsbGFzdF9uYW1lLHBob3RvX21heFwiLHQoXCJ1c2Vycy5nZXRcIil9fSx3cmFwOnttZTpmdW5jdGlvbihlLG8saSl7cmV0dXJuIG4oZSksdChlLGkpfX0seGhyOiExLGpzb25wOiEwLGZvcm06ITF9fSl9KGhlbGxvKSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3JldHVyblwiZGF0YVwiaW4gZSYmZS5kYXRhLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5waWN0dXJlJiYoZS50aHVtYm5haWw9ZS5waWN0dXJlKSxlLmltYWdlcyYmKGUucGljdHVyZXM9ZS5pbWFnZXMubWFwKG4pLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS53aWR0aC10LndpZHRofSkpfSksZX1mdW5jdGlvbiBuKGUpe3JldHVybnt3aWR0aDplLndpZHRoLGhlaWdodDplLmhlaWdodCxzb3VyY2U6ZS5zb3VyY2V9fWZ1bmN0aW9uIG8oZSl7cmV0dXJuXCJkYXRhXCJpbiBlJiZlLmRhdGEuZm9yRWFjaChmdW5jdGlvbihlKXtlLnBob3Rvcz1lLmZpbGVzPVwiaHR0cHM6Ly9hcGlzLmxpdmUubmV0L3Y1LjAvXCIrZS5pZCtcIi9waG90b3NcIn0pLGV9ZnVuY3Rpb24gaShlLHQsbil7aWYoZS5pZCl7dmFyIG89bi5xdWVyeS5hY2Nlc3NfdG9rZW47aWYoZS5lbWFpbHMmJihlLmVtYWlsPWUuZW1haWxzLnByZWZlcnJlZCksZS5pc19mcmllbmQhPT0hMSl7dmFyIGk9ZS51c2VyX2lkfHxlLmlkO2UudGh1bWJuYWlsPWUucGljdHVyZT1cImh0dHBzOi8vYXBpcy5saXZlLm5ldC92NS4wL1wiK2krXCIvcGljdHVyZT9hY2Nlc3NfdG9rZW49XCIrb319cmV0dXJuIGV9ZnVuY3Rpb24gcihlLHQsbil7cmV0dXJuXCJkYXRhXCJpbiBlJiZlLmRhdGEuZm9yRWFjaChmdW5jdGlvbihlKXtpKGUsdCxuKX0pLGV9ZS5pbml0KHt3aW5kb3dzOntuYW1lOlwiV2luZG93cyBsaXZlXCIsb2F1dGg6e3ZlcnNpb246MixhdXRoOlwiaHR0cHM6Ly9sb2dpbi5saXZlLmNvbS9vYXV0aDIwX2F1dGhvcml6ZS5zcmZcIixncmFudDpcImh0dHBzOi8vbG9naW4ubGl2ZS5jb20vb2F1dGgyMF90b2tlbi5zcmZcIn0scmVmcmVzaDohMCxsb2dvdXQ6ZnVuY3Rpb24oKXtyZXR1cm5cImh0dHA6Ly9sb2dpbi5saXZlLmNvbS9vYXV0aDIwX2xvZ291dC5zcmY/dHM9XCIrKG5ldyBEYXRlKS5nZXRUaW1lKCl9LHNjb3BlOntiYXNpYzpcIndsLnNpZ25pbix3bC5iYXNpY1wiLGVtYWlsOlwid2wuZW1haWxzXCIsYmlydGhkYXk6XCJ3bC5iaXJ0aGRheVwiLGV2ZW50czpcIndsLmNhbGVuZGFyc1wiLHBob3RvczpcIndsLnBob3Rvc1wiLHZpZGVvczpcIndsLnBob3Rvc1wiLGZyaWVuZHM6XCJ3bC5jb250YWN0c19lbWFpbHNcIixmaWxlczpcIndsLnNreWRyaXZlXCIscHVibGlzaDpcIndsLnNoYXJlXCIscHVibGlzaF9maWxlczpcIndsLnNreWRyaXZlX3VwZGF0ZVwiLHNoYXJlOlwid2wuc2hhcmVcIixjcmVhdGVfZXZlbnQ6XCJ3bC5jYWxlbmRhcnNfdXBkYXRlLHdsLmV2ZW50c19jcmVhdGVcIixvZmZsaW5lX2FjY2VzczpcIndsLm9mZmxpbmVfYWNjZXNzXCJ9LGJhc2U6XCJodHRwczovL2FwaXMubGl2ZS5uZXQvdjUuMC9cIixnZXQ6e21lOlwibWVcIixcIm1lL2ZyaWVuZHNcIjpcIm1lL2ZyaWVuZHNcIixcIm1lL2ZvbGxvd2luZ1wiOlwibWUvY29udGFjdHNcIixcIm1lL2ZvbGxvd2Vyc1wiOlwibWUvZnJpZW5kc1wiLFwibWUvY29udGFjdHNcIjpcIm1lL2NvbnRhY3RzXCIsXCJtZS9hbGJ1bXNcIjpcIm1lL2FsYnVtc1wiLFwibWUvYWxidW1cIjpcIkB7aWR9L2ZpbGVzXCIsXCJtZS9waG90b1wiOlwiQHtpZH1cIixcIm1lL2ZpbGVzXCI6XCJAe3BhcmVudHxtZS9za3lkcml2ZX0vZmlsZXNcIixcIm1lL2ZvbGRlcnNcIjpcIkB7aWR8bWUvc2t5ZHJpdmV9L2ZpbGVzXCIsXCJtZS9mb2xkZXJcIjpcIkB7aWR8bWUvc2t5ZHJpdmV9L2ZpbGVzXCJ9LHBvc3Q6e1wibWUvYWxidW1zXCI6XCJtZS9hbGJ1bXNcIixcIm1lL2FsYnVtXCI6XCJAe2lkfS9maWxlcy9cIixcIm1lL2ZvbGRlcnNcIjpcIkB7aWR8bWUvc2t5ZHJpdmUvfVwiLFwibWUvZmlsZXNcIjpcIkB7cGFyZW50fG1lL3NreWRyaXZlfS9maWxlc1wifSxkZWw6e1wibWUvYWxidW1cIjpcIkB7aWR9XCIsXCJtZS9waG90b1wiOlwiQHtpZH1cIixcIm1lL2ZvbGRlclwiOlwiQHtpZH1cIixcIm1lL2ZpbGVzXCI6XCJAe2lkfVwifSx3cmFwOnttZTppLFwibWUvZnJpZW5kc1wiOnIsXCJtZS9jb250YWN0c1wiOnIsXCJtZS9mb2xsb3dlcnNcIjpyLFwibWUvZm9sbG93aW5nXCI6cixcIm1lL2FsYnVtc1wiOm8sXCJtZS9waG90b3NcIjp0LFwiZGVmYXVsdFwiOnR9LHhocjpmdW5jdGlvbih0KXtyZXR1cm5cImdldFwiPT09dC5tZXRob2R8fFwiZGVsZXRlXCI9PT10Lm1ldGhvZHx8ZS51dGlscy5oYXNCaW5hcnkodC5kYXRhKXx8KFwic3RyaW5nXCI9PXR5cGVvZiB0LmRhdGEuZmlsZT90LmRhdGEuZmlsZT1lLnV0aWxzLnRvQmxvYih0LmRhdGEuZmlsZSk6KHQuZGF0YT1KU09OLnN0cmluZ2lmeSh0LmRhdGEpLHQuaGVhZGVycz17XCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL2pzb25cIn0pKSwhMH0sanNvbnA6ZnVuY3Rpb24odCl7XCJnZXRcIj09PXQubWV0aG9kfHxlLnV0aWxzLmhhc0JpbmFyeSh0LmRhdGEpfHwodC5kYXRhLm1ldGhvZD10Lm1ldGhvZCx0Lm1ldGhvZD1cImdldFwiKX19fSl9KGhlbGxvKSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe2UmJlwibWV0YVwiaW4gZSYmXCJlcnJvcl90eXBlXCJpbiBlLm1ldGEmJihlLmVycm9yPXtjb2RlOmUubWV0YS5lcnJvcl90eXBlLG1lc3NhZ2U6ZS5tZXRhLmVycm9yX21lc3NhZ2V9KX1mdW5jdGlvbiBuKGUpe2lmKHQoZSksZS5xdWVyeSYmZS5xdWVyeS5yZXN1bHRzJiZlLnF1ZXJ5LnJlc3VsdHMucHJvZmlsZSl7ZT1lLnF1ZXJ5LnJlc3VsdHMucHJvZmlsZSxlLmlkPWUuZ3VpZCxlLmxhc3RfbmFtZT1lLmZhbWlseU5hbWUsZS5maXJzdF9uYW1lPWUuZ2l2ZW5OYW1lfHxlLm5pY2tuYW1lO3ZhciBuPVtdO2UuZmlyc3RfbmFtZSYmbi5wdXNoKGUuZmlyc3RfbmFtZSksZS5sYXN0X25hbWUmJm4ucHVzaChlLmxhc3RfbmFtZSksZS5uYW1lPW4uam9pbihcIiBcIiksZS5lbWFpbD1lLmVtYWlscyYmZS5lbWFpbHNbMF0/ZS5lbWFpbHNbMF0uaGFuZGxlOm51bGwsZS50aHVtYm5haWw9ZS5pbWFnZT9lLmltYWdlLmltYWdlVXJsOm51bGx9cmV0dXJuIGV9ZnVuY3Rpb24gbyhlLG4sbyl7dChlKSxyKGUsbixvKTtyZXR1cm4gZS5xdWVyeSYmZS5xdWVyeS5yZXN1bHRzJiZlLnF1ZXJ5LnJlc3VsdHMuY29udGFjdCYmKGUuZGF0YT1lLnF1ZXJ5LnJlc3VsdHMuY29udGFjdCxkZWxldGUgZS5xdWVyeSxBcnJheS5pc0FycmF5KGUuZGF0YSl8fChlLmRhdGE9W2UuZGF0YV0pLGUuZGF0YS5mb3JFYWNoKGkpKSxlfWZ1bmN0aW9uIGkoZSl7ZS5pZD1udWxsLCFlLmZpZWxkc3x8ZS5maWVsZHMgaW5zdGFuY2VvZiBBcnJheXx8KGUuZmllbGRzPVtlLmZpZWxkc10pLChlLmZpZWxkc3x8W10pLmZvckVhY2goZnVuY3Rpb24odCl7XCJlbWFpbFwiPT09dC50eXBlJiYoZS5lbWFpbD10LnZhbHVlKSxcIm5hbWVcIj09PXQudHlwZSYmKGUuZmlyc3RfbmFtZT10LnZhbHVlLmdpdmVuTmFtZSxlLmxhc3RfbmFtZT10LnZhbHVlLmZhbWlseU5hbWUsZS5uYW1lPXQudmFsdWUuZ2l2ZW5OYW1lK1wiIFwiK3QudmFsdWUuZmFtaWx5TmFtZSksXCJ5YWhvb2lkXCI9PT10LnR5cGUmJihlLmlkPXQudmFsdWUpfSl9ZnVuY3Rpb24gcihlLHQsbil7cmV0dXJuIGUucXVlcnkmJmUucXVlcnkuY291bnQmJm4ub3B0aW9ucyYmKGUucGFnaW5nPXtuZXh0OlwiP3N0YXJ0PVwiKyhlLnF1ZXJ5LmNvdW50Kygrbi5vcHRpb25zLnN0YXJ0fHwxKSl9KSxlfWZ1bmN0aW9uIGEoZSl7cmV0dXJuXCJodHRwczovL3F1ZXJ5LnlhaG9vYXBpcy5jb20vdjEveXFsP3E9XCIrKGUrXCIgbGltaXQgQHtsaW1pdHwxMDB9IG9mZnNldCBAe3N0YXJ0fDB9XCIpLnJlcGxhY2UoL1xccy9nLFwiJTIwXCIpK1wiJmZvcm1hdD1qc29uXCJ9ZS5pbml0KHt5YWhvbzp7b2F1dGg6e3ZlcnNpb246XCIxLjBhXCIsYXV0aDpcImh0dHBzOi8vYXBpLmxvZ2luLnlhaG9vLmNvbS9vYXV0aC92Mi9yZXF1ZXN0X2F1dGhcIixyZXF1ZXN0OlwiaHR0cHM6Ly9hcGkubG9naW4ueWFob28uY29tL29hdXRoL3YyL2dldF9yZXF1ZXN0X3Rva2VuXCIsdG9rZW46XCJodHRwczovL2FwaS5sb2dpbi55YWhvby5jb20vb2F1dGgvdjIvZ2V0X3Rva2VuXCJ9LGxvZ2luOmZ1bmN0aW9uKGUpe2Uub3B0aW9ucy5wb3B1cC53aWR0aD01NjA7dHJ5e2RlbGV0ZSBlLnFzLnN0YXRlLnNjb3BlfWNhdGNoKHQpe319LGJhc2U6XCJodHRwczovL3NvY2lhbC55YWhvb2FwaXMuY29tL3YxL1wiLGdldDp7bWU6YShcInNlbGVjdCAqIGZyb20gc29jaWFsLnByb2ZpbGUoMCkgd2hlcmUgZ3VpZD1tZVwiKSxcIm1lL2ZyaWVuZHNcIjphKFwic2VsZWN0ICogZnJvbSBzb2NpYWwuY29udGFjdHMoMCkgd2hlcmUgZ3VpZD1tZVwiKSxcIm1lL2ZvbGxvd2luZ1wiOmEoXCJzZWxlY3QgKiBmcm9tIHNvY2lhbC5jb250YWN0cygwKSB3aGVyZSBndWlkPW1lXCIpfSx3cmFwOnttZTpuLFwibWUvZnJpZW5kc1wiOm8sXCJtZS9mb2xsb3dpbmdcIjpvLFwiZGVmYXVsdFwiOnJ9fX0pfShoZWxsbyksXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoZnVuY3Rpb24oKXtyZXR1cm4gaGVsbG99KSxcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cyYmKG1vZHVsZS5leHBvcnRzPWhlbGxvKTsiLCIvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8gIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiAgQWxsIFJpZ2h0cyBSZXNlcnZlZC4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gIFNlZSBMaWNlbnNlIGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ0FwaUV4cGxvcmVyJywgWyduZ0FuaW1hdGUnLCAnbmdNYXRlcmlhbCddKVxyXG4gICAgLmNvbmZpZyhbJyRtZFRoZW1pbmdQcm92aWRlcicsIGZ1bmN0aW9uICgkbWRUaGVtaW5nUHJvdmlkZXIpIHtcclxuXHJcbiAgICAkbWRUaGVtaW5nUHJvdmlkZXIuZGVmaW5lUGFsZXR0ZSgnTzM2NVByaW1hcnlQYWxldHRlJywge1xyXG4gICAgICAgICAgICAnNTAnOiAnZTlmMGZjJyxcclxuICAgICAgICAgICAgJzEwMCc6ICdkM2UyZjgnLFxyXG4gICAgICAgICAgICAnMjAwJzogJ2JkZDNmNScsXHJcbiAgICAgICAgICAgICczMDAnOiAnOTFiNmVlJywgXHJcbiAgICAgICAgICAgICc0MDAnOiAnNjU5OWU3JyxcclxuICAgICAgICAgICAgJzUwMCc6ICc0Njg1ZTInLCAvL2JsdWVcclxuICAgICAgICAgICAgJzYwMCc6ICczODdiZTAnLFxyXG4gICAgICAgICAgICAnNzAwJzogJzIyNmRkZCcsXHJcbiAgICAgICAgICAgICc4MDAnOiAnMWY2MmM3JywgXHJcbiAgICAgICAgICAgICc5MDAnOiAnMWM1N2IwJyxcclxuICAgICAgICAgICAgJ0ExMDAnOiAnRkY2QTAwJywgXHJcbiAgICAgICAgICAgICdBMjAwJzogJ0ZGNkEwMCcsIFxyXG4gICAgICAgICAgICAnQTQwMCc6ICdGRjZBMDAnLCBcclxuICAgICAgICAgICAgJ0E3MDAnOiAnRkY2QTAwJywgXHJcbiAgICAgICAgICAgICdjb250cmFzdERlZmF1bHRDb2xvcic6ICdsaWdodCcsICAgXHJcbiAgICAgICAgICAgICdjb250cmFzdERhcmtDb2xvcnMnOiBbJzUwJywgJzEwMCcsIFxyXG4gICAgICAgICAgICAgICAgJzIwMCcsICczMDAnLCAnNDAwJywgJ0ExMDAnXSxcclxuICAgICAgICAgICAgJ2NvbnRyYXN0TGlnaHRDb2xvcnMnOiB1bmRlZmluZWQgXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgJG1kVGhlbWluZ1Byb3ZpZGVyLmRlZmluZVBhbGV0dGUoJ08zNjVBY2NlbnRQYWxldHRlJywge1xyXG4gICAgICAgICAgICAnNTAnOiAnZmZjNDk5JyxcclxuICAgICAgICAgICAgJzEwMCc6ICdmZmI1ODAnLFxyXG4gICAgICAgICAgICAnMjAwJzogJ2ZmYTY2NicsXHJcbiAgICAgICAgICAgICczMDAnOiAnZmY5NzRkJywgXHJcbiAgICAgICAgICAgICc0MDAnOiAnZmY4ODMzJyxcclxuICAgICAgICAgICAgJzUwMCc6ICdGRjZBMDAnLCAvL29yYW5nZVxyXG4gICAgICAgICAgICAnNjAwJzogJ2U2NjAwMCcsXHJcbiAgICAgICAgICAgICc3MDAnOiAnY2M1NTAwJyxcclxuICAgICAgICAgICAgJzgwMCc6ICdiMzRhMDAnLCBcclxuICAgICAgICAgICAgJzkwMCc6ICc5OTQwMDAnLFxyXG4gICAgICAgICAgICAnQTEwMCc6ICdGRjZBMDAnLFxyXG4gICAgICAgICAgICAnQTIwMCc6ICdGRjZBMDAnLCBcclxuICAgICAgICAgICAgJ0E0MDAnOiAnRkY2QTAwJywgXHJcbiAgICAgICAgICAgICdBNzAwJzogJ0ZGNkEwMCcsIFxyXG4gICAgfSk7XHJcblxyXG4gICAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdkZWZhdWx0JykucHJpbWFyeVBhbGV0dGUoJ08zNjVQcmltYXJ5UGFsZXR0ZScpO1xyXG4gICAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdkZWZhdWx0JykuYWNjZW50UGFsZXR0ZSgnTzM2NUFjY2VudFBhbGV0dGUnKTtcclxufV0pOyIsIi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uICBBbGwgUmlnaHRzIFJlc2VydmVkLiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiAgU2VlIExpY2Vuc2UgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnQXBpRXhwbG9yZXInKVxyXG4uY29uZmlnKGZ1bmN0aW9uKCRsb2NhdGlvblByb3ZpZGVyKSB7XHJcbiAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoe1xyXG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgcmVxdWlyZUJhc2U6IGZhbHNlLFxyXG4gICAgICAgIHJld3JpdGVMaW5rczogZmFsc2VcclxuICAgIH0pO1xyXG4gICAgXHJcbn0pXHJcbi5mYWN0b3J5KCdBcGlFeHBsb3JlclN2YycsIFtmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYXBpRXhwbG9yZXJTZXJ2aWNlID0ge307XHJcbiAgICByZXR1cm4gYXBpRXhwbG9yZXJTZXJ2aWNlO1xyXG59XSk7IiwiLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gIEFsbCBSaWdodHMgUmVzZXJ2ZWQuICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuICBTZWUgTGljZW5zZSBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdBcGlFeHBsb3JlcicpXHJcbiAgICAuZmFjdG9yeSgnQXBpRXhwbG9yZXJTdmMnLCBbJyRodHRwJywgJyRjYWNoZUZhY3RvcnknLCBmdW5jdGlvbiAoJGh0dHAsICRjYWNoZUZhY3RvcnkpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0ZXh0OiAnaHR0cHM6Ly9ncmFwaC5taWNyb3NvZnQuY29tL3YxLjAvbWUvJyxcclxuXHJcbiAgICAgICAgICAgIHNlbGVjdGVkVmVyc2lvbjogXCJ2MS4wXCIsXHJcblxyXG4gICAgICAgICAgICBzZWxlY3RlZE9wdGlvbjogXCJHRVRcIixcclxuXHJcbiAgICAgICAgICAgIGNhY2hlOiAkY2FjaGVGYWN0b3J5KCdteUNhY2hlJyksXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBwZXJmb3JtQW5vbnltb3VzUXVlcnk6IGZ1bmN0aW9uIChxdWVyeVR5cGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAocXVlcnksIHBvc3RTdHJpbmcsIHJlcXVlc3RIZWFkZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWRlcnNPYmogPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQXV0aG9yaXphdGlvblwiOiBcIkJlYXJlciB7dG9rZW46aHR0cHM6Ly9ncmFwaC5taWNyb3NvZnQuY29tL31cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJBY2NlcHRcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWVzdEhlYWRlcnMgJiYgcmVxdWVzdEhlYWRlcnNbXCJBdXRob3JpemF0aW9uXCJdKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc09ialtcIkF1dGhvcml6YXRpb25cIl0gPSByZXF1ZXN0SGVhZGVyc1tcIkF1dGhvcml6YXRpb25cIl07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWVzdEhlYWRlcnMgJiYgcmVxdWVzdEhlYWRlcnNbXCJBY2NlcHRcIl0pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzT2JqW1wiQWNjZXB0XCJdID0gcmVxdWVzdEhlYWRlcnNbXCJBY2NlcHRcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly9wcm94eS5hcGlzYW5kYm94Lm1zZG4ubWljcm9zb2Z0LmNvbS9zdmM/dXJsPScgKyBlbmNvZGVVUklDb21wb25lbnQocXVlcnkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzT2JqXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocXVlcnlUeXBlID09IFwiR0VUX0JJTkFSWVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RbXCJyZXNwb25zZVR5cGVcIl0gPSBcImFycmF5YnVmZmVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocXVlcnlUeXBlID09IFwiR0VUX0JJTkFSWVwiIHx8IHF1ZXJ5VHlwZSA9PSBcIkdFVFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkaHR0cChyZXF1ZXN0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgcGVyZm9ybVF1ZXJ5OiBmdW5jdGlvbiAocXVlcnlUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHF1ZXJ5LCBwb3N0U3RyaW5nLCByZXF1ZXN0SGVhZGVycykge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaChxdWVyeVR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkdFVFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldChxdWVyeSwge2hlYWRlcnMgOiByZXF1ZXN0SGVhZGVyc30pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiR0VUX0JJTkFSWVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldChxdWVyeSwge3Jlc3BvbnNlVHlwZTpcImFycmF5YnVmZmVyXCJ9LCB7aGVhZGVycyA6IHJlcXVlc3RIZWFkZXJzfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJQT1NUXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdChxdWVyeSwgcG9zdFN0cmluZywge2hlYWRlcnMgOiByZXF1ZXN0SGVhZGVyc30pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUEFUQ0hcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkaHR0cC5wYXRjaChxdWVyeSwgcG9zdFN0cmluZywge2hlYWRlcnMgOiByZXF1ZXN0SGVhZGVyc30pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiREVMRVRFXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGh0dHAuZGVsZXRlKHF1ZXJ5LCB7aGVhZGVycyA6IHJlcXVlc3RIZWFkZXJzfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGdldE1ldGFkYXRhOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBlcmZvcm1Bbm9ueW1vdXNRdWVyeShcIkdFVFwiKShcImh0dHBzOi8vZ3JhcGgubWljcm9zb2Z0LmNvbS9cIiArIHRoaXMuc2VsZWN0ZWRWZXJzaW9uICsgXCIvJG1ldGFkYXRhXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfV0pOyIsImZ1bmN0aW9uIGNyZWF0ZVNoYXJlTGluayhmdWxsUmVxdWVzdFVybCwgYWN0aW9uLCB2ZXJzaW9uKSB7ICAgIFxyXG4gICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyBcIj9yZXF1ZXN0PVwiICsgZXh0cmFjdEdyYXBoRW5kcG9pbnQoZnVsbFJlcXVlc3RVcmwpICsgXCImbWV0aG9kPVwiICsgYWN0aW9uICsgXCImdmVyc2lvbj1cIiArIHZlcnNpb247XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGV4dHJhY3RHcmFwaEVuZHBvaW50KGZ1bGxSZXF1ZXN0VXJsKSB7XHJcbiAgICByZXF1ZXN0VXJsID0gZnVsbFJlcXVlc3RVcmwuc3BsaXQoJy5jb20nKVxyXG4gICAgcmVxdWVzdFVybC5zaGlmdCgpO1xyXG4gICAgXHJcbiAgICB2YXIgcmVxdWVzdFVybENvbXBvbmVudHMgPSByZXF1ZXN0VXJsWzBdLnNwbGl0KCcvJyk7XHJcbiAgICByZXF1ZXN0VXJsQ29tcG9uZW50cy5zaGlmdCgpOyAvL3JlbW92ZSBlbXB0eSBpdGVtXHJcbiAgICByZXF1ZXN0VXJsQ29tcG9uZW50cy5zaGlmdCgpOyAvL3JlbW92ZSB2ZXJzaW9uXHJcbiAgICByZXR1cm4gKHJlcXVlc3RVcmxDb21wb25lbnRzLmpvaW4oJy8nKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzUG9zdE9yUGF0Y2gob3B0aW9uKSB7XHJcbiAgICByZXR1cm4gIG9wdGlvbiA9PSBcIlBPU1RcIiB8fCBvcHRpb24gPT0gXCJQQVRDSFwiO1xyXG59XHJcblxyXG5mdW5jdGlvbiBTaGFyZURpYWxvZ0NvbnRyb2xsZXIoJHNjb3BlLCAkbWREaWFsb2csIGFwaVNlcnZpY2UsICRzY2UsIGhlYWRlcnMsIGJvZHkpIHtcclxuICAgIHZhciBfYXBpU2VydmljZSA9IGFwaVNlcnZpY2U7XHJcbiAgICAkc2NvcGUuaGlkZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRtZERpYWxvZy5oaWRlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkbWREaWFsb2cuY2FuY2VsKCk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAkc2NvcGUuZ2V0U2hhcmVMaW5rID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHJlcXVlc3RVcmwgPSAkc2NvcGUuZ2V0U2VhcmNoVGV4dCgpO1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVTaGFyZUxpbmsocmVxdWVzdFVybCwgX2FwaVNlcnZpY2Uuc2VsZWN0ZWRPcHRpb24sIF9hcGlTZXJ2aWNlLnNlbGVjdGVkVmVyc2lvbik7XHJcbiAgICB9XHJcblxyXG4gICAgJHNjb3BlLmdlbmVyYXRlU3VwZXJBZ2VudENvZGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgcmVxdWVzdFVybCA9ICRzY29wZS5nZXRTZWFyY2hUZXh0KCk7XHJcblxyXG4gICAgICAgIHZhciBmdWxsR3JhcGhVcmwgPSBcImh0dHBzOi8vZ3JhcGgubWljcm9zb2Z0LmNvbS9cIiArIF9hcGlTZXJ2aWNlLnNlbGVjdGVkVmVyc2lvbiArIFwiL1wiICsgZXh0cmFjdEdyYXBoRW5kcG9pbnQocmVxdWVzdFVybCk7XHJcblxyXG4gICAgICAgIHZhciB0YWIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiPHNwYW4gc3R5bGU9J3BhZGRpbmctbGVmdDoxNXB4Jz48L3NwYW4+XCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbGluZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCI8YnI+XCJcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBzdHIgPSBcInJlcXVlc3RcIjtcclxuICAgICAgICBzdHIgKz0gbGluZSgpICsgdGFiKCkgKyBcIi5cIiArIF9hcGlTZXJ2aWNlLnNlbGVjdGVkT3B0aW9uLnRvTG9jYWxlTG93ZXJDYXNlKCkgKyBcIihcXFwiXCIgKyBmdWxsR3JhcGhVcmwgKyBcIlxcXCIpXCJcclxuXHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGhlYWRlcnMpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgc3RyICs9IGxpbmUoKSArIHRhYigpICsgXCIuc2V0KFwiICsgSlNPTi5zdHJpbmdpZnkoaGVhZGVycykgKyBcIilcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpc1Bvc3RPclBhdGNoKCBfYXBpU2VydmljZS5zZWxlY3RlZE9wdGlvbikpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHZhciBib2R5T2JqID0gSlNPTi5wYXJzZShib2R5KTtcclxuICAgICAgICAgICAgICAgIGlmIChib2R5T2JqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyICs9IGxpbmUoKSArIHRhYigpICsgXCIuc2VuZChcIiArIEpTT04uc3RyaW5naWZ5KGJvZHlPYmopICsgXCIpXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2goZSkge1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuIFxyXG4gICAgICAgIHN0ciArPSBsaW5lKCkgKyB0YWIoKSArIFwiLmVuZChmdW5jdGlvbihlcnIsIHJlcykge1wiXHJcbiAgICAgICAgc3RyICs9IGxpbmUoKSArIHRhYigpICsgdGFiKCkgKyBcImNvbnNvbGUubG9nKHJlcyk7XCJcclxuICAgICAgICBzdHIgKz0gbGluZSgpICsgdGFiKCkgKyBcIn0pO1wiXHJcbiAgICAgICAgcmV0dXJuICRzY2UudHJ1c3RBc0h0bWwoc3RyKTtcclxuICAgIH1cclxufSJdfQ==
